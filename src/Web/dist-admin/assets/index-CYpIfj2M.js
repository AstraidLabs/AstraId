function lf(l,i){for(var c=0;c<i.length;c++){const d=i[c];if(typeof d!="string"&&!Array.isArray(d)){for(const m in d)if(m!=="default"&&!(m in l)){const h=Object.getOwnPropertyDescriptor(d,m);h&&Object.defineProperty(l,m,h.get?h:{enumerable:!0,get:()=>d[m]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))d(m);new MutationObserver(m=>{for(const h of m)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&d(f)}).observe(document,{childList:!0,subtree:!0});function c(m){const h={};return m.integrity&&(h.integrity=m.integrity),m.referrerPolicy&&(h.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?h.credentials="include":m.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function d(m){if(m.ep)return;m.ep=!0;const h=c(m);fetch(m.href,h)}})();function Lu(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Li={exports:{}},pr={},Di={exports:{}},ye={};var Xd;function af(){if(Xd)return ye;Xd=1;var l=Symbol.for("react.element"),i=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),f=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),v=Symbol.iterator;function j(E){return E===null||typeof E!="object"?null:(E=v&&E[v]||E["@@iterator"],typeof E=="function"?E:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,T={};function y(E,z,de){this.props=E,this.context=z,this.refs=T,this.updater=de||A}y.prototype.isReactComponent={},y.prototype.setState=function(E,z){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,z,"setState")},y.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function P(){}P.prototype=y.prototype;function b(E,z,de){this.props=E,this.context=z,this.refs=T,this.updater=de||A}var R=b.prototype=new P;R.constructor=b,U(R,y.prototype),R.isPureReactComponent=!0;var L=Array.isArray,O=Object.prototype.hasOwnProperty,B={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function fe(E,z,de){var pe,be={},ve=null,F=null;if(z!=null)for(pe in z.ref!==void 0&&(F=z.ref),z.key!==void 0&&(ve=""+z.key),z)O.call(z,pe)&&!M.hasOwnProperty(pe)&&(be[pe]=z[pe]);var Q=arguments.length-2;if(Q===1)be.children=de;else if(1<Q){for(var Z=Array(Q),ce=0;ce<Q;ce++)Z[ce]=arguments[ce+2];be.children=Z}if(E&&E.defaultProps)for(pe in Q=E.defaultProps,Q)be[pe]===void 0&&(be[pe]=Q[pe]);return{$$typeof:l,type:E,key:ve,ref:F,props:be,_owner:B.current}}function Pe(E,z){return{$$typeof:l,type:E.type,key:z,ref:E.ref,props:E.props,_owner:E._owner}}function Y(E){return typeof E=="object"&&E!==null&&E.$$typeof===l}function G(E){var z={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(de){return z[de]})}var xe=/\/+/g;function Re(E,z){return typeof E=="object"&&E!==null&&E.key!=null?G(""+E.key):z.toString(36)}function ke(E,z,de,pe,be){var ve=typeof E;(ve==="undefined"||ve==="boolean")&&(E=null);var F=!1;if(E===null)F=!0;else switch(ve){case"string":case"number":F=!0;break;case"object":switch(E.$$typeof){case l:case i:F=!0}}if(F)return F=E,be=be(F),E=pe===""?"."+Re(F,0):pe,L(be)?(de="",E!=null&&(de=E.replace(xe,"$&/")+"/"),ke(be,z,de,"",function(ce){return ce})):be!=null&&(Y(be)&&(be=Pe(be,de+(!be.key||F&&F.key===be.key?"":(""+be.key).replace(xe,"$&/")+"/")+E)),z.push(be)),1;if(F=0,pe=pe===""?".":pe+":",L(E))for(var Q=0;Q<E.length;Q++){ve=E[Q];var Z=pe+Re(ve,Q);F+=ke(ve,z,de,Z,be)}else if(Z=j(E),typeof Z=="function")for(E=Z.call(E),Q=0;!(ve=E.next()).done;)ve=ve.value,Z=pe+Re(ve,Q++),F+=ke(ve,z,de,Z,be);else if(ve==="object")throw z=String(E),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return F}function $e(E,z,de){if(E==null)return E;var pe=[],be=0;return ke(E,pe,"","",function(ve){return z.call(de,ve,be++)}),pe}function Te(E){if(E._status===-1){var z=E._result;z=z(),z.then(function(de){(E._status===0||E._status===-1)&&(E._status=1,E._result=de)},function(de){(E._status===0||E._status===-1)&&(E._status=2,E._result=de)}),E._status===-1&&(E._status=0,E._result=z)}if(E._status===1)return E._result.default;throw E._result}var Ce={current:null},J={transition:null},ae={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:J,ReactCurrentOwner:B};function $(){throw Error("act(...) is not supported in production builds of React.")}return ye.Children={map:$e,forEach:function(E,z,de){$e(E,function(){z.apply(this,arguments)},de)},count:function(E){var z=0;return $e(E,function(){z++}),z},toArray:function(E){return $e(E,function(z){return z})||[]},only:function(E){if(!Y(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},ye.Component=y,ye.Fragment=c,ye.Profiler=m,ye.PureComponent=b,ye.StrictMode=d,ye.Suspense=x,ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,ye.act=$,ye.cloneElement=function(E,z,de){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var pe=U({},E.props),be=E.key,ve=E.ref,F=E._owner;if(z!=null){if(z.ref!==void 0&&(ve=z.ref,F=B.current),z.key!==void 0&&(be=""+z.key),E.type&&E.type.defaultProps)var Q=E.type.defaultProps;for(Z in z)O.call(z,Z)&&!M.hasOwnProperty(Z)&&(pe[Z]=z[Z]===void 0&&Q!==void 0?Q[Z]:z[Z])}var Z=arguments.length-2;if(Z===1)pe.children=de;else if(1<Z){Q=Array(Z);for(var ce=0;ce<Z;ce++)Q[ce]=arguments[ce+2];pe.children=Q}return{$$typeof:l,type:E.type,key:be,ref:ve,props:pe,_owner:F}},ye.createContext=function(E){return E={$$typeof:f,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:h,_context:E},E.Consumer=E},ye.createElement=fe,ye.createFactory=function(E){var z=fe.bind(null,E);return z.type=E,z},ye.createRef=function(){return{current:null}},ye.forwardRef=function(E){return{$$typeof:N,render:E}},ye.isValidElement=Y,ye.lazy=function(E){return{$$typeof:w,_payload:{_status:-1,_result:E},_init:Te}},ye.memo=function(E,z){return{$$typeof:S,type:E,compare:z===void 0?null:z}},ye.startTransition=function(E){var z=J.transition;J.transition={};try{E()}finally{J.transition=z}},ye.unstable_act=$,ye.useCallback=function(E,z){return Ce.current.useCallback(E,z)},ye.useContext=function(E){return Ce.current.useContext(E)},ye.useDebugValue=function(){},ye.useDeferredValue=function(E){return Ce.current.useDeferredValue(E)},ye.useEffect=function(E,z){return Ce.current.useEffect(E,z)},ye.useId=function(){return Ce.current.useId()},ye.useImperativeHandle=function(E,z,de){return Ce.current.useImperativeHandle(E,z,de)},ye.useInsertionEffect=function(E,z){return Ce.current.useInsertionEffect(E,z)},ye.useLayoutEffect=function(E,z){return Ce.current.useLayoutEffect(E,z)},ye.useMemo=function(E,z){return Ce.current.useMemo(E,z)},ye.useReducer=function(E,z,de){return Ce.current.useReducer(E,z,de)},ye.useRef=function(E){return Ce.current.useRef(E)},ye.useState=function(E){return Ce.current.useState(E)},ye.useSyncExternalStore=function(E,z,de){return Ce.current.useSyncExternalStore(E,z,de)},ye.useTransition=function(){return Ce.current.useTransition()},ye.version="18.3.1",ye}var Zd;function Xi(){return Zd||(Zd=1,Di.exports=af()),Di.exports}var eu;function of(){if(eu)return pr;eu=1;var l=Xi(),i=Symbol.for("react.element"),c=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,m=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function f(N,x,S){var w,v={},j=null,A=null;S!==void 0&&(j=""+S),x.key!==void 0&&(j=""+x.key),x.ref!==void 0&&(A=x.ref);for(w in x)d.call(x,w)&&!h.hasOwnProperty(w)&&(v[w]=x[w]);if(N&&N.defaultProps)for(w in x=N.defaultProps,x)v[w]===void 0&&(v[w]=x[w]);return{$$typeof:i,type:N,key:j,ref:A,props:v,_owner:m.current}}return pr.Fragment=c,pr.jsx=f,pr.jsxs=f,pr}var tu;function cf(){return tu||(tu=1,Li.exports=of()),Li.exports}var s=cf(),u=Xi();const Du=Lu(u),df=lf({__proto__:null,default:Du},[u]);var El={},Ai={exports:{}},ft={},_i={exports:{}},Oi={};var su;function uf(){return su||(su=1,(function(l){function i(J,ae){var $=J.length;J.push(ae);e:for(;0<$;){var E=$-1>>>1,z=J[E];if(0<m(z,ae))J[E]=ae,J[$]=z,$=E;else break e}}function c(J){return J.length===0?null:J[0]}function d(J){if(J.length===0)return null;var ae=J[0],$=J.pop();if($!==ae){J[0]=$;e:for(var E=0,z=J.length,de=z>>>1;E<de;){var pe=2*(E+1)-1,be=J[pe],ve=pe+1,F=J[ve];if(0>m(be,$))ve<z&&0>m(F,be)?(J[E]=F,J[ve]=$,E=ve):(J[E]=be,J[pe]=$,E=pe);else if(ve<z&&0>m(F,$))J[E]=F,J[ve]=$,E=ve;else break e}}return ae}function m(J,ae){var $=J.sortIndex-ae.sortIndex;return $!==0?$:J.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;l.unstable_now=function(){return h.now()}}else{var f=Date,N=f.now();l.unstable_now=function(){return f.now()-N}}var x=[],S=[],w=1,v=null,j=3,A=!1,U=!1,T=!1,y=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(J){for(var ae=c(S);ae!==null;){if(ae.callback===null)d(S);else if(ae.startTime<=J)d(S),ae.sortIndex=ae.expirationTime,i(x,ae);else break;ae=c(S)}}function L(J){if(T=!1,R(J),!U)if(c(x)!==null)U=!0,Te(O);else{var ae=c(S);ae!==null&&Ce(L,ae.startTime-J)}}function O(J,ae){U=!1,T&&(T=!1,P(fe),fe=-1),A=!0;var $=j;try{for(R(ae),v=c(x);v!==null&&(!(v.expirationTime>ae)||J&&!G());){var E=v.callback;if(typeof E=="function"){v.callback=null,j=v.priorityLevel;var z=E(v.expirationTime<=ae);ae=l.unstable_now(),typeof z=="function"?v.callback=z:v===c(x)&&d(x),R(ae)}else d(x);v=c(x)}if(v!==null)var de=!0;else{var pe=c(S);pe!==null&&Ce(L,pe.startTime-ae),de=!1}return de}finally{v=null,j=$,A=!1}}var B=!1,M=null,fe=-1,Pe=5,Y=-1;function G(){return!(l.unstable_now()-Y<Pe)}function xe(){if(M!==null){var J=l.unstable_now();Y=J;var ae=!0;try{ae=M(!0,J)}finally{ae?Re():(B=!1,M=null)}}else B=!1}var Re;if(typeof b=="function")Re=function(){b(xe)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,$e=ke.port2;ke.port1.onmessage=xe,Re=function(){$e.postMessage(null)}}else Re=function(){y(xe,0)};function Te(J){M=J,B||(B=!0,Re())}function Ce(J,ae){fe=y(function(){J(l.unstable_now())},ae)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(J){J.callback=null},l.unstable_continueExecution=function(){U||A||(U=!0,Te(O))},l.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Pe=0<J?Math.floor(1e3/J):5},l.unstable_getCurrentPriorityLevel=function(){return j},l.unstable_getFirstCallbackNode=function(){return c(x)},l.unstable_next=function(J){switch(j){case 1:case 2:case 3:var ae=3;break;default:ae=j}var $=j;j=ae;try{return J()}finally{j=$}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(J,ae){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var $=j;j=J;try{return ae()}finally{j=$}},l.unstable_scheduleCallback=function(J,ae,$){var E=l.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?E+$:E):$=E,J){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=$+z,J={id:w++,callback:ae,priorityLevel:J,startTime:$,expirationTime:z,sortIndex:-1},$>E?(J.sortIndex=$,i(S,J),c(x)===null&&J===c(S)&&(T?(P(fe),fe=-1):T=!0,Ce(L,$-E))):(J.sortIndex=z,i(x,J),U||A||(U=!0,Te(O))),J},l.unstable_shouldYield=G,l.unstable_wrapCallback=function(J){var ae=j;return function(){var $=j;j=ae;try{return J.apply(this,arguments)}finally{j=$}}}})(Oi)),Oi}var nu;function mf(){return nu||(nu=1,_i.exports=uf()),_i.exports}var ru;function pf(){if(ru)return ft;ru=1;var l=Xi(),i=mf();function c(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=new Set,m={};function h(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(m[e]=t,e=0;e<t.length;e++)d.add(t[e])}var N=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x=Object.prototype.hasOwnProperty,S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},v={};function j(e){return x.call(v,e)?!0:x.call(w,e)?!1:S.test(e)?v[e]=!0:(w[e]=!0,!1)}function A(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function U(e,t,n,r){if(t===null||typeof t>"u"||A(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function T(e,t,n,r,a,o,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=p}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){y[e]=new T(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];y[t]=new T(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){y[e]=new T(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){y[e]=new T(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){y[e]=new T(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){y[e]=new T(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){y[e]=new T(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){y[e]=new T(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){y[e]=new T(e,5,!1,e.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(P,b);y[t]=new T(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(P,b);y[t]=new T(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(P,b);y[t]=new T(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){y[e]=new T(e,1,!1,e.toLowerCase(),null,!1,!1)}),y.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){y[e]=new T(e,1,!1,e.toLowerCase(),null,!0,!0)});function R(e,t,n,r){var a=y.hasOwnProperty(t)?y[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(U(t,n,a,r)&&(n=null),r||a===null?j(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var L=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),B=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),Pe=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),G=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),$e=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),J=Symbol.iterator;function ae(e){return e===null||typeof e!="object"?null:(e=J&&e[J]||e["@@iterator"],typeof e=="function"?e:null)}var $=Object.assign,E;function z(e){if(E===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);E=t&&t[1]||""}return`
`+E+e}var de=!1;function pe(e,t){if(!e||de)return"";de=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(_){var r=_}Reflect.construct(e,[],t)}else{try{t.call()}catch(_){r=_}e.call(t.prototype)}else{try{throw Error()}catch(_){r=_}e()}}catch(_){if(_&&r&&typeof _.stack=="string"){for(var a=_.stack.split(`
`),o=r.stack.split(`
`),p=a.length-1,g=o.length-1;1<=p&&0<=g&&a[p]!==o[g];)g--;for(;1<=p&&0<=g;p--,g--)if(a[p]!==o[g]){if(p!==1||g!==1)do if(p--,g--,0>g||a[p]!==o[g]){var k=`
`+a[p].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=p&&0<=g);break}}}finally{de=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function be(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=pe(e.type,!1),e;case 11:return e=pe(e.type.render,!1),e;case 1:return e=pe(e.type,!0),e;default:return""}}function ve(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M:return"Fragment";case B:return"Portal";case Pe:return"Profiler";case fe:return"StrictMode";case Re:return"Suspense";case ke:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case G:return(e.displayName||"Context")+".Consumer";case Y:return(e._context.displayName||"Context")+".Provider";case xe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $e:return t=e.displayName||null,t!==null?t:ve(e.type)||"Memo";case Te:t=e._payload,e=e._init;try{return ve(e(t))}catch{}}return null}function F(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(t);case 8:return t===fe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Z(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ce(e){var t=Z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(p){r=""+p,o.call(this,p)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(p){r=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wt(e){e._valueTracker||(e._valueTracker=ce(e))}function ss(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Z(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ot(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Cn(e,t){var n=t.checked;return $({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function vr(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Q(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function me(e,t){t=t.checked,t!=null&&R(e,"checked",t,!1)}function we(e,t){me(e,t);var n=Q(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?En(e,t.type,n):t.hasOwnProperty("defaultValue")&&En(e,t.type,Q(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ze(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function En(e,t,n){(t!=="number"||Ot(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Pn=Array.isArray;function Js(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Vl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(c(91));return $({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function io(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(c(92));if(Pn(n)){if(1<n.length)throw Error(c(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function oo(e,t){var n=Q(t.value),r=Q(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function co(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function uo(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?uo(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var yr,mo=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(yr=yr||document.createElement("div"),yr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Tn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cm=["Webkit","ms","Moz","O"];Object.keys(Tn).forEach(function(e){cm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Tn[t]=Tn[e]})});function po(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Tn.hasOwnProperty(e)&&Tn[e]?(""+t).trim():t+"px"}function fo(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=po(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var dm=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hl(e,t){if(t){if(dm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(c(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(c(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(c(61))}if(t.style!=null&&typeof t.style!="object")throw Error(c(62))}}function Kl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jl=null;function ql(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ql=null,qs=null,Qs=null;function ho(e){if(e=Xn(e)){if(typeof Ql!="function")throw Error(c(280));var t=e.stateNode;t&&(t=Br(t),Ql(e.stateNode,e.type,t))}}function xo(e){qs?Qs?Qs.push(e):Qs=[e]:qs=e}function go(){if(qs){var e=qs,t=Qs;if(Qs=qs=null,ho(e),t)for(e=0;e<t.length;e++)ho(t[e])}}function vo(e,t){return e(t)}function yo(){}var Gl=!1;function jo(e,t,n){if(Gl)return e(t,n);Gl=!0;try{return vo(e,t,n)}finally{Gl=!1,(qs!==null||Qs!==null)&&(yo(),go())}}function In(e,t){var n=e.stateNode;if(n===null)return null;var r=Br(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(c(231,t,typeof n));return n}var Yl=!1;if(N)try{var Un={};Object.defineProperty(Un,"passive",{get:function(){Yl=!0}}),window.addEventListener("test",Un,Un),window.removeEventListener("test",Un,Un)}catch{Yl=!1}function um(e,t,n,r,a,o,p,g,k){var _=Array.prototype.slice.call(arguments,3);try{t.apply(n,_)}catch(W){this.onError(W)}}var Ln=!1,jr=null,br=!1,Xl=null,mm={onError:function(e){Ln=!0,jr=e}};function pm(e,t,n,r,a,o,p,g,k){Ln=!1,jr=null,um.apply(mm,arguments)}function fm(e,t,n,r,a,o,p,g,k){if(pm.apply(this,arguments),Ln){if(Ln){var _=jr;Ln=!1,jr=null}else throw Error(c(198));br||(br=!0,Xl=_)}}function Rs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function bo(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function No(e){if(Rs(e)!==e)throw Error(c(188))}function hm(e){var t=e.alternate;if(!t){if(t=Rs(e),t===null)throw Error(c(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return No(a),e;if(o===r)return No(a),t;o=o.sibling}throw Error(c(188))}if(n.return!==r.return)n=a,r=o;else{for(var p=!1,g=a.child;g;){if(g===n){p=!0,n=a,r=o;break}if(g===r){p=!0,r=a,n=o;break}g=g.sibling}if(!p){for(g=o.child;g;){if(g===n){p=!0,n=o,r=a;break}if(g===r){p=!0,r=o,n=a;break}g=g.sibling}if(!p)throw Error(c(189))}}if(n.alternate!==r)throw Error(c(190))}if(n.tag!==3)throw Error(c(188));return n.stateNode.current===n?e:t}function wo(e){return e=hm(e),e!==null?So(e):null}function So(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=So(e);if(t!==null)return t;e=e.sibling}return null}var ko=i.unstable_scheduleCallback,Co=i.unstable_cancelCallback,xm=i.unstable_shouldYield,gm=i.unstable_requestPaint,Be=i.unstable_now,vm=i.unstable_getCurrentPriorityLevel,Zl=i.unstable_ImmediatePriority,Eo=i.unstable_UserBlockingPriority,Nr=i.unstable_NormalPriority,ym=i.unstable_LowPriority,Po=i.unstable_IdlePriority,wr=null,Mt=null;function jm(e){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(wr,e,void 0,(e.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:wm,bm=Math.log,Nm=Math.LN2;function wm(e){return e>>>=0,e===0?32:31-(bm(e)/Nm|0)|0}var Sr=64,kr=4194304;function Dn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cr(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,p=n&268435455;if(p!==0){var g=p&~a;g!==0?r=Dn(g):(o&=p,o!==0&&(r=Dn(o)))}else p=n&~a,p!==0?r=Dn(p):o!==0&&(r=Dn(o));if(r===0)return 0;if(t!==0&&t!==r&&(t&a)===0&&(a=r&-r,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Rt(t),a=1<<n,r|=e[n],t&=~a;return r}function Sm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function km(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var p=31-Rt(o),g=1<<p,k=a[p];k===-1?((g&n)===0||(g&r)!==0)&&(a[p]=Sm(g,t)):k<=t&&(e.expiredLanes|=g),o&=~g}}function ea(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ro(){var e=Sr;return Sr<<=1,(Sr&4194240)===0&&(Sr=64),e}function ta(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function An(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rt(t),e[t]=n}function Cm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Rt(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}function sa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Rt(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Ie=0;function To(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Io,na,Uo,Lo,Do,ra=!1,Er=[],ns=null,rs=null,ls=null,_n=new Map,On=new Map,as=[],Em="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ao(e,t){switch(e){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":_n.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":On.delete(t.pointerId)}}function Mn(e,t,n,r,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},t!==null&&(t=Xn(t),t!==null&&na(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Pm(e,t,n,r,a){switch(t){case"focusin":return ns=Mn(ns,e,t,n,r,a),!0;case"dragenter":return rs=Mn(rs,e,t,n,r,a),!0;case"mouseover":return ls=Mn(ls,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return _n.set(o,Mn(_n.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,On.set(o,Mn(On.get(o)||null,e,t,n,r,a)),!0}return!1}function _o(e){var t=Ts(e.target);if(t!==null){var n=Rs(t);if(n!==null){if(t=n.tag,t===13){if(t=bo(n),t!==null){e.blockedOn=t,Do(e.priority,function(){Uo(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=aa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Jl=r,n.target.dispatchEvent(r),Jl=null}else return t=Xn(n),t!==null&&na(t),e.blockedOn=n,!1;t.shift()}return!0}function Oo(e,t,n){Pr(e)&&n.delete(t)}function Rm(){ra=!1,ns!==null&&Pr(ns)&&(ns=null),rs!==null&&Pr(rs)&&(rs=null),ls!==null&&Pr(ls)&&(ls=null),_n.forEach(Oo),On.forEach(Oo)}function zn(e,t){e.blockedOn===t&&(e.blockedOn=null,ra||(ra=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Rm)))}function Fn(e){function t(a){return zn(a,e)}if(0<Er.length){zn(Er[0],e);for(var n=1;n<Er.length;n++){var r=Er[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ns!==null&&zn(ns,e),rs!==null&&zn(rs,e),ls!==null&&zn(ls,e),_n.forEach(t),On.forEach(t),n=0;n<as.length;n++)r=as[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<as.length&&(n=as[0],n.blockedOn===null);)_o(n),n.blockedOn===null&&as.shift()}var Gs=L.ReactCurrentBatchConfig,Rr=!0;function Tm(e,t,n,r){var a=Ie,o=Gs.transition;Gs.transition=null;try{Ie=1,la(e,t,n,r)}finally{Ie=a,Gs.transition=o}}function Im(e,t,n,r){var a=Ie,o=Gs.transition;Gs.transition=null;try{Ie=4,la(e,t,n,r)}finally{Ie=a,Gs.transition=o}}function la(e,t,n,r){if(Rr){var a=aa(e,t,n,r);if(a===null)wa(e,t,r,Tr,n),Ao(e,r);else if(Pm(a,e,t,n,r))r.stopPropagation();else if(Ao(e,r),t&4&&-1<Em.indexOf(e)){for(;a!==null;){var o=Xn(a);if(o!==null&&Io(o),o=aa(e,t,n,r),o===null&&wa(e,t,r,Tr,n),o===a)break;a=o}a!==null&&r.stopPropagation()}else wa(e,t,r,null,n)}}var Tr=null;function aa(e,t,n,r){if(Tr=null,e=ql(r),e=Ts(e),e!==null)if(t=Rs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=bo(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Tr=e,null}function Mo(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vm()){case Zl:return 1;case Eo:return 4;case Nr:case ym:return 16;case Po:return 536870912;default:return 16}default:return 16}}var is=null,ia=null,Ir=null;function zo(){if(Ir)return Ir;var e,t=ia,n=t.length,r,a="value"in is?is.value:is.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var p=n-e;for(r=1;r<=p&&t[n-r]===a[o-r];r++);return Ir=a.slice(e,1<r?1-r:void 0)}function Ur(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Lr(){return!0}function Fo(){return!1}function gt(e){function t(n,r,a,o,p){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=o,this.target=p,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(n=e[g],this[g]=n?n(o):o[g]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Lr:Fo,this.isPropagationStopped=Fo,this}return $(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lr)},persist:function(){},isPersistent:Lr}),t}var Ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oa=gt(Ys),$n=$({},Ys,{view:0,detail:0}),Um=gt($n),ca,da,Bn,Dr=$({},$n,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ma,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bn&&(Bn&&e.type==="mousemove"?(ca=e.screenX-Bn.screenX,da=e.screenY-Bn.screenY):da=ca=0,Bn=e),ca)},movementY:function(e){return"movementY"in e?e.movementY:da}}),$o=gt(Dr),Lm=$({},Dr,{dataTransfer:0}),Dm=gt(Lm),Am=$({},$n,{relatedTarget:0}),ua=gt(Am),_m=$({},Ys,{animationName:0,elapsedTime:0,pseudoElement:0}),Om=gt(_m),Mm=$({},Ys,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zm=gt(Mm),Fm=$({},Ys,{data:0}),Bo=gt(Fm),$m={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vm[e])?!!t[e]:!1}function ma(){return Wm}var Hm=$({},$n,{key:function(e){if(e.key){var t=$m[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ur(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ma,charCode:function(e){return e.type==="keypress"?Ur(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ur(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Km=gt(Hm),Jm=$({},Dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vo=gt(Jm),qm=$({},$n,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ma}),Qm=gt(qm),Gm=$({},Ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ym=gt(Gm),Xm=$({},Dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zm=gt(Xm),ep=[9,13,27,32],pa=N&&"CompositionEvent"in window,Vn=null;N&&"documentMode"in document&&(Vn=document.documentMode);var tp=N&&"TextEvent"in window&&!Vn,Wo=N&&(!pa||Vn&&8<Vn&&11>=Vn),Ho=" ",Ko=!1;function Jo(e,t){switch(e){case"keyup":return ep.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xs=!1;function sp(e,t){switch(e){case"compositionend":return qo(t);case"keypress":return t.which!==32?null:(Ko=!0,Ho);case"textInput":return e=t.data,e===Ho&&Ko?null:e;default:return null}}function np(e,t){if(Xs)return e==="compositionend"||!pa&&Jo(e,t)?(e=zo(),Ir=ia=is=null,Xs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wo&&t.locale!=="ko"?null:t.data;default:return null}}var rp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rp[e.type]:t==="textarea"}function Go(e,t,n,r){xo(r),t=zr(t,"onChange"),0<t.length&&(n=new oa("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function lp(e){fc(e,0)}function Ar(e){var t=nn(e);if(ss(t))return e}function ap(e,t){if(e==="change")return t}var Yo=!1;if(N){var fa;if(N){var ha="oninput"in document;if(!ha){var Xo=document.createElement("div");Xo.setAttribute("oninput","return;"),ha=typeof Xo.oninput=="function"}fa=ha}else fa=!1;Yo=fa&&(!document.documentMode||9<document.documentMode)}function Zo(){Wn&&(Wn.detachEvent("onpropertychange",ec),Hn=Wn=null)}function ec(e){if(e.propertyName==="value"&&Ar(Hn)){var t=[];Go(t,Hn,e,ql(e)),jo(lp,t)}}function ip(e,t,n){e==="focusin"?(Zo(),Wn=t,Hn=n,Wn.attachEvent("onpropertychange",ec)):e==="focusout"&&Zo()}function op(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ar(Hn)}function cp(e,t){if(e==="click")return Ar(t)}function dp(e,t){if(e==="input"||e==="change")return Ar(t)}function up(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tt=typeof Object.is=="function"?Object.is:up;function Kn(e,t){if(Tt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!x.call(t,a)||!Tt(e[a],t[a]))return!1}return!0}function tc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sc(e,t){var n=tc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tc(n)}}function nc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rc(){for(var e=window,t=Ot();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ot(e.document)}return t}function xa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mp(e){var t=rc(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&nc(n.ownerDocument.documentElement,n)){if(r!==null&&xa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=r.end===void 0?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=sc(n,o);var p=sc(n,r);a&&p&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pp=N&&"documentMode"in document&&11>=document.documentMode,Zs=null,ga=null,Jn=null,va=!1;function lc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;va||Zs==null||Zs!==Ot(r)||(r=Zs,"selectionStart"in r&&xa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jn&&Kn(Jn,r)||(Jn=r,r=zr(ga,"onSelect"),0<r.length&&(t=new oa("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Zs)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var en={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},ya={},ac={};N&&(ac=document.createElement("div").style,"AnimationEvent"in window||(delete en.animationend.animation,delete en.animationiteration.animation,delete en.animationstart.animation),"TransitionEvent"in window||delete en.transitionend.transition);function Or(e){if(ya[e])return ya[e];if(!en[e])return e;var t=en[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ac)return ya[e]=t[n];return e}var ic=Or("animationend"),oc=Or("animationiteration"),cc=Or("animationstart"),dc=Or("transitionend"),uc=new Map,mc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function os(e,t){uc.set(e,t),h(t,[e])}for(var ja=0;ja<mc.length;ja++){var ba=mc[ja],fp=ba.toLowerCase(),hp=ba[0].toUpperCase()+ba.slice(1);os(fp,"on"+hp)}os(ic,"onAnimationEnd"),os(oc,"onAnimationIteration"),os(cc,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(dc,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xp=new Set("cancel close invalid load scroll toggle".split(" ").concat(qn));function pc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,fm(r,t,void 0,e),e.currentTarget=null}function fc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var p=r.length-1;0<=p;p--){var g=r[p],k=g.instance,_=g.currentTarget;if(g=g.listener,k!==o&&a.isPropagationStopped())break e;pc(a,g,_),o=k}else for(p=0;p<r.length;p++){if(g=r[p],k=g.instance,_=g.currentTarget,g=g.listener,k!==o&&a.isPropagationStopped())break e;pc(a,g,_),o=k}}}if(br)throw e=Xl,br=!1,Xl=null,e}function Le(e,t){var n=t[Ra];n===void 0&&(n=t[Ra]=new Set);var r=e+"__bubble";n.has(r)||(hc(t,e,2,!1),n.add(r))}function Na(e,t,n){var r=0;t&&(r|=4),hc(n,e,r,t)}var Mr="_reactListening"+Math.random().toString(36).slice(2);function Qn(e){if(!e[Mr]){e[Mr]=!0,d.forEach(function(n){n!=="selectionchange"&&(xp.has(n)||Na(n,!1,e),Na(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Mr]||(t[Mr]=!0,Na("selectionchange",!1,t))}}function hc(e,t,n,r){switch(Mo(t)){case 1:var a=Tm;break;case 4:a=Im;break;default:a=la}n=a.bind(null,t,n,e),a=void 0,!Yl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function wa(e,t,n,r,a){var o=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var p=r.tag;if(p===3||p===4){var g=r.stateNode.containerInfo;if(g===a||g.nodeType===8&&g.parentNode===a)break;if(p===4)for(p=r.return;p!==null;){var k=p.tag;if((k===3||k===4)&&(k=p.stateNode.containerInfo,k===a||k.nodeType===8&&k.parentNode===a))return;p=p.return}for(;g!==null;){if(p=Ts(g),p===null)return;if(k=p.tag,k===5||k===6){r=o=p;continue e}g=g.parentNode}}r=r.return}jo(function(){var _=o,W=ql(n),H=[];e:{var V=uc.get(e);if(V!==void 0){var X=oa,te=e;switch(e){case"keypress":if(Ur(n)===0)break e;case"keydown":case"keyup":X=Km;break;case"focusin":te="focus",X=ua;break;case"focusout":te="blur",X=ua;break;case"beforeblur":case"afterblur":X=ua;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=$o;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Dm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Qm;break;case ic:case oc:case cc:X=Om;break;case dc:X=Ym;break;case"scroll":X=Um;break;case"wheel":X=Zm;break;case"copy":case"cut":case"paste":X=zm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Vo}var se=(t&4)!==0,Ve=!se&&e==="scroll",I=se?V!==null?V+"Capture":null:V;se=[];for(var C=_,D;C!==null;){D=C;var K=D.stateNode;if(D.tag===5&&K!==null&&(D=K,I!==null&&(K=In(C,I),K!=null&&se.push(Gn(C,K,D)))),Ve)break;C=C.return}0<se.length&&(V=new X(V,te,null,n,W),H.push({event:V,listeners:se}))}}if((t&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",V&&n!==Jl&&(te=n.relatedTarget||n.fromElement)&&(Ts(te)||te[Ht]))break e;if((X||V)&&(V=W.window===W?W:(V=W.ownerDocument)?V.defaultView||V.parentWindow:window,X?(te=n.relatedTarget||n.toElement,X=_,te=te?Ts(te):null,te!==null&&(Ve=Rs(te),te!==Ve||te.tag!==5&&te.tag!==6)&&(te=null)):(X=null,te=_),X!==te)){if(se=$o,K="onMouseLeave",I="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(se=Vo,K="onPointerLeave",I="onPointerEnter",C="pointer"),Ve=X==null?V:nn(X),D=te==null?V:nn(te),V=new se(K,C+"leave",X,n,W),V.target=Ve,V.relatedTarget=D,K=null,Ts(W)===_&&(se=new se(I,C+"enter",te,n,W),se.target=D,se.relatedTarget=Ve,K=se),Ve=K,X&&te)t:{for(se=X,I=te,C=0,D=se;D;D=tn(D))C++;for(D=0,K=I;K;K=tn(K))D++;for(;0<C-D;)se=tn(se),C--;for(;0<D-C;)I=tn(I),D--;for(;C--;){if(se===I||I!==null&&se===I.alternate)break t;se=tn(se),I=tn(I)}se=null}else se=null;X!==null&&xc(H,V,X,se,!1),te!==null&&Ve!==null&&xc(H,Ve,te,se,!0)}}e:{if(V=_?nn(_):window,X=V.nodeName&&V.nodeName.toLowerCase(),X==="select"||X==="input"&&V.type==="file")var ne=ap;else if(Qo(V))if(Yo)ne=dp;else{ne=op;var ie=ip}else(X=V.nodeName)&&X.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(ne=cp);if(ne&&(ne=ne(e,_))){Go(H,ne,n,W);break e}ie&&ie(e,V,_),e==="focusout"&&(ie=V._wrapperState)&&ie.controlled&&V.type==="number"&&En(V,"number",V.value)}switch(ie=_?nn(_):window,e){case"focusin":(Qo(ie)||ie.contentEditable==="true")&&(Zs=ie,ga=_,Jn=null);break;case"focusout":Jn=ga=Zs=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,lc(H,n,W);break;case"selectionchange":if(pp)break;case"keydown":case"keyup":lc(H,n,W)}var oe;if(pa)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Xs?Jo(e,n)&&(ue="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ue="onCompositionStart");ue&&(Wo&&n.locale!=="ko"&&(Xs||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Xs&&(oe=zo()):(is=W,ia="value"in is?is.value:is.textContent,Xs=!0)),ie=zr(_,ue),0<ie.length&&(ue=new Bo(ue,e,null,n,W),H.push({event:ue,listeners:ie}),oe?ue.data=oe:(oe=qo(n),oe!==null&&(ue.data=oe)))),(oe=tp?sp(e,n):np(e,n))&&(_=zr(_,"onBeforeInput"),0<_.length&&(W=new Bo("onBeforeInput","beforeinput",null,n,W),H.push({event:W,listeners:_}),W.data=oe))}fc(H,t)})}function Gn(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zr(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=In(e,n),o!=null&&r.unshift(Gn(e,o,a)),o=In(e,t),o!=null&&r.push(Gn(e,o,a))),e=e.return}return r}function tn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xc(e,t,n,r,a){for(var o=t._reactName,p=[];n!==null&&n!==r;){var g=n,k=g.alternate,_=g.stateNode;if(k!==null&&k===r)break;g.tag===5&&_!==null&&(g=_,a?(k=In(n,o),k!=null&&p.unshift(Gn(n,k,g))):a||(k=In(n,o),k!=null&&p.push(Gn(n,k,g)))),n=n.return}p.length!==0&&e.push({event:t,listeners:p})}var gp=/\r\n?/g,vp=/\u0000|\uFFFD/g;function gc(e){return(typeof e=="string"?e:""+e).replace(gp,`
`).replace(vp,"")}function Fr(e,t,n){if(t=gc(t),gc(e)!==t&&n)throw Error(c(425))}function $r(){}var Sa=null,ka=null;function Ca(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ea=typeof setTimeout=="function"?setTimeout:void 0,yp=typeof clearTimeout=="function"?clearTimeout:void 0,vc=typeof Promise=="function"?Promise:void 0,jp=typeof queueMicrotask=="function"?queueMicrotask:typeof vc<"u"?function(e){return vc.resolve(null).then(e).catch(bp)}:Ea;function bp(e){setTimeout(function(){throw e})}function Pa(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Fn(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Fn(t)}function cs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var sn=Math.random().toString(36).slice(2),zt="__reactFiber$"+sn,Yn="__reactProps$"+sn,Ht="__reactContainer$"+sn,Ra="__reactEvents$"+sn,Np="__reactListeners$"+sn,wp="__reactHandles$"+sn;function Ts(e){var t=e[zt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ht]||n[zt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=yc(e);e!==null;){if(n=e[zt])return n;e=yc(e)}return t}e=n,n=e.parentNode}return null}function Xn(e){return e=e[zt]||e[Ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(c(33))}function Br(e){return e[Yn]||null}var Ta=[],rn=-1;function ds(e){return{current:e}}function De(e){0>rn||(e.current=Ta[rn],Ta[rn]=null,rn--)}function Ue(e,t){rn++,Ta[rn]=e.current,e.current=t}var us={},nt=ds(us),ct=ds(!1),Is=us;function ln(e,t){var n=e.type.contextTypes;if(!n)return us;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in n)a[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function dt(e){return e=e.childContextTypes,e!=null}function Vr(){De(ct),De(nt)}function jc(e,t,n){if(nt.current!==us)throw Error(c(168));Ue(nt,t),Ue(ct,n)}function bc(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(c(108,F(e)||"Unknown",a));return $({},n,r)}function Wr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||us,Is=nt.current,Ue(nt,e),Ue(ct,ct.current),!0}function Nc(e,t,n){var r=e.stateNode;if(!r)throw Error(c(169));n?(e=bc(e,t,Is),r.__reactInternalMemoizedMergedChildContext=e,De(ct),De(nt),Ue(nt,e)):De(ct),Ue(ct,n)}var Kt=null,Hr=!1,Ia=!1;function wc(e){Kt===null?Kt=[e]:Kt.push(e)}function Sp(e){Hr=!0,wc(e)}function ms(){if(!Ia&&Kt!==null){Ia=!0;var e=0,t=Ie;try{var n=Kt;for(Ie=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Kt=null,Hr=!1}catch(a){throw Kt!==null&&(Kt=Kt.slice(e+1)),ko(Zl,ms),a}finally{Ie=t,Ia=!1}}return null}var an=[],on=0,Kr=null,Jr=0,wt=[],St=0,Us=null,Jt=1,qt="";function Ls(e,t){an[on++]=Jr,an[on++]=Kr,Kr=e,Jr=t}function Sc(e,t,n){wt[St++]=Jt,wt[St++]=qt,wt[St++]=Us,Us=e;var r=Jt;e=qt;var a=32-Rt(r)-1;r&=~(1<<a),n+=1;var o=32-Rt(t)+a;if(30<o){var p=a-a%5;o=(r&(1<<p)-1).toString(32),r>>=p,a-=p,Jt=1<<32-Rt(t)+a|n<<a|r,qt=o+e}else Jt=1<<o|n<<a|r,qt=e}function Ua(e){e.return!==null&&(Ls(e,1),Sc(e,1,0))}function La(e){for(;e===Kr;)Kr=an[--on],an[on]=null,Jr=an[--on],an[on]=null;for(;e===Us;)Us=wt[--St],wt[St]=null,qt=wt[--St],wt[St]=null,Jt=wt[--St],wt[St]=null}var vt=null,yt=null,Ae=!1,It=null;function kc(e,t){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Cc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,vt=e,yt=cs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,vt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Us!==null?{id:Jt,overflow:qt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,vt=e,yt=null,!0):!1;default:return!1}}function Da(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Aa(e){if(Ae){var t=yt;if(t){var n=t;if(!Cc(e,t)){if(Da(e))throw Error(c(418));t=cs(n.nextSibling);var r=vt;t&&Cc(e,t)?kc(r,n):(e.flags=e.flags&-4097|2,Ae=!1,vt=e)}}else{if(Da(e))throw Error(c(418));e.flags=e.flags&-4097|2,Ae=!1,vt=e}}}function Ec(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;vt=e}function qr(e){if(e!==vt)return!1;if(!Ae)return Ec(e),Ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ca(e.type,e.memoizedProps)),t&&(t=yt)){if(Da(e))throw Pc(),Error(c(418));for(;t;)kc(e,t),t=cs(t.nextSibling)}if(Ec(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){yt=cs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=vt?cs(e.stateNode.nextSibling):null;return!0}function Pc(){for(var e=yt;e;)e=cs(e.nextSibling)}function cn(){yt=vt=null,Ae=!1}function _a(e){It===null?It=[e]:It.push(e)}var kp=L.ReactCurrentBatchConfig;function Zn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(c(309));var r=n.stateNode}if(!r)throw Error(c(147,e));var a=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(p){var g=a.refs;p===null?delete g[o]:g[o]=p},t._stringRef=o,t)}if(typeof e!="string")throw Error(c(284));if(!n._owner)throw Error(c(290,e))}return e}function Qr(e,t){throw e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rc(e){var t=e._init;return t(e._payload)}function Tc(e){function t(I,C){if(e){var D=I.deletions;D===null?(I.deletions=[C],I.flags|=16):D.push(C)}}function n(I,C){if(!e)return null;for(;C!==null;)t(I,C),C=C.sibling;return null}function r(I,C){for(I=new Map;C!==null;)C.key!==null?I.set(C.key,C):I.set(C.index,C),C=C.sibling;return I}function a(I,C){return I=js(I,C),I.index=0,I.sibling=null,I}function o(I,C,D){return I.index=D,e?(D=I.alternate,D!==null?(D=D.index,D<C?(I.flags|=2,C):D):(I.flags|=2,C)):(I.flags|=1048576,C)}function p(I){return e&&I.alternate===null&&(I.flags|=2),I}function g(I,C,D,K){return C===null||C.tag!==6?(C=Ei(D,I.mode,K),C.return=I,C):(C=a(C,D),C.return=I,C)}function k(I,C,D,K){var ne=D.type;return ne===M?W(I,C,D.props.children,K,D.key):C!==null&&(C.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Te&&Rc(ne)===C.type)?(K=a(C,D.props),K.ref=Zn(I,C,D),K.return=I,K):(K=yl(D.type,D.key,D.props,null,I.mode,K),K.ref=Zn(I,C,D),K.return=I,K)}function _(I,C,D,K){return C===null||C.tag!==4||C.stateNode.containerInfo!==D.containerInfo||C.stateNode.implementation!==D.implementation?(C=Pi(D,I.mode,K),C.return=I,C):(C=a(C,D.children||[]),C.return=I,C)}function W(I,C,D,K,ne){return C===null||C.tag!==7?(C=$s(D,I.mode,K,ne),C.return=I,C):(C=a(C,D),C.return=I,C)}function H(I,C,D){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Ei(""+C,I.mode,D),C.return=I,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case O:return D=yl(C.type,C.key,C.props,null,I.mode,D),D.ref=Zn(I,null,C),D.return=I,D;case B:return C=Pi(C,I.mode,D),C.return=I,C;case Te:var K=C._init;return H(I,K(C._payload),D)}if(Pn(C)||ae(C))return C=$s(C,I.mode,D,null),C.return=I,C;Qr(I,C)}return null}function V(I,C,D,K){var ne=C!==null?C.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return ne!==null?null:g(I,C,""+D,K);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case O:return D.key===ne?k(I,C,D,K):null;case B:return D.key===ne?_(I,C,D,K):null;case Te:return ne=D._init,V(I,C,ne(D._payload),K)}if(Pn(D)||ae(D))return ne!==null?null:W(I,C,D,K,null);Qr(I,D)}return null}function X(I,C,D,K,ne){if(typeof K=="string"&&K!==""||typeof K=="number")return I=I.get(D)||null,g(C,I,""+K,ne);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case O:return I=I.get(K.key===null?D:K.key)||null,k(C,I,K,ne);case B:return I=I.get(K.key===null?D:K.key)||null,_(C,I,K,ne);case Te:var ie=K._init;return X(I,C,D,ie(K._payload),ne)}if(Pn(K)||ae(K))return I=I.get(D)||null,W(C,I,K,ne,null);Qr(C,K)}return null}function te(I,C,D,K){for(var ne=null,ie=null,oe=C,ue=C=0,Ze=null;oe!==null&&ue<D.length;ue++){oe.index>ue?(Ze=oe,oe=null):Ze=oe.sibling;var Se=V(I,oe,D[ue],K);if(Se===null){oe===null&&(oe=Ze);break}e&&oe&&Se.alternate===null&&t(I,oe),C=o(Se,C,ue),ie===null?ne=Se:ie.sibling=Se,ie=Se,oe=Ze}if(ue===D.length)return n(I,oe),Ae&&Ls(I,ue),ne;if(oe===null){for(;ue<D.length;ue++)oe=H(I,D[ue],K),oe!==null&&(C=o(oe,C,ue),ie===null?ne=oe:ie.sibling=oe,ie=oe);return Ae&&Ls(I,ue),ne}for(oe=r(I,oe);ue<D.length;ue++)Ze=X(oe,I,ue,D[ue],K),Ze!==null&&(e&&Ze.alternate!==null&&oe.delete(Ze.key===null?ue:Ze.key),C=o(Ze,C,ue),ie===null?ne=Ze:ie.sibling=Ze,ie=Ze);return e&&oe.forEach(function(bs){return t(I,bs)}),Ae&&Ls(I,ue),ne}function se(I,C,D,K){var ne=ae(D);if(typeof ne!="function")throw Error(c(150));if(D=ne.call(D),D==null)throw Error(c(151));for(var ie=ne=null,oe=C,ue=C=0,Ze=null,Se=D.next();oe!==null&&!Se.done;ue++,Se=D.next()){oe.index>ue?(Ze=oe,oe=null):Ze=oe.sibling;var bs=V(I,oe,Se.value,K);if(bs===null){oe===null&&(oe=Ze);break}e&&oe&&bs.alternate===null&&t(I,oe),C=o(bs,C,ue),ie===null?ne=bs:ie.sibling=bs,ie=bs,oe=Ze}if(Se.done)return n(I,oe),Ae&&Ls(I,ue),ne;if(oe===null){for(;!Se.done;ue++,Se=D.next())Se=H(I,Se.value,K),Se!==null&&(C=o(Se,C,ue),ie===null?ne=Se:ie.sibling=Se,ie=Se);return Ae&&Ls(I,ue),ne}for(oe=r(I,oe);!Se.done;ue++,Se=D.next())Se=X(oe,I,ue,Se.value,K),Se!==null&&(e&&Se.alternate!==null&&oe.delete(Se.key===null?ue:Se.key),C=o(Se,C,ue),ie===null?ne=Se:ie.sibling=Se,ie=Se);return e&&oe.forEach(function(rf){return t(I,rf)}),Ae&&Ls(I,ue),ne}function Ve(I,C,D,K){if(typeof D=="object"&&D!==null&&D.type===M&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case O:e:{for(var ne=D.key,ie=C;ie!==null;){if(ie.key===ne){if(ne=D.type,ne===M){if(ie.tag===7){n(I,ie.sibling),C=a(ie,D.props.children),C.return=I,I=C;break e}}else if(ie.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Te&&Rc(ne)===ie.type){n(I,ie.sibling),C=a(ie,D.props),C.ref=Zn(I,ie,D),C.return=I,I=C;break e}n(I,ie);break}else t(I,ie);ie=ie.sibling}D.type===M?(C=$s(D.props.children,I.mode,K,D.key),C.return=I,I=C):(K=yl(D.type,D.key,D.props,null,I.mode,K),K.ref=Zn(I,C,D),K.return=I,I=K)}return p(I);case B:e:{for(ie=D.key;C!==null;){if(C.key===ie)if(C.tag===4&&C.stateNode.containerInfo===D.containerInfo&&C.stateNode.implementation===D.implementation){n(I,C.sibling),C=a(C,D.children||[]),C.return=I,I=C;break e}else{n(I,C);break}else t(I,C);C=C.sibling}C=Pi(D,I.mode,K),C.return=I,I=C}return p(I);case Te:return ie=D._init,Ve(I,C,ie(D._payload),K)}if(Pn(D))return te(I,C,D,K);if(ae(D))return se(I,C,D,K);Qr(I,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,C!==null&&C.tag===6?(n(I,C.sibling),C=a(C,D),C.return=I,I=C):(n(I,C),C=Ei(D,I.mode,K),C.return=I,I=C),p(I)):n(I,C)}return Ve}var dn=Tc(!0),Ic=Tc(!1),Gr=ds(null),Yr=null,un=null,Oa=null;function Ma(){Oa=un=Yr=null}function za(e){var t=Gr.current;De(Gr),e._currentValue=t}function Fa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function mn(e,t){Yr=e,Oa=un=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ut=!0),e.firstContext=null)}function kt(e){var t=e._currentValue;if(Oa!==e)if(e={context:e,memoizedValue:t,next:null},un===null){if(Yr===null)throw Error(c(308));un=e,Yr.dependencies={lanes:0,firstContext:e}}else un=un.next=e;return t}var Ds=null;function $a(e){Ds===null?Ds=[e]:Ds.push(e)}function Uc(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,$a(t)):(n.next=a.next,a.next=n),t.interleaved=n,Qt(e,r)}function Qt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ps=!1;function Ba(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Ne&2)!==0){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Qt(e,n)}return a=r.interleaved,a===null?(t.next=t,$a(r)):(t.next=a.next,a.next=t),r.interleaved=t,Qt(e,n)}function Xr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,sa(e,n)}}function Dc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var p={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?a=o=p:o=o.next=p,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Zr(e,t,n,r){var a=e.updateQueue;ps=!1;var o=a.firstBaseUpdate,p=a.lastBaseUpdate,g=a.shared.pending;if(g!==null){a.shared.pending=null;var k=g,_=k.next;k.next=null,p===null?o=_:p.next=_,p=k;var W=e.alternate;W!==null&&(W=W.updateQueue,g=W.lastBaseUpdate,g!==p&&(g===null?W.firstBaseUpdate=_:g.next=_,W.lastBaseUpdate=k))}if(o!==null){var H=a.baseState;p=0,W=_=k=null,g=o;do{var V=g.lane,X=g.eventTime;if((r&V)===V){W!==null&&(W=W.next={eventTime:X,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var te=e,se=g;switch(V=t,X=n,se.tag){case 1:if(te=se.payload,typeof te=="function"){H=te.call(X,H,V);break e}H=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=se.payload,V=typeof te=="function"?te.call(X,H,V):te,V==null)break e;H=$({},H,V);break e;case 2:ps=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,V=a.effects,V===null?a.effects=[g]:V.push(g))}else X={eventTime:X,lane:V,tag:g.tag,payload:g.payload,callback:g.callback,next:null},W===null?(_=W=X,k=H):W=W.next=X,p|=V;if(g=g.next,g===null){if(g=a.shared.pending,g===null)break;V=g,g=V.next,V.next=null,a.lastBaseUpdate=V,a.shared.pending=null}}while(!0);if(W===null&&(k=H),a.baseState=k,a.firstBaseUpdate=_,a.lastBaseUpdate=W,t=a.shared.interleaved,t!==null){a=t;do p|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);Os|=p,e.lanes=p,e.memoizedState=H}}function Ac(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(c(191,a));a.call(r)}}}var er={},Ft=ds(er),tr=ds(er),sr=ds(er);function As(e){if(e===er)throw Error(c(174));return e}function Va(e,t){switch(Ue(sr,t),Ue(tr,e),Ue(Ft,er),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Wl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Wl(t,e)}De(Ft),Ue(Ft,t)}function pn(){De(Ft),De(tr),De(sr)}function _c(e){As(sr.current);var t=As(Ft.current),n=Wl(t,e.type);t!==n&&(Ue(tr,e),Ue(Ft,n))}function Wa(e){tr.current===e&&(De(Ft),De(tr))}var _e=ds(0);function el(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ha=[];function Ka(){for(var e=0;e<Ha.length;e++)Ha[e]._workInProgressVersionPrimary=null;Ha.length=0}var tl=L.ReactCurrentDispatcher,Ja=L.ReactCurrentBatchConfig,_s=0,Oe=null,Je=null,Ye=null,sl=!1,nr=!1,rr=0,Cp=0;function rt(){throw Error(c(321))}function qa(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Tt(e[n],t[n]))return!1;return!0}function Qa(e,t,n,r,a,o){if(_s=o,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,tl.current=e===null||e.memoizedState===null?Tp:Ip,e=n(r,a),nr){o=0;do{if(nr=!1,rr=0,25<=o)throw Error(c(301));o+=1,Ye=Je=null,t.updateQueue=null,tl.current=Up,e=n(r,a)}while(nr)}if(tl.current=ll,t=Je!==null&&Je.next!==null,_s=0,Ye=Je=Oe=null,sl=!1,t)throw Error(c(300));return e}function Ga(){var e=rr!==0;return rr=0,e}function $t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Oe.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function Ct(){if(Je===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var t=Ye===null?Oe.memoizedState:Ye.next;if(t!==null)Ye=t,Je=e;else{if(e===null)throw Error(c(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Ye===null?Oe.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function lr(e,t){return typeof t=="function"?t(e):t}function Ya(e){var t=Ct(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var r=Je,a=r.baseQueue,o=n.pending;if(o!==null){if(a!==null){var p=a.next;a.next=o.next,o.next=p}r.baseQueue=a=o,n.pending=null}if(a!==null){o=a.next,r=r.baseState;var g=p=null,k=null,_=o;do{var W=_.lane;if((_s&W)===W)k!==null&&(k=k.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),r=_.hasEagerState?_.eagerState:e(r,_.action);else{var H={lane:W,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};k===null?(g=k=H,p=r):k=k.next=H,Oe.lanes|=W,Os|=W}_=_.next}while(_!==null&&_!==o);k===null?p=r:k.next=g,Tt(r,t.memoizedState)||(ut=!0),t.memoizedState=r,t.baseState=p,t.baseQueue=k,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do o=a.lane,Oe.lanes|=o,Os|=o,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Xa(e){var t=Ct(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var p=a=a.next;do o=e(o,p.action),p=p.next;while(p!==a);Tt(o,t.memoizedState)||(ut=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Oc(){}function Mc(e,t){var n=Oe,r=Ct(),a=t(),o=!Tt(r.memoizedState,a);if(o&&(r.memoizedState=a,ut=!0),r=r.queue,Za($c.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,ar(9,Fc.bind(null,n,r,a,t),void 0,null),Xe===null)throw Error(c(349));(_s&30)!==0||zc(n,t,a)}return a}function zc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Fc(e,t,n,r){t.value=n,t.getSnapshot=r,Bc(t)&&Vc(e)}function $c(e,t,n){return n(function(){Bc(t)&&Vc(e)})}function Bc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Tt(e,n)}catch{return!0}}function Vc(e){var t=Qt(e,1);t!==null&&At(t,e,1,-1)}function Wc(e){var t=$t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:e},t.queue=e,e=e.dispatch=Rp.bind(null,Oe,e),[t.memoizedState,e]}function ar(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Hc(){return Ct().memoizedState}function nl(e,t,n,r){var a=$t();Oe.flags|=e,a.memoizedState=ar(1|t,n,void 0,r===void 0?null:r)}function rl(e,t,n,r){var a=Ct();r=r===void 0?null:r;var o=void 0;if(Je!==null){var p=Je.memoizedState;if(o=p.destroy,r!==null&&qa(r,p.deps)){a.memoizedState=ar(t,n,o,r);return}}Oe.flags|=e,a.memoizedState=ar(1|t,n,o,r)}function Kc(e,t){return nl(8390656,8,e,t)}function Za(e,t){return rl(2048,8,e,t)}function Jc(e,t){return rl(4,2,e,t)}function qc(e,t){return rl(4,4,e,t)}function Qc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gc(e,t,n){return n=n!=null?n.concat([e]):null,rl(4,4,Qc.bind(null,t,e),n)}function ei(){}function Yc(e,t){var n=Ct();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xc(e,t){var n=Ct();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zc(e,t,n){return(_s&21)===0?(e.baseState&&(e.baseState=!1,ut=!0),e.memoizedState=n):(Tt(n,t)||(n=Ro(),Oe.lanes|=n,Os|=n,e.baseState=!0),t)}function Ep(e,t){var n=Ie;Ie=n!==0&&4>n?n:4,e(!0);var r=Ja.transition;Ja.transition={};try{e(!1),t()}finally{Ie=n,Ja.transition=r}}function ed(){return Ct().memoizedState}function Pp(e,t,n){var r=vs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},td(e))sd(t,n);else if(n=Uc(e,t,n,r),n!==null){var a=ot();At(n,e,r,a),nd(n,t,r)}}function Rp(e,t,n){var r=vs(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(td(e))sd(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var p=t.lastRenderedState,g=o(p,n);if(a.hasEagerState=!0,a.eagerState=g,Tt(g,p)){var k=t.interleaved;k===null?(a.next=a,$a(t)):(a.next=k.next,k.next=a),t.interleaved=a;return}}catch{}n=Uc(e,t,a,r),n!==null&&(a=ot(),At(n,e,r,a),nd(n,t,r))}}function td(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function sd(e,t){nr=sl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function nd(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,sa(e,n)}}var ll={readContext:kt,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},Tp={readContext:kt,useCallback:function(e,t){return $t().memoizedState=[e,t===void 0?null:t],e},useContext:kt,useEffect:Kc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,nl(4194308,4,Qc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return nl(4194308,4,e,t)},useInsertionEffect:function(e,t){return nl(4,2,e,t)},useMemo:function(e,t){var n=$t();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$t();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Pp.bind(null,Oe,e),[r.memoizedState,e]},useRef:function(e){var t=$t();return e={current:e},t.memoizedState=e},useState:Wc,useDebugValue:ei,useDeferredValue:function(e){return $t().memoizedState=e},useTransition:function(){var e=Wc(!1),t=e[0];return e=Ep.bind(null,e[1]),$t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Oe,a=$t();if(Ae){if(n===void 0)throw Error(c(407));n=n()}else{if(n=t(),Xe===null)throw Error(c(349));(_s&30)!==0||zc(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Kc($c.bind(null,r,o,e),[e]),r.flags|=2048,ar(9,Fc.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=$t(),t=Xe.identifierPrefix;if(Ae){var n=qt,r=Jt;n=(r&~(1<<32-Rt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=rr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Cp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ip={readContext:kt,useCallback:Yc,useContext:kt,useEffect:Za,useImperativeHandle:Gc,useInsertionEffect:Jc,useLayoutEffect:qc,useMemo:Xc,useReducer:Ya,useRef:Hc,useState:function(){return Ya(lr)},useDebugValue:ei,useDeferredValue:function(e){var t=Ct();return Zc(t,Je.memoizedState,e)},useTransition:function(){var e=Ya(lr)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:Oc,useSyncExternalStore:Mc,useId:ed,unstable_isNewReconciler:!1},Up={readContext:kt,useCallback:Yc,useContext:kt,useEffect:Za,useImperativeHandle:Gc,useInsertionEffect:Jc,useLayoutEffect:qc,useMemo:Xc,useReducer:Xa,useRef:Hc,useState:function(){return Xa(lr)},useDebugValue:ei,useDeferredValue:function(e){var t=Ct();return Je===null?t.memoizedState=e:Zc(t,Je.memoizedState,e)},useTransition:function(){var e=Xa(lr)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:Oc,useSyncExternalStore:Mc,useId:ed,unstable_isNewReconciler:!1};function Ut(e,t){if(e&&e.defaultProps){t=$({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ti(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:$({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var al={isMounted:function(e){return(e=e._reactInternals)?Rs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ot(),a=vs(e),o=Gt(r,a);o.payload=t,n!=null&&(o.callback=n),t=fs(e,o,a),t!==null&&(At(t,e,a,r),Xr(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ot(),a=vs(e),o=Gt(r,a);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=fs(e,o,a),t!==null&&(At(t,e,a,r),Xr(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ot(),r=vs(e),a=Gt(n,r);a.tag=2,t!=null&&(a.callback=t),t=fs(e,a,r),t!==null&&(At(t,e,r,n),Xr(t,e,r))}};function rd(e,t,n,r,a,o,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,p):t.prototype&&t.prototype.isPureReactComponent?!Kn(n,r)||!Kn(a,o):!0}function ld(e,t,n){var r=!1,a=us,o=t.contextType;return typeof o=="object"&&o!==null?o=kt(o):(a=dt(t)?Is:nt.current,r=t.contextTypes,o=(r=r!=null)?ln(e,a):us),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=al,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function ad(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&al.enqueueReplaceState(t,t.state,null)}function si(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Ba(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=kt(o):(o=dt(t)?Is:nt.current,a.context=ln(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(ti(e,t,o,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&al.enqueueReplaceState(a,a.state,null),Zr(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function fn(e,t){try{var n="",r=t;do n+=be(r),r=r.return;while(r);var a=n}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function ni(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ri(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Lp=typeof WeakMap=="function"?WeakMap:Map;function id(e,t,n){n=Gt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){pl||(pl=!0,yi=r),ri(e,t)},n}function od(e,t,n){n=Gt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ri(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ri(e,t),typeof r!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),n}function cd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Lp;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Jp.bind(null,e,t,n),t.then(e,e))}function dd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ud(e,t,n,r,a){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Gt(-1,1),t.tag=2,fs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var Dp=L.ReactCurrentOwner,ut=!1;function it(e,t,n,r){t.child=e===null?Ic(t,null,n,r):dn(t,e.child,n,r)}function md(e,t,n,r,a){n=n.render;var o=t.ref;return mn(t,a),r=Qa(e,t,n,r,o,a),n=Ga(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Yt(e,t,a)):(Ae&&n&&Ua(t),t.flags|=1,it(e,t,r,a),t.child)}function pd(e,t,n,r,a){if(e===null){var o=n.type;return typeof o=="function"&&!Ci(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,fd(e,t,o,r,a)):(e=yl(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,(e.lanes&a)===0){var p=o.memoizedProps;if(n=n.compare,n=n!==null?n:Kn,n(p,r)&&e.ref===t.ref)return Yt(e,t,a)}return t.flags|=1,e=js(o,r),e.ref=t.ref,e.return=t,t.child=e}function fd(e,t,n,r,a){if(e!==null){var o=e.memoizedProps;if(Kn(o,r)&&e.ref===t.ref)if(ut=!1,t.pendingProps=r=o,(e.lanes&a)!==0)(e.flags&131072)!==0&&(ut=!0);else return t.lanes=e.lanes,Yt(e,t,a)}return li(e,t,n,r,a)}function hd(e,t,n){var r=t.pendingProps,a=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(xn,jt),jt|=n;else{if((n&1073741824)===0)return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ue(xn,jt),jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ue(xn,jt),jt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ue(xn,jt),jt|=r;return it(e,t,a,n),t.child}function xd(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function li(e,t,n,r,a){var o=dt(n)?Is:nt.current;return o=ln(t,o),mn(t,a),n=Qa(e,t,n,r,o,a),r=Ga(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Yt(e,t,a)):(Ae&&r&&Ua(t),t.flags|=1,it(e,t,n,a),t.child)}function gd(e,t,n,r,a){if(dt(n)){var o=!0;Wr(t)}else o=!1;if(mn(t,a),t.stateNode===null)ol(e,t),ld(t,n,r),si(t,n,r,a),r=!0;else if(e===null){var p=t.stateNode,g=t.memoizedProps;p.props=g;var k=p.context,_=n.contextType;typeof _=="object"&&_!==null?_=kt(_):(_=dt(n)?Is:nt.current,_=ln(t,_));var W=n.getDerivedStateFromProps,H=typeof W=="function"||typeof p.getSnapshotBeforeUpdate=="function";H||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(g!==r||k!==_)&&ad(t,p,r,_),ps=!1;var V=t.memoizedState;p.state=V,Zr(t,r,p,a),k=t.memoizedState,g!==r||V!==k||ct.current||ps?(typeof W=="function"&&(ti(t,n,W,r),k=t.memoizedState),(g=ps||rd(t,n,g,r,V,k,_))?(H||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=k),p.props=r,p.state=k,p.context=_,r=g):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{p=t.stateNode,Lc(e,t),g=t.memoizedProps,_=t.type===t.elementType?g:Ut(t.type,g),p.props=_,H=t.pendingProps,V=p.context,k=n.contextType,typeof k=="object"&&k!==null?k=kt(k):(k=dt(n)?Is:nt.current,k=ln(t,k));var X=n.getDerivedStateFromProps;(W=typeof X=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(g!==H||V!==k)&&ad(t,p,r,k),ps=!1,V=t.memoizedState,p.state=V,Zr(t,r,p,a);var te=t.memoizedState;g!==H||V!==te||ct.current||ps?(typeof X=="function"&&(ti(t,n,X,r),te=t.memoizedState),(_=ps||rd(t,n,_,r,V,te,k)||!1)?(W||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(r,te,k),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(r,te,k)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||g===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=te),p.props=r,p.state=te,p.context=k,r=_):(typeof p.componentDidUpdate!="function"||g===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),r=!1)}return ai(e,t,n,r,o,a)}function ai(e,t,n,r,a,o){xd(e,t);var p=(t.flags&128)!==0;if(!r&&!p)return a&&Nc(t,n,!1),Yt(e,t,o);r=t.stateNode,Dp.current=t;var g=p&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&p?(t.child=dn(t,e.child,null,o),t.child=dn(t,null,g,o)):it(e,t,g,o),t.memoizedState=r.state,a&&Nc(t,n,!0),t.child}function vd(e){var t=e.stateNode;t.pendingContext?jc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&jc(e,t.context,!1),Va(e,t.containerInfo)}function yd(e,t,n,r,a){return cn(),_a(a),t.flags|=256,it(e,t,n,r),t.child}var ii={dehydrated:null,treeContext:null,retryLane:0};function oi(e){return{baseLanes:e,cachePool:null,transitions:null}}function jd(e,t,n){var r=t.pendingProps,a=_e.current,o=!1,p=(t.flags&128)!==0,g;if((g=p)||(g=e!==null&&e.memoizedState===null?!1:(a&2)!==0),g?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ue(_e,a&1),e===null)return Aa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(p=r.children,e=r.fallback,o?(r=t.mode,o=t.child,p={mode:"hidden",children:p},(r&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=p):o=jl(p,r,0,null),e=$s(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=oi(n),t.memoizedState=ii,e):ci(t,p));if(a=e.memoizedState,a!==null&&(g=a.dehydrated,g!==null))return Ap(e,t,p,r,g,a,n);if(o){o=r.fallback,p=t.mode,a=e.child,g=a.sibling;var k={mode:"hidden",children:r.children};return(p&1)===0&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=k,t.deletions=null):(r=js(a,k),r.subtreeFlags=a.subtreeFlags&14680064),g!==null?o=js(g,o):(o=$s(o,p,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,p=e.child.memoizedState,p=p===null?oi(n):{baseLanes:p.baseLanes|n,cachePool:null,transitions:p.transitions},o.memoizedState=p,o.childLanes=e.childLanes&~n,t.memoizedState=ii,r}return o=e.child,e=o.sibling,r=js(o,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ci(e,t){return t=jl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function il(e,t,n,r){return r!==null&&_a(r),dn(t,e.child,null,n),e=ci(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ap(e,t,n,r,a,o,p){if(n)return t.flags&256?(t.flags&=-257,r=ni(Error(c(422))),il(e,t,p,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=jl({mode:"visible",children:r.children},a,0,null),o=$s(o,a,p,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,(t.mode&1)!==0&&dn(t,e.child,null,p),t.child.memoizedState=oi(p),t.memoizedState=ii,o);if((t.mode&1)===0)return il(e,t,p,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var g=r.dgst;return r=g,o=Error(c(419)),r=ni(o,r,void 0),il(e,t,p,r)}if(g=(p&e.childLanes)!==0,ut||g){if(r=Xe,r!==null){switch(p&-p){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=(a&(r.suspendedLanes|p))!==0?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,Qt(e,a),At(r,e,a,-1))}return ki(),r=ni(Error(c(421))),il(e,t,p,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=qp.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,yt=cs(a.nextSibling),vt=t,Ae=!0,It=null,e!==null&&(wt[St++]=Jt,wt[St++]=qt,wt[St++]=Us,Jt=e.id,qt=e.overflow,Us=t),t=ci(t,r.children),t.flags|=4096,t)}function bd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Fa(e.return,t,n)}function di(e,t,n,r,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function Nd(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(it(e,t,r.children,n),r=_e.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bd(e,n,t);else if(e.tag===19)bd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ue(_e,r),(t.mode&1)===0)t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&el(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),di(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&el(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}di(t,!0,n,null,o);break;case"together":di(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ol(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Os|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,n=js(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=js(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _p(e,t,n){switch(t.tag){case 3:vd(t),cn();break;case 5:_c(t);break;case 1:dt(t.type)&&Wr(t);break;case 4:Va(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ue(Gr,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ue(_e,_e.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?jd(e,t,n):(Ue(_e,_e.current&1),e=Yt(e,t,n),e!==null?e.sibling:null);Ue(_e,_e.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Nd(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ue(_e,_e.current),r)break;return null;case 22:case 23:return t.lanes=0,hd(e,t,n)}return Yt(e,t,n)}var wd,ui,Sd,kd;wd=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ui=function(){},Sd=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,As(Ft.current);var o=null;switch(n){case"input":a=Cn(e,a),r=Cn(e,r),o=[];break;case"select":a=$({},a,{value:void 0}),r=$({},r,{value:void 0}),o=[];break;case"textarea":a=Vl(e,a),r=Vl(e,r),o=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=$r)}Hl(n,r);var p;n=null;for(_ in a)if(!r.hasOwnProperty(_)&&a.hasOwnProperty(_)&&a[_]!=null)if(_==="style"){var g=a[_];for(p in g)g.hasOwnProperty(p)&&(n||(n={}),n[p]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(m.hasOwnProperty(_)?o||(o=[]):(o=o||[]).push(_,null));for(_ in r){var k=r[_];if(g=a?.[_],r.hasOwnProperty(_)&&k!==g&&(k!=null||g!=null))if(_==="style")if(g){for(p in g)!g.hasOwnProperty(p)||k&&k.hasOwnProperty(p)||(n||(n={}),n[p]="");for(p in k)k.hasOwnProperty(p)&&g[p]!==k[p]&&(n||(n={}),n[p]=k[p])}else n||(o||(o=[]),o.push(_,n)),n=k;else _==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,g=g?g.__html:void 0,k!=null&&g!==k&&(o=o||[]).push(_,k)):_==="children"?typeof k!="string"&&typeof k!="number"||(o=o||[]).push(_,""+k):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(m.hasOwnProperty(_)?(k!=null&&_==="onScroll"&&Le("scroll",e),o||g===k||(o=[])):(o=o||[]).push(_,k))}n&&(o=o||[]).push("style",n);var _=o;(t.updateQueue=_)&&(t.flags|=4)}},kd=function(e,t,n,r){n!==r&&(t.flags|=4)};function ir(e,t){if(!Ae)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Op(e,t,n){var r=t.pendingProps;switch(La(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(t),null;case 1:return dt(t.type)&&Vr(),lt(t),null;case 3:return r=t.stateNode,pn(),De(ct),De(nt),Ka(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(qr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,It!==null&&(Ni(It),It=null))),ui(e,t),lt(t),null;case 5:Wa(t);var a=As(sr.current);if(n=t.type,e!==null&&t.stateNode!=null)Sd(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(c(166));return lt(t),null}if(e=As(Ft.current),qr(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[zt]=t,r[Yn]=o,e=(t.mode&1)!==0,n){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(a=0;a<qn.length;a++)Le(qn[a],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":vr(r,o),Le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Le("invalid",r);break;case"textarea":io(r,o),Le("invalid",r)}Hl(n,o),a=null;for(var p in o)if(o.hasOwnProperty(p)){var g=o[p];p==="children"?typeof g=="string"?r.textContent!==g&&(o.suppressHydrationWarning!==!0&&Fr(r.textContent,g,e),a=["children",g]):typeof g=="number"&&r.textContent!==""+g&&(o.suppressHydrationWarning!==!0&&Fr(r.textContent,g,e),a=["children",""+g]):m.hasOwnProperty(p)&&g!=null&&p==="onScroll"&&Le("scroll",r)}switch(n){case"input":Wt(r),ze(r,o,!0);break;case"textarea":Wt(r),co(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=$r)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{p=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=uo(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=p.createElement(n,{is:r.is}):(e=p.createElement(n),n==="select"&&(p=e,r.multiple?p.multiple=!0:r.size&&(p.size=r.size))):e=p.createElementNS(e,n),e[zt]=t,e[Yn]=r,wd(e,t,!1,!1),t.stateNode=e;e:{switch(p=Kl(n,r),n){case"dialog":Le("cancel",e),Le("close",e),a=r;break;case"iframe":case"object":case"embed":Le("load",e),a=r;break;case"video":case"audio":for(a=0;a<qn.length;a++)Le(qn[a],e);a=r;break;case"source":Le("error",e),a=r;break;case"img":case"image":case"link":Le("error",e),Le("load",e),a=r;break;case"details":Le("toggle",e),a=r;break;case"input":vr(e,r),a=Cn(e,r),Le("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=$({},r,{value:void 0}),Le("invalid",e);break;case"textarea":io(e,r),a=Vl(e,r),Le("invalid",e);break;default:a=r}Hl(n,a),g=a;for(o in g)if(g.hasOwnProperty(o)){var k=g[o];o==="style"?fo(e,k):o==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&mo(e,k)):o==="children"?typeof k=="string"?(n!=="textarea"||k!=="")&&Rn(e,k):typeof k=="number"&&Rn(e,""+k):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(m.hasOwnProperty(o)?k!=null&&o==="onScroll"&&Le("scroll",e):k!=null&&R(e,o,k,p))}switch(n){case"input":Wt(e),ze(e,r,!1);break;case"textarea":Wt(e),co(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Js(e,!!r.multiple,o,!1):r.defaultValue!=null&&Js(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lt(t),null;case 6:if(e&&t.stateNode!=null)kd(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(c(166));if(n=As(sr.current),As(Ft.current),qr(t)){if(r=t.stateNode,n=t.memoizedProps,r[zt]=t,(o=r.nodeValue!==n)&&(e=vt,e!==null))switch(e.tag){case 3:Fr(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fr(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zt]=t,t.stateNode=r}return lt(t),null;case 13:if(De(_e),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ae&&yt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Pc(),cn(),t.flags|=98560,o=!1;else if(o=qr(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(c(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(c(317));o[zt]=t}else cn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;lt(t),o=!1}else It!==null&&(Ni(It),It=null),o=!0;if(!o)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(_e.current&1)!==0?qe===0&&(qe=3):ki())),t.updateQueue!==null&&(t.flags|=4),lt(t),null);case 4:return pn(),ui(e,t),e===null&&Qn(t.stateNode.containerInfo),lt(t),null;case 10:return za(t.type._context),lt(t),null;case 17:return dt(t.type)&&Vr(),lt(t),null;case 19:if(De(_e),o=t.memoizedState,o===null)return lt(t),null;if(r=(t.flags&128)!==0,p=o.rendering,p===null)if(r)ir(o,!1);else{if(qe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(p=el(e),p!==null){for(t.flags|=128,ir(o,!1),r=p.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,p=o.alternate,p===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,e=p.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ue(_e,_e.current&1|2),t.child}e=e.sibling}o.tail!==null&&Be()>gn&&(t.flags|=128,r=!0,ir(o,!1),t.lanes=4194304)}else{if(!r)if(e=el(p),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ir(o,!0),o.tail===null&&o.tailMode==="hidden"&&!p.alternate&&!Ae)return lt(t),null}else 2*Be()-o.renderingStartTime>gn&&n!==1073741824&&(t.flags|=128,r=!0,ir(o,!1),t.lanes=4194304);o.isBackwards?(p.sibling=t.child,t.child=p):(n=o.last,n!==null?n.sibling=p:t.child=p,o.last=p)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Be(),t.sibling=null,n=_e.current,Ue(_e,r?n&1|2:n&1),t):(lt(t),null);case 22:case 23:return Si(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(jt&1073741824)!==0&&(lt(t),t.subtreeFlags&6&&(t.flags|=8192)):lt(t),null;case 24:return null;case 25:return null}throw Error(c(156,t.tag))}function Mp(e,t){switch(La(t),t.tag){case 1:return dt(t.type)&&Vr(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pn(),De(ct),De(nt),Ka(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Wa(t),null;case 13:if(De(_e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));cn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return De(_e),null;case 4:return pn(),null;case 10:return za(t.type._context),null;case 22:case 23:return Si(),null;case 24:return null;default:return null}}var cl=!1,at=!1,zp=typeof WeakSet=="function"?WeakSet:Set,ee=null;function hn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(e,t,r)}else n.current=null}function mi(e,t,n){try{n()}catch(r){Fe(e,t,r)}}var Cd=!1;function Fp(e,t){if(Sa=Rr,e=rc(),xa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var p=0,g=-1,k=-1,_=0,W=0,H=e,V=null;t:for(;;){for(var X;H!==n||a!==0&&H.nodeType!==3||(g=p+a),H!==o||r!==0&&H.nodeType!==3||(k=p+r),H.nodeType===3&&(p+=H.nodeValue.length),(X=H.firstChild)!==null;)V=H,H=X;for(;;){if(H===e)break t;if(V===n&&++_===a&&(g=p),V===o&&++W===r&&(k=p),(X=H.nextSibling)!==null)break;H=V,V=H.parentNode}H=X}n=g===-1||k===-1?null:{start:g,end:k}}else n=null}n=n||{start:0,end:0}}else n=null;for(ka={focusedElem:e,selectionRange:n},Rr=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){t=ee;try{var te=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var se=te.memoizedProps,Ve=te.memoizedState,I=t.stateNode,C=I.getSnapshotBeforeUpdate(t.elementType===t.type?se:Ut(t.type,se),Ve);I.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var D=t.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(K){Fe(t,t.return,K)}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}return te=Cd,Cd=!1,te}function or(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&mi(t,n,o)}a=a.next}while(a!==r)}}function dl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function pi(e){var t=e.ref;if(t!==null){var n=e.stateNode;e.tag,e=n,typeof t=="function"?t(e):t.current=e}}function Ed(e){var t=e.alternate;t!==null&&(e.alternate=null,Ed(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[zt],delete t[Yn],delete t[Ra],delete t[Np],delete t[wp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Pd(e){return e.tag===5||e.tag===3||e.tag===4}function Rd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Pd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=$r));else if(r!==4&&(e=e.child,e!==null))for(fi(e,t,n),e=e.sibling;e!==null;)fi(e,t,n),e=e.sibling}function hi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(hi(e,t,n),e=e.sibling;e!==null;)hi(e,t,n),e=e.sibling}var tt=null,Lt=!1;function hs(e,t,n){for(n=n.child;n!==null;)Td(e,t,n),n=n.sibling}function Td(e,t,n){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(wr,n)}catch{}switch(n.tag){case 5:at||hn(n,t);case 6:var r=tt,a=Lt;tt=null,hs(e,t,n),tt=r,Lt=a,tt!==null&&(Lt?(e=tt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(Lt?(e=tt,n=n.stateNode,e.nodeType===8?Pa(e.parentNode,n):e.nodeType===1&&Pa(e,n),Fn(e)):Pa(tt,n.stateNode));break;case 4:r=tt,a=Lt,tt=n.stateNode.containerInfo,Lt=!0,hs(e,t,n),tt=r,Lt=a;break;case 0:case 11:case 14:case 15:if(!at&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var o=a,p=o.destroy;o=o.tag,p!==void 0&&((o&2)!==0||(o&4)!==0)&&mi(n,t,p),a=a.next}while(a!==r)}hs(e,t,n);break;case 1:if(!at&&(hn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(g){Fe(n,t,g)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:n.mode&1?(at=(r=at)||n.memoizedState!==null,hs(e,t,n),at=r):hs(e,t,n);break;default:hs(e,t,n)}}function Id(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new zp),t.forEach(function(r){var a=Qp.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Dt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,p=t,g=p;e:for(;g!==null;){switch(g.tag){case 5:tt=g.stateNode,Lt=!1;break e;case 3:tt=g.stateNode.containerInfo,Lt=!0;break e;case 4:tt=g.stateNode.containerInfo,Lt=!0;break e}g=g.return}if(tt===null)throw Error(c(160));Td(o,p,a),tt=null,Lt=!1;var k=a.alternate;k!==null&&(k.return=null),a.return=null}catch(_){Fe(a,t,_)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ud(t,e),t=t.sibling}function Ud(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Dt(t,e),Bt(e),r&4){try{or(3,e,e.return),dl(3,e)}catch(se){Fe(e,e.return,se)}try{or(5,e,e.return)}catch(se){Fe(e,e.return,se)}}break;case 1:Dt(t,e),Bt(e),r&512&&n!==null&&hn(n,n.return);break;case 5:if(Dt(t,e),Bt(e),r&512&&n!==null&&hn(n,n.return),e.flags&32){var a=e.stateNode;try{Rn(a,"")}catch(se){Fe(e,e.return,se)}}if(r&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,p=n!==null?n.memoizedProps:o,g=e.type,k=e.updateQueue;if(e.updateQueue=null,k!==null)try{g==="input"&&o.type==="radio"&&o.name!=null&&me(a,o),Kl(g,p);var _=Kl(g,o);for(p=0;p<k.length;p+=2){var W=k[p],H=k[p+1];W==="style"?fo(a,H):W==="dangerouslySetInnerHTML"?mo(a,H):W==="children"?Rn(a,H):R(a,W,H,_)}switch(g){case"input":we(a,o);break;case"textarea":oo(a,o);break;case"select":var V=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var X=o.value;X!=null?Js(a,!!o.multiple,X,!1):V!==!!o.multiple&&(o.defaultValue!=null?Js(a,!!o.multiple,o.defaultValue,!0):Js(a,!!o.multiple,o.multiple?[]:"",!1))}a[Yn]=o}catch(se){Fe(e,e.return,se)}}break;case 6:if(Dt(t,e),Bt(e),r&4){if(e.stateNode===null)throw Error(c(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(se){Fe(e,e.return,se)}}break;case 3:if(Dt(t,e),Bt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fn(t.containerInfo)}catch(se){Fe(e,e.return,se)}break;case 4:Dt(t,e),Bt(e);break;case 13:Dt(t,e),Bt(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(vi=Be())),r&4&&Id(e);break;case 22:if(W=n!==null&&n.memoizedState!==null,e.mode&1?(at=(_=at)||W,Dt(t,e),at=_):Dt(t,e),Bt(e),r&8192){if(_=e.memoizedState!==null,(e.stateNode.isHidden=_)&&!W&&(e.mode&1)!==0)for(ee=e,W=e.child;W!==null;){for(H=ee=W;ee!==null;){switch(V=ee,X=V.child,V.tag){case 0:case 11:case 14:case 15:or(4,V,V.return);break;case 1:hn(V,V.return);var te=V.stateNode;if(typeof te.componentWillUnmount=="function"){r=V,n=V.return;try{t=r,te.props=t.memoizedProps,te.state=t.memoizedState,te.componentWillUnmount()}catch(se){Fe(r,n,se)}}break;case 5:hn(V,V.return);break;case 22:if(V.memoizedState!==null){Ad(H);continue}}X!==null?(X.return=V,ee=X):Ad(H)}W=W.sibling}e:for(W=null,H=e;;){if(H.tag===5){if(W===null){W=H;try{a=H.stateNode,_?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(g=H.stateNode,k=H.memoizedProps.style,p=k!=null&&k.hasOwnProperty("display")?k.display:null,g.style.display=po("display",p))}catch(se){Fe(e,e.return,se)}}}else if(H.tag===6){if(W===null)try{H.stateNode.nodeValue=_?"":H.memoizedProps}catch(se){Fe(e,e.return,se)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===e)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===e)break e;for(;H.sibling===null;){if(H.return===null||H.return===e)break e;W===H&&(W=null),H=H.return}W===H&&(W=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:Dt(t,e),Bt(e),r&4&&Id(e);break;case 21:break;default:Dt(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Pd(n)){var r=n;break e}n=n.return}throw Error(c(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Rn(a,""),r.flags&=-33);var o=Rd(e);hi(e,o,a);break;case 3:case 4:var p=r.stateNode.containerInfo,g=Rd(e);fi(e,g,p);break;default:throw Error(c(161))}}catch(k){Fe(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $p(e,t,n){ee=e,Ld(e)}function Ld(e,t,n){for(var r=(e.mode&1)!==0;ee!==null;){var a=ee,o=a.child;if(a.tag===22&&r){var p=a.memoizedState!==null||cl;if(!p){var g=a.alternate,k=g!==null&&g.memoizedState!==null||at;g=cl;var _=at;if(cl=p,(at=k)&&!_)for(ee=a;ee!==null;)p=ee,k=p.child,p.tag===22&&p.memoizedState!==null?_d(a):k!==null?(k.return=p,ee=k):_d(a);for(;o!==null;)ee=o,Ld(o),o=o.sibling;ee=a,cl=g,at=_}Dd(e)}else(a.subtreeFlags&8772)!==0&&o!==null?(o.return=a,ee=o):Dd(e)}}function Dd(e){for(;ee!==null;){var t=ee;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:at||dl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!at)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ut(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Ac(t,o,r);break;case 3:var p=t.updateQueue;if(p!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ac(t,p,n)}break;case 5:var g=t.stateNode;if(n===null&&t.flags&4){n=g;var k=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&n.focus();break;case"img":k.src&&(n.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var _=t.alternate;if(_!==null){var W=_.memoizedState;if(W!==null){var H=W.dehydrated;H!==null&&Fn(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}at||t.flags&512&&pi(t)}catch(V){Fe(t,t.return,V)}}if(t===e){ee=null;break}if(n=t.sibling,n!==null){n.return=t.return,ee=n;break}ee=t.return}}function Ad(e){for(;ee!==null;){var t=ee;if(t===e){ee=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ee=n;break}ee=t.return}}function _d(e){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{dl(4,t)}catch(k){Fe(t,n,k)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(k){Fe(t,a,k)}}var o=t.return;try{pi(t)}catch(k){Fe(t,o,k)}break;case 5:var p=t.return;try{pi(t)}catch(k){Fe(t,p,k)}}}catch(k){Fe(t,t.return,k)}if(t===e){ee=null;break}var g=t.sibling;if(g!==null){g.return=t.return,ee=g;break}ee=t.return}}var Bp=Math.ceil,ul=L.ReactCurrentDispatcher,xi=L.ReactCurrentOwner,Et=L.ReactCurrentBatchConfig,Ne=0,Xe=null,He=null,st=0,jt=0,xn=ds(0),qe=0,cr=null,Os=0,ml=0,gi=0,dr=null,mt=null,vi=0,gn=1/0,Xt=null,pl=!1,yi=null,xs=null,fl=!1,gs=null,hl=0,ur=0,ji=null,xl=-1,gl=0;function ot(){return(Ne&6)!==0?Be():xl!==-1?xl:xl=Be()}function vs(e){return(e.mode&1)===0?1:(Ne&2)!==0&&st!==0?st&-st:kp.transition!==null?(gl===0&&(gl=Ro()),gl):(e=Ie,e!==0||(e=window.event,e=e===void 0?16:Mo(e.type)),e)}function At(e,t,n,r){if(50<ur)throw ur=0,ji=null,Error(c(185));An(e,n,r),((Ne&2)===0||e!==Xe)&&(e===Xe&&((Ne&2)===0&&(ml|=n),qe===4&&ys(e,st)),pt(e,r),n===1&&Ne===0&&(t.mode&1)===0&&(gn=Be()+500,Hr&&ms()))}function pt(e,t){var n=e.callbackNode;km(e,t);var r=Cr(e,e===Xe?st:0);if(r===0)n!==null&&Co(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Co(n),t===1)e.tag===0?Sp(Md.bind(null,e)):wc(Md.bind(null,e)),jp(function(){(Ne&6)===0&&ms()}),n=null;else{switch(To(r)){case 1:n=Zl;break;case 4:n=Eo;break;case 16:n=Nr;break;case 536870912:n=Po;break;default:n=Nr}n=Kd(n,Od.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Od(e,t){if(xl=-1,gl=0,(Ne&6)!==0)throw Error(c(327));var n=e.callbackNode;if(vn()&&e.callbackNode!==n)return null;var r=Cr(e,e===Xe?st:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=vl(e,r);else{t=r;var a=Ne;Ne|=2;var o=Fd();(Xe!==e||st!==t)&&(Xt=null,gn=Be()+500,zs(e,t));do try{Hp();break}catch(g){zd(e,g)}while(!0);Ma(),ul.current=o,Ne=a,He!==null?t=0:(Xe=null,st=0,t=qe)}if(t!==0){if(t===2&&(a=ea(e),a!==0&&(r=a,t=bi(e,a))),t===1)throw n=cr,zs(e,0),ys(e,r),pt(e,Be()),n;if(t===6)ys(e,r);else{if(a=e.current.alternate,(r&30)===0&&!Vp(a)&&(t=vl(e,r),t===2&&(o=ea(e),o!==0&&(r=o,t=bi(e,o))),t===1))throw n=cr,zs(e,0),ys(e,r),pt(e,Be()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(c(345));case 2:Fs(e,mt,Xt);break;case 3:if(ys(e,r),(r&130023424)===r&&(t=vi+500-Be(),10<t)){if(Cr(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){ot(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ea(Fs.bind(null,e,mt,Xt),t);break}Fs(e,mt,Xt);break;case 4:if(ys(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var p=31-Rt(r);o=1<<p,p=t[p],p>a&&(a=p),r&=~o}if(r=a,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Bp(r/1960))-r,10<r){e.timeoutHandle=Ea(Fs.bind(null,e,mt,Xt),r);break}Fs(e,mt,Xt);break;case 5:Fs(e,mt,Xt);break;default:throw Error(c(329))}}}return pt(e,Be()),e.callbackNode===n?Od.bind(null,e):null}function bi(e,t){var n=dr;return e.current.memoizedState.isDehydrated&&(zs(e,t).flags|=256),e=vl(e,t),e!==2&&(t=mt,mt=n,t!==null&&Ni(t)),e}function Ni(e){mt===null?mt=e:mt.push.apply(mt,e)}function Vp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!Tt(o(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ys(e,t){for(t&=~gi,t&=~ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Rt(t),r=1<<n;e[n]=-1,t&=~r}}function Md(e){if((Ne&6)!==0)throw Error(c(327));vn();var t=Cr(e,0);if((t&1)===0)return pt(e,Be()),null;var n=vl(e,t);if(e.tag!==0&&n===2){var r=ea(e);r!==0&&(t=r,n=bi(e,r))}if(n===1)throw n=cr,zs(e,0),ys(e,t),pt(e,Be()),n;if(n===6)throw Error(c(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fs(e,mt,Xt),pt(e,Be()),null}function wi(e,t){var n=Ne;Ne|=1;try{return e(t)}finally{Ne=n,Ne===0&&(gn=Be()+500,Hr&&ms())}}function Ms(e){gs!==null&&gs.tag===0&&(Ne&6)===0&&vn();var t=Ne;Ne|=1;var n=Et.transition,r=Ie;try{if(Et.transition=null,Ie=1,e)return e()}finally{Ie=r,Et.transition=n,Ne=t,(Ne&6)===0&&ms()}}function Si(){jt=xn.current,De(xn)}function zs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,yp(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(La(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vr();break;case 3:pn(),De(ct),De(nt),Ka();break;case 5:Wa(r);break;case 4:pn();break;case 13:De(_e);break;case 19:De(_e);break;case 10:za(r.type._context);break;case 22:case 23:Si()}n=n.return}if(Xe=e,He=e=js(e.current,null),st=jt=t,qe=0,cr=null,gi=ml=Os=0,mt=dr=null,Ds!==null){for(t=0;t<Ds.length;t++)if(n=Ds[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,o=n.pending;if(o!==null){var p=o.next;o.next=a,r.next=p}n.pending=r}Ds=null}return e}function zd(e,t){do{var n=He;try{if(Ma(),tl.current=ll,sl){for(var r=Oe.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}sl=!1}if(_s=0,Ye=Je=Oe=null,nr=!1,rr=0,xi.current=null,n===null||n.return===null){qe=1,cr=t,He=null;break}e:{var o=e,p=n.return,g=n,k=t;if(t=st,g.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var _=k,W=g,H=W.tag;if((W.mode&1)===0&&(H===0||H===11||H===15)){var V=W.alternate;V?(W.updateQueue=V.updateQueue,W.memoizedState=V.memoizedState,W.lanes=V.lanes):(W.updateQueue=null,W.memoizedState=null)}var X=dd(p);if(X!==null){X.flags&=-257,ud(X,p,g,o,t),X.mode&1&&cd(o,_,t),t=X,k=_;var te=t.updateQueue;if(te===null){var se=new Set;se.add(k),t.updateQueue=se}else te.add(k);break e}else{if((t&1)===0){cd(o,_,t),ki();break e}k=Error(c(426))}}else if(Ae&&g.mode&1){var Ve=dd(p);if(Ve!==null){(Ve.flags&65536)===0&&(Ve.flags|=256),ud(Ve,p,g,o,t),_a(fn(k,g));break e}}o=k=fn(k,g),qe!==4&&(qe=2),dr===null?dr=[o]:dr.push(o),o=p;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var I=id(o,k,t);Dc(o,I);break e;case 1:g=k;var C=o.type,D=o.stateNode;if((o.flags&128)===0&&(typeof C.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(xs===null||!xs.has(D)))){o.flags|=65536,t&=-t,o.lanes|=t;var K=od(o,g,t);Dc(o,K);break e}}o=o.return}while(o!==null)}Bd(n)}catch(ne){t=ne,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function Fd(){var e=ul.current;return ul.current=ll,e===null?ll:e}function ki(){(qe===0||qe===3||qe===2)&&(qe=4),Xe===null||(Os&268435455)===0&&(ml&268435455)===0||ys(Xe,st)}function vl(e,t){var n=Ne;Ne|=2;var r=Fd();(Xe!==e||st!==t)&&(Xt=null,zs(e,t));do try{Wp();break}catch(a){zd(e,a)}while(!0);if(Ma(),Ne=n,ul.current=r,He!==null)throw Error(c(261));return Xe=null,st=0,qe}function Wp(){for(;He!==null;)$d(He)}function Hp(){for(;He!==null&&!xm();)$d(He)}function $d(e){var t=Hd(e.alternate,e,jt);e.memoizedProps=e.pendingProps,t===null?Bd(e):He=t,xi.current=null}function Bd(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Op(n,t,jt),n!==null){He=n;return}}else{if(n=Mp(n,t),n!==null){n.flags&=32767,He=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,He=null;return}}if(t=t.sibling,t!==null){He=t;return}He=t=e}while(t!==null);qe===0&&(qe=5)}function Fs(e,t,n){var r=Ie,a=Et.transition;try{Et.transition=null,Ie=1,Kp(e,t,n,r)}finally{Et.transition=a,Ie=r}return null}function Kp(e,t,n,r){do vn();while(gs!==null);if((Ne&6)!==0)throw Error(c(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(c(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Cm(e,o),e===Xe&&(He=Xe=null,st=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||fl||(fl=!0,Kd(Nr,function(){return vn(),null})),o=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||o){o=Et.transition,Et.transition=null;var p=Ie;Ie=1;var g=Ne;Ne|=4,xi.current=null,Fp(e,n),Ud(n,e),mp(ka),Rr=!!Sa,ka=Sa=null,e.current=n,$p(n),gm(),Ne=g,Ie=p,Et.transition=o}else e.current=n;if(fl&&(fl=!1,gs=e,hl=a),o=e.pendingLanes,o===0&&(xs=null),jm(n.stateNode),pt(e,Be()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(pl)throw pl=!1,e=yi,yi=null,e;return(hl&1)!==0&&e.tag!==0&&vn(),o=e.pendingLanes,(o&1)!==0?e===ji?ur++:(ur=0,ji=e):ur=0,ms(),null}function vn(){if(gs!==null){var e=To(hl),t=Et.transition,n=Ie;try{if(Et.transition=null,Ie=16>e?16:e,gs===null)var r=!1;else{if(e=gs,gs=null,hl=0,(Ne&6)!==0)throw Error(c(331));var a=Ne;for(Ne|=4,ee=e.current;ee!==null;){var o=ee,p=o.child;if((ee.flags&16)!==0){var g=o.deletions;if(g!==null){for(var k=0;k<g.length;k++){var _=g[k];for(ee=_;ee!==null;){var W=ee;switch(W.tag){case 0:case 11:case 15:or(8,W,o)}var H=W.child;if(H!==null)H.return=W,ee=H;else for(;ee!==null;){W=ee;var V=W.sibling,X=W.return;if(Ed(W),W===_){ee=null;break}if(V!==null){V.return=X,ee=V;break}ee=X}}}var te=o.alternate;if(te!==null){var se=te.child;if(se!==null){te.child=null;do{var Ve=se.sibling;se.sibling=null,se=Ve}while(se!==null)}}ee=o}}if((o.subtreeFlags&2064)!==0&&p!==null)p.return=o,ee=p;else e:for(;ee!==null;){if(o=ee,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:or(9,o,o.return)}var I=o.sibling;if(I!==null){I.return=o.return,ee=I;break e}ee=o.return}}var C=e.current;for(ee=C;ee!==null;){p=ee;var D=p.child;if((p.subtreeFlags&2064)!==0&&D!==null)D.return=p,ee=D;else e:for(p=C;ee!==null;){if(g=ee,(g.flags&2048)!==0)try{switch(g.tag){case 0:case 11:case 15:dl(9,g)}}catch(ne){Fe(g,g.return,ne)}if(g===p){ee=null;break e}var K=g.sibling;if(K!==null){K.return=g.return,ee=K;break e}ee=g.return}}if(Ne=a,ms(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(wr,e)}catch{}r=!0}return r}finally{Ie=n,Et.transition=t}}return!1}function Vd(e,t,n){t=fn(n,t),t=id(e,t,1),e=fs(e,t,1),t=ot(),e!==null&&(An(e,1,t),pt(e,t))}function Fe(e,t,n){if(e.tag===3)Vd(e,e,n);else for(;t!==null;){if(t.tag===3){Vd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xs===null||!xs.has(r))){e=fn(n,e),e=od(t,e,1),t=fs(t,e,1),e=ot(),t!==null&&(An(t,1,e),pt(t,e));break}}t=t.return}}function Jp(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ot(),e.pingedLanes|=e.suspendedLanes&n,Xe===e&&(st&n)===n&&(qe===4||qe===3&&(st&130023424)===st&&500>Be()-vi?zs(e,0):gi|=n),pt(e,t)}function Wd(e,t){t===0&&((e.mode&1)===0?t=1:(t=kr,kr<<=1,(kr&130023424)===0&&(kr=4194304)));var n=ot();e=Qt(e,t),e!==null&&(An(e,t,n),pt(e,n))}function qp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Wd(e,n)}function Qp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(c(314))}r!==null&&r.delete(t),Wd(e,n)}var Hd;Hd=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ct.current)ut=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return ut=!1,_p(e,t,n);ut=(e.flags&131072)!==0}else ut=!1,Ae&&(t.flags&1048576)!==0&&Sc(t,Jr,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ol(e,t),e=t.pendingProps;var a=ln(t,nt.current);mn(t,n),a=Qa(null,t,r,e,a,n);var o=Ga();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dt(r)?(o=!0,Wr(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Ba(t),a.updater=al,t.stateNode=a,a._reactInternals=t,si(t,r,e,n),t=ai(null,t,r,!0,o,n)):(t.tag=0,Ae&&o&&Ua(t),it(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ol(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=Yp(r),e=Ut(r,e),a){case 0:t=li(null,t,r,e,n);break e;case 1:t=gd(null,t,r,e,n);break e;case 11:t=md(null,t,r,e,n);break e;case 14:t=pd(null,t,r,Ut(r.type,e),n);break e}throw Error(c(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ut(r,a),li(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ut(r,a),gd(e,t,r,a,n);case 3:e:{if(vd(t),e===null)throw Error(c(387));r=t.pendingProps,o=t.memoizedState,a=o.element,Lc(e,t),Zr(t,r,null,n);var p=t.memoizedState;if(r=p.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=fn(Error(c(423)),t),t=yd(e,t,r,n,a);break e}else if(r!==a){a=fn(Error(c(424)),t),t=yd(e,t,r,n,a);break e}else for(yt=cs(t.stateNode.containerInfo.firstChild),vt=t,Ae=!0,It=null,n=Ic(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cn(),r===a){t=Yt(e,t,n);break e}it(e,t,r,n)}t=t.child}return t;case 5:return _c(t),e===null&&Aa(t),r=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,p=a.children,Ca(r,a)?p=null:o!==null&&Ca(r,o)&&(t.flags|=32),xd(e,t),it(e,t,p,n),t.child;case 6:return e===null&&Aa(t),null;case 13:return jd(e,t,n);case 4:return Va(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=dn(t,null,r,n):it(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ut(r,a),md(e,t,r,a,n);case 7:return it(e,t,t.pendingProps,n),t.child;case 8:return it(e,t,t.pendingProps.children,n),t.child;case 12:return it(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,p=a.value,Ue(Gr,r._currentValue),r._currentValue=p,o!==null)if(Tt(o.value,p)){if(o.children===a.children&&!ct.current){t=Yt(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var g=o.dependencies;if(g!==null){p=o.child;for(var k=g.firstContext;k!==null;){if(k.context===r){if(o.tag===1){k=Gt(-1,n&-n),k.tag=2;var _=o.updateQueue;if(_!==null){_=_.shared;var W=_.pending;W===null?k.next=k:(k.next=W.next,W.next=k),_.pending=k}}o.lanes|=n,k=o.alternate,k!==null&&(k.lanes|=n),Fa(o.return,n,t),g.lanes|=n;break}k=k.next}}else if(o.tag===10)p=o.type===t.type?null:o.child;else if(o.tag===18){if(p=o.return,p===null)throw Error(c(341));p.lanes|=n,g=p.alternate,g!==null&&(g.lanes|=n),Fa(p,n,t),p=o.sibling}else p=o.child;if(p!==null)p.return=o;else for(p=o;p!==null;){if(p===t){p=null;break}if(o=p.sibling,o!==null){o.return=p.return,p=o;break}p=p.return}o=p}it(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,mn(t,n),a=kt(a),r=r(a),t.flags|=1,it(e,t,r,n),t.child;case 14:return r=t.type,a=Ut(r,t.pendingProps),a=Ut(r.type,a),pd(e,t,r,a,n);case 15:return fd(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ut(r,a),ol(e,t),t.tag=1,dt(r)?(e=!0,Wr(t)):e=!1,mn(t,n),ld(t,r,a),si(t,r,a,n),ai(null,t,r,!0,e,n);case 19:return Nd(e,t,n);case 22:return hd(e,t,n)}throw Error(c(156,t.tag))};function Kd(e,t){return ko(e,t)}function Gp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(e,t,n,r){return new Gp(e,t,n,r)}function Ci(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Yp(e){if(typeof e=="function")return Ci(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xe)return 11;if(e===$e)return 14}return 2}function js(e,t){var n=e.alternate;return n===null?(n=Pt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function yl(e,t,n,r,a,o){var p=2;if(r=e,typeof e=="function")Ci(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case M:return $s(n.children,a,o,t);case fe:p=8,a|=8;break;case Pe:return e=Pt(12,n,t,a|2),e.elementType=Pe,e.lanes=o,e;case Re:return e=Pt(13,n,t,a),e.elementType=Re,e.lanes=o,e;case ke:return e=Pt(19,n,t,a),e.elementType=ke,e.lanes=o,e;case Ce:return jl(n,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Y:p=10;break e;case G:p=9;break e;case xe:p=11;break e;case $e:p=14;break e;case Te:p=16,r=null;break e}throw Error(c(130,e==null?e:typeof e,""))}return t=Pt(p,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function $s(e,t,n,r){return e=Pt(7,e,r,t),e.lanes=n,e}function jl(e,t,n,r){return e=Pt(22,e,r,t),e.elementType=Ce,e.lanes=n,e.stateNode={isHidden:!1},e}function Ei(e,t,n){return e=Pt(6,e,null,t),e.lanes=n,e}function Pi(e,t,n){return t=Pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xp(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ta(0),this.expirationTimes=ta(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ta(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ri(e,t,n,r,a,o,p,g,k){return e=new Xp(e,t,n,g,k),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Pt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ba(o),e}function Zp(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Jd(e){if(!e)return us;e=e._reactInternals;e:{if(Rs(e)!==e||e.tag!==1)throw Error(c(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(c(171))}if(e.tag===1){var n=e.type;if(dt(n))return bc(e,n,t)}return t}function qd(e,t,n,r,a,o,p,g,k){return e=Ri(n,r,!0,e,a,o,p,g,k),e.context=Jd(null),n=e.current,r=ot(),a=vs(n),o=Gt(r,a),o.callback=t??null,fs(n,o,a),e.current.lanes=a,An(e,a,r),pt(e,r),e}function bl(e,t,n,r){var a=t.current,o=ot(),p=vs(a);return n=Jd(n),t.context===null?t.context=n:t.pendingContext=n,t=Gt(o,p),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=fs(a,t,p),e!==null&&(At(e,a,p,o),Xr(e,a,p)),p}function Nl(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function Qd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ti(e,t){Qd(e,t),(e=e.alternate)&&Qd(e,t)}function ef(){return null}var Gd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ii(e){this._internalRoot=e}wl.prototype.render=Ii.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));bl(e,t,null,null)},wl.prototype.unmount=Ii.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ms(function(){bl(null,e,null,null)}),t[Ht]=null}};function wl(e){this._internalRoot=e}wl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lo();e={blockedOn:null,target:e,priority:t};for(var n=0;n<as.length&&t!==0&&t<as[n].priority;n++);as.splice(n,0,e),n===0&&_o(e)}};function Ui(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Yd(){}function tf(e,t,n,r,a){if(a){if(typeof r=="function"){var o=r;r=function(){var _=Nl(p);o.call(_)}}var p=qd(t,r,e,0,null,!1,!1,"",Yd);return e._reactRootContainer=p,e[Ht]=p.current,Qn(e.nodeType===8?e.parentNode:e),Ms(),p}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var g=r;r=function(){var _=Nl(k);g.call(_)}}var k=Ri(e,0,!1,null,null,!1,!1,"",Yd);return e._reactRootContainer=k,e[Ht]=k.current,Qn(e.nodeType===8?e.parentNode:e),Ms(function(){bl(t,k,n,r)}),k}function kl(e,t,n,r,a){var o=n._reactRootContainer;if(o){var p=o;if(typeof a=="function"){var g=a;a=function(){var k=Nl(p);g.call(k)}}bl(t,p,e,a)}else p=tf(n,t,e,a,r);return Nl(p)}Io=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Dn(t.pendingLanes);n!==0&&(sa(t,n|1),pt(t,Be()),(Ne&6)===0&&(gn=Be()+500,ms()))}break;case 13:Ms(function(){var r=Qt(e,1);if(r!==null){var a=ot();At(r,e,1,a)}}),Ti(e,1)}},na=function(e){if(e.tag===13){var t=Qt(e,134217728);if(t!==null){var n=ot();At(t,e,134217728,n)}Ti(e,134217728)}},Uo=function(e){if(e.tag===13){var t=vs(e),n=Qt(e,t);if(n!==null){var r=ot();At(n,e,t,r)}Ti(e,t)}},Lo=function(){return Ie},Do=function(e,t){var n=Ie;try{return Ie=e,t()}finally{Ie=n}},Ql=function(e,t,n){switch(t){case"input":if(we(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Br(r);if(!a)throw Error(c(90));ss(r),we(r,a)}}}break;case"textarea":oo(e,n);break;case"select":t=n.value,t!=null&&Js(e,!!n.multiple,t,!1)}},vo=wi,yo=Ms;var sf={usingClientEntryPoint:!1,Events:[Xn,nn,Br,xo,go,wi]},mr={findFiberByHostInstance:Ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nf={bundleType:mr.bundleType,version:mr.version,rendererPackageName:mr.rendererPackageName,rendererConfig:mr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wo(e),e===null?null:e.stateNode},findFiberByHostInstance:mr.findFiberByHostInstance||ef,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{wr=Cl.inject(nf),Mt=Cl}catch{}}return ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sf,ft.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ui(t))throw Error(c(200));return Zp(e,t,null,n)},ft.createRoot=function(e,t){if(!Ui(e))throw Error(c(299));var n=!1,r="",a=Gd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Ri(e,1,!1,null,null,n,!1,r,a),e[Ht]=t.current,Qn(e.nodeType===8?e.parentNode:e),new Ii(t)},ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=wo(t),e=e===null?null:e.stateNode,e},ft.flushSync=function(e){return Ms(e)},ft.hydrate=function(e,t,n){if(!Sl(t))throw Error(c(200));return kl(null,e,t,!0,n)},ft.hydrateRoot=function(e,t,n){if(!Ui(e))throw Error(c(405));var r=n!=null&&n.hydratedSources||null,a=!1,o="",p=Gd;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),t=qd(t,null,e,1,n??null,a,!1,o,p),e[Ht]=t.current,Qn(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new wl(t)},ft.render=function(e,t,n){if(!Sl(t))throw Error(c(200));return kl(null,e,t,!1,n)},ft.unmountComponentAtNode=function(e){if(!Sl(e))throw Error(c(40));return e._reactRootContainer?(Ms(function(){kl(null,null,e,!1,function(){e._reactRootContainer=null,e[Ht]=null})}),!0):!1},ft.unstable_batchedUpdates=wi,ft.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Sl(n))throw Error(c(200));if(e==null||e._reactInternals===void 0)throw Error(c(38));return kl(e,t,n,!1,r)},ft.version="18.3.1-next-f1338f8080-20240426",ft}var lu;function Au(){if(lu)return Ai.exports;lu=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(i){console.error(i)}}return l(),Ai.exports=pf(),Ai.exports}var au;function ff(){if(au)return El;au=1;var l=Au();return El.createRoot=l.createRoot,El.hydrateRoot=l.hydrateRoot,El}var hf=ff();const xf=Lu(hf);Au();function xr(){return xr=Object.assign?Object.assign.bind():function(l){for(var i=1;i<arguments.length;i++){var c=arguments[i];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(l[d]=c[d])}return l},xr.apply(this,arguments)}var ws;(function(l){l.Pop="POP",l.Push="PUSH",l.Replace="REPLACE"})(ws||(ws={}));const iu="popstate";function gf(l){l===void 0&&(l={});function i(d,m){let{pathname:h,search:f,hash:N}=d.location;return Bi("",{pathname:h,search:f,hash:N},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function c(d,m){return typeof m=="string"?m:Dl(m)}return yf(i,c,null,l)}function Me(l,i){if(l===!1||l===null||typeof l>"u")throw new Error(i)}function Zi(l,i){if(!l){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function vf(){return Math.random().toString(36).substr(2,8)}function ou(l,i){return{usr:l.state,key:l.key,idx:i}}function Bi(l,i,c,d){return c===void 0&&(c=null),xr({pathname:typeof l=="string"?l:l.pathname,search:"",hash:""},typeof i=="string"?wn(i):i,{state:c,key:i&&i.key||d||vf()})}function Dl(l){let{pathname:i="/",search:c="",hash:d=""}=l;return c&&c!=="?"&&(i+=c.charAt(0)==="?"?c:"?"+c),d&&d!=="#"&&(i+=d.charAt(0)==="#"?d:"#"+d),i}function wn(l){let i={};if(l){let c=l.indexOf("#");c>=0&&(i.hash=l.substr(c),l=l.substr(0,c));let d=l.indexOf("?");d>=0&&(i.search=l.substr(d),l=l.substr(0,d)),l&&(i.pathname=l)}return i}function yf(l,i,c,d){d===void 0&&(d={});let{window:m=document.defaultView,v5Compat:h=!1}=d,f=m.history,N=ws.Pop,x=null,S=w();S==null&&(S=0,f.replaceState(xr({},f.state,{idx:S}),""));function w(){return(f.state||{idx:null}).idx}function v(){N=ws.Pop;let y=w(),P=y==null?null:y-S;S=y,x&&x({action:N,location:T.location,delta:P})}function j(y,P){N=ws.Push;let b=Bi(T.location,y,P);S=w()+1;let R=ou(b,S),L=T.createHref(b);try{f.pushState(R,"",L)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;m.location.assign(L)}h&&x&&x({action:N,location:T.location,delta:1})}function A(y,P){N=ws.Replace;let b=Bi(T.location,y,P);S=w();let R=ou(b,S),L=T.createHref(b);f.replaceState(R,"",L),h&&x&&x({action:N,location:T.location,delta:0})}function U(y){let P=m.location.origin!=="null"?m.location.origin:m.location.href,b=typeof y=="string"?y:Dl(y);return b=b.replace(/ $/,"%20"),Me(P,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,P)}let T={get action(){return N},get location(){return l(m,f)},listen(y){if(x)throw new Error("A history only accepts one active listener");return m.addEventListener(iu,v),x=y,()=>{m.removeEventListener(iu,v),x=null}},createHref(y){return i(m,y)},createURL:U,encodeLocation(y){let P=U(y);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:j,replace:A,go(y){return f.go(y)}};return T}var cu;(function(l){l.data="data",l.deferred="deferred",l.redirect="redirect",l.error="error"})(cu||(cu={}));function jf(l,i,c){return c===void 0&&(c="/"),bf(l,i,c)}function bf(l,i,c,d){let m=typeof i=="string"?wn(i):i,h=bn(m.pathname||"/",c);if(h==null)return null;let f=_u(l);Nf(f);let N=null;for(let x=0;N==null&&x<f.length;++x){let S=Lf(h);N=If(f[x],S)}return N}function _u(l,i,c,d){i===void 0&&(i=[]),c===void 0&&(c=[]),d===void 0&&(d="");let m=(h,f,N)=>{let x={relativePath:N===void 0?h.path||"":N,caseSensitive:h.caseSensitive===!0,childrenIndex:f,route:h};x.relativePath.startsWith("/")&&(Me(x.relativePath.startsWith(d),'Absolute route path "'+x.relativePath+'" nested under path '+('"'+d+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),x.relativePath=x.relativePath.slice(d.length));let S=ks([d,x.relativePath]),w=c.concat(x);h.children&&h.children.length>0&&(Me(h.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+S+'".')),_u(h.children,i,w,S)),!(h.path==null&&!h.index)&&i.push({path:S,score:Rf(S,h.index),routesMeta:w})};return l.forEach((h,f)=>{var N;if(h.path===""||!((N=h.path)!=null&&N.includes("?")))m(h,f);else for(let x of Ou(h.path))m(h,f,x)}),i}function Ou(l){let i=l.split("/");if(i.length===0)return[];let[c,...d]=i,m=c.endsWith("?"),h=c.replace(/\?$/,"");if(d.length===0)return m?[h,""]:[h];let f=Ou(d.join("/")),N=[];return N.push(...f.map(x=>x===""?h:[h,x].join("/"))),m&&N.push(...f),N.map(x=>l.startsWith("/")&&x===""?"/":x)}function Nf(l){l.sort((i,c)=>i.score!==c.score?c.score-i.score:Tf(i.routesMeta.map(d=>d.childrenIndex),c.routesMeta.map(d=>d.childrenIndex)))}const wf=/^:[\w-]+$/,Sf=3,kf=2,Cf=1,Ef=10,Pf=-2,du=l=>l==="*";function Rf(l,i){let c=l.split("/"),d=c.length;return c.some(du)&&(d+=Pf),i&&(d+=kf),c.filter(m=>!du(m)).reduce((m,h)=>m+(wf.test(h)?Sf:h===""?Cf:Ef),d)}function Tf(l,i){return l.length===i.length&&l.slice(0,-1).every((d,m)=>d===i[m])?l[l.length-1]-i[i.length-1]:0}function If(l,i,c){let{routesMeta:d}=l,m={},h="/",f=[];for(let N=0;N<d.length;++N){let x=d[N],S=N===d.length-1,w=h==="/"?i:i.slice(h.length)||"/",v=Vi({path:x.relativePath,caseSensitive:x.caseSensitive,end:S},w),j=x.route;if(!v)return null;Object.assign(m,v.params),f.push({params:m,pathname:ks([h,v.pathname]),pathnameBase:Mf(ks([h,v.pathnameBase])),route:j}),v.pathnameBase!=="/"&&(h=ks([h,v.pathnameBase]))}return f}function Vi(l,i){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[c,d]=Uf(l.path,l.caseSensitive,l.end),m=i.match(c);if(!m)return null;let h=m[0],f=h.replace(/(.)\/+$/,"$1"),N=m.slice(1);return{params:d.reduce((S,w,v)=>{let{paramName:j,isOptional:A}=w;if(j==="*"){let T=N[v]||"";f=h.slice(0,h.length-T.length).replace(/(.)\/+$/,"$1")}const U=N[v];return A&&!U?S[j]=void 0:S[j]=(U||"").replace(/%2F/g,"/"),S},{}),pathname:h,pathnameBase:f,pattern:l}}function Uf(l,i,c){i===void 0&&(i=!1),c===void 0&&(c=!0),Zi(l==="*"||!l.endsWith("*")||l.endsWith("/*"),'Route path "'+l+'" will be treated as if it were '+('"'+l.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+l.replace(/\*$/,"/*")+'".'));let d=[],m="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,N,x)=>(d.push({paramName:N,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)"));return l.endsWith("*")?(d.push({paramName:"*"}),m+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?m+="\\/*$":l!==""&&l!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,i?void 0:"i"),d]}function Lf(l){try{return l.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return Zi(!1,'The URL path "'+l+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),l}}function bn(l,i){if(i==="/")return l;if(!l.toLowerCase().startsWith(i.toLowerCase()))return null;let c=i.endsWith("/")?i.length-1:i.length,d=l.charAt(c);return d&&d!=="/"?null:l.slice(c)||"/"}const Df=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Af=l=>Df.test(l);function _f(l,i){i===void 0&&(i="/");let{pathname:c,search:d="",hash:m=""}=typeof l=="string"?wn(l):l,h;if(c)if(Af(c))h=c;else{if(c.includes("//")){let f=c;c=c.replace(/\/\/+/g,"/"),Zi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(f+" -> "+c))}c.startsWith("/")?h=uu(c.substring(1),"/"):h=uu(c,i)}else h=i;return{pathname:h,search:zf(d),hash:Ff(m)}}function uu(l,i){let c=i.replace(/\/+$/,"").split("/");return l.split("/").forEach(m=>{m===".."?c.length>1&&c.pop():m!=="."&&c.push(m)}),c.length>1?c.join("/"):"/"}function Mi(l,i,c,d){return"Cannot include a '"+l+"' character in a manually specified "+("`to."+i+"` field ["+JSON.stringify(d)+"].  Please separate it out to the ")+("`to."+c+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Of(l){return l.filter((i,c)=>c===0||i.route.path&&i.route.path.length>0)}function eo(l,i){let c=Of(l);return i?c.map((d,m)=>m===c.length-1?d.pathname:d.pathnameBase):c.map(d=>d.pathnameBase)}function to(l,i,c,d){d===void 0&&(d=!1);let m;typeof l=="string"?m=wn(l):(m=xr({},l),Me(!m.pathname||!m.pathname.includes("?"),Mi("?","pathname","search",m)),Me(!m.pathname||!m.pathname.includes("#"),Mi("#","pathname","hash",m)),Me(!m.search||!m.search.includes("#"),Mi("#","search","hash",m)));let h=l===""||m.pathname==="",f=h?"/":m.pathname,N;if(f==null)N=c;else{let v=i.length-1;if(!d&&f.startsWith("..")){let j=f.split("/");for(;j[0]==="..";)j.shift(),v-=1;m.pathname=j.join("/")}N=v>=0?i[v]:"/"}let x=_f(m,N),S=f&&f!=="/"&&f.endsWith("/"),w=(h||f===".")&&c.endsWith("/");return!x.pathname.endsWith("/")&&(S||w)&&(x.pathname+="/"),x}const ks=l=>l.join("/").replace(/\/\/+/g,"/"),Mf=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),zf=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,Ff=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function $f(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}const Mu=["post","put","patch","delete"];new Set(Mu);const Bf=["get",...Mu];new Set(Bf);function gr(){return gr=Object.assign?Object.assign.bind():function(l){for(var i=1;i<arguments.length;i++){var c=arguments[i];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(l[d]=c[d])}return l},gr.apply(this,arguments)}const zl=u.createContext(null),zu=u.createContext(null),Zt=u.createContext(null),Fl=u.createContext(null),Vt=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Fu=u.createContext(null);function Vf(l,i){let{relative:c}=i===void 0?{}:i;Sn()||Me(!1);let{basename:d,navigator:m}=u.useContext(Zt),{hash:h,pathname:f,search:N}=$l(l,{relative:c}),x=f;return d!=="/"&&(x=f==="/"?d:ks([d,f])),m.createHref({pathname:x,search:N,hash:h})}function Sn(){return u.useContext(Fl)!=null}function xt(){return Sn()||Me(!1),u.useContext(Fl).location}function $u(l){u.useContext(Zt).static||u.useLayoutEffect(l)}function Qe(){let{isDataRoute:l}=u.useContext(Vt);return l?rh():Wf()}function Wf(){Sn()||Me(!1);let l=u.useContext(zl),{basename:i,future:c,navigator:d}=u.useContext(Zt),{matches:m}=u.useContext(Vt),{pathname:h}=xt(),f=JSON.stringify(eo(m,c.v7_relativeSplatPath)),N=u.useRef(!1);return $u(()=>{N.current=!0}),u.useCallback(function(S,w){if(w===void 0&&(w={}),!N.current)return;if(typeof S=="number"){d.go(S);return}let v=to(S,JSON.parse(f),h,w.relative==="path");l==null&&i!=="/"&&(v.pathname=v.pathname==="/"?i:ks([i,v.pathname])),(w.replace?d.replace:d.push)(v,w.state,w)},[i,d,f,h,l])}const Hf=u.createContext(null);function Kf(l){let i=u.useContext(Vt).outlet;return i&&u.createElement(Hf.Provider,{value:l},i)}function es(){let{matches:l}=u.useContext(Vt),i=l[l.length-1];return i?i.params:{}}function $l(l,i){let{relative:c}=i===void 0?{}:i,{future:d}=u.useContext(Zt),{matches:m}=u.useContext(Vt),{pathname:h}=xt(),f=JSON.stringify(eo(m,d.v7_relativeSplatPath));return u.useMemo(()=>to(l,JSON.parse(f),h,c==="path"),[l,f,h,c])}function Jf(l,i){return qf(l,i)}function qf(l,i,c,d){Sn()||Me(!1);let{navigator:m}=u.useContext(Zt),{matches:h}=u.useContext(Vt),f=h[h.length-1],N=f?f.params:{};f&&f.pathname;let x=f?f.pathnameBase:"/";f&&f.route;let S=xt(),w;if(i){var v;let y=typeof i=="string"?wn(i):i;x==="/"||(v=y.pathname)!=null&&v.startsWith(x)||Me(!1),w=y}else w=S;let j=w.pathname||"/",A=j;if(x!=="/"){let y=x.replace(/^\//,"").split("/");A="/"+j.replace(/^\//,"").split("/").slice(y.length).join("/")}let U=jf(l,{pathname:A}),T=Zf(U&&U.map(y=>Object.assign({},y,{params:Object.assign({},N,y.params),pathname:ks([x,m.encodeLocation?m.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?x:ks([x,m.encodeLocation?m.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),h,c,d);return i&&T?u.createElement(Fl.Provider,{value:{location:gr({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:ws.Pop}},T):T}function Qf(){let l=nh(),i=$f(l)?l.status+" "+l.statusText:l instanceof Error?l.message:JSON.stringify(l),c=l instanceof Error?l.stack:null,m={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},i),c?u.createElement("pre",{style:m},c):null,null)}const Gf=u.createElement(Qf,null);class Yf extends u.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,c){return c.location!==i.location||c.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:c.error,location:c.location,revalidation:i.revalidation||c.revalidation}}componentDidCatch(i,c){console.error("React Router caught the following error during render",i,c)}render(){return this.state.error!==void 0?u.createElement(Vt.Provider,{value:this.props.routeContext},u.createElement(Fu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Xf(l){let{routeContext:i,match:c,children:d}=l,m=u.useContext(zl);return m&&m.static&&m.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(m.staticContext._deepestRenderedBoundaryId=c.route.id),u.createElement(Vt.Provider,{value:i},d)}function Zf(l,i,c,d){var m;if(i===void 0&&(i=[]),c===void 0&&(c=null),d===void 0&&(d=null),l==null){var h;if(!c)return null;if(c.errors)l=c.matches;else if((h=d)!=null&&h.v7_partialHydration&&i.length===0&&!c.initialized&&c.matches.length>0)l=c.matches;else return null}let f=l,N=(m=c)==null?void 0:m.errors;if(N!=null){let w=f.findIndex(v=>v.route.id&&N?.[v.route.id]!==void 0);w>=0||Me(!1),f=f.slice(0,Math.min(f.length,w+1))}let x=!1,S=-1;if(c&&d&&d.v7_partialHydration)for(let w=0;w<f.length;w++){let v=f[w];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(S=w),v.route.id){let{loaderData:j,errors:A}=c,U=v.route.loader&&j[v.route.id]===void 0&&(!A||A[v.route.id]===void 0);if(v.route.lazy||U){x=!0,S>=0?f=f.slice(0,S+1):f=[f[0]];break}}}return f.reduceRight((w,v,j)=>{let A,U=!1,T=null,y=null;c&&(A=N&&v.route.id?N[v.route.id]:void 0,T=v.route.errorElement||Gf,x&&(S<0&&j===0?(lh("route-fallback"),U=!0,y=null):S===j&&(U=!0,y=v.route.hydrateFallbackElement||null)));let P=i.concat(f.slice(0,j+1)),b=()=>{let R;return A?R=T:U?R=y:v.route.Component?R=u.createElement(v.route.Component,null):v.route.element?R=v.route.element:R=w,u.createElement(Xf,{match:v,routeContext:{outlet:w,matches:P,isDataRoute:c!=null},children:R})};return c&&(v.route.ErrorBoundary||v.route.errorElement||j===0)?u.createElement(Yf,{location:c.location,revalidation:c.revalidation,component:T,error:A,children:b(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):b()},null)}var Bu=(function(l){return l.UseBlocker="useBlocker",l.UseRevalidator="useRevalidator",l.UseNavigateStable="useNavigate",l})(Bu||{}),Vu=(function(l){return l.UseBlocker="useBlocker",l.UseLoaderData="useLoaderData",l.UseActionData="useActionData",l.UseRouteError="useRouteError",l.UseNavigation="useNavigation",l.UseRouteLoaderData="useRouteLoaderData",l.UseMatches="useMatches",l.UseRevalidator="useRevalidator",l.UseNavigateStable="useNavigate",l.UseRouteId="useRouteId",l})(Vu||{});function eh(l){let i=u.useContext(zl);return i||Me(!1),i}function th(l){let i=u.useContext(zu);return i||Me(!1),i}function sh(l){let i=u.useContext(Vt);return i||Me(!1),i}function Wu(l){let i=sh(),c=i.matches[i.matches.length-1];return c.route.id||Me(!1),c.route.id}function nh(){var l;let i=u.useContext(Fu),c=th(),d=Wu();return i!==void 0?i:(l=c.errors)==null?void 0:l[d]}function rh(){let{router:l}=eh(Bu.UseNavigateStable),i=Wu(Vu.UseNavigateStable),c=u.useRef(!1);return $u(()=>{c.current=!0}),u.useCallback(function(m,h){h===void 0&&(h={}),c.current&&(typeof m=="number"?l.navigate(m):l.navigate(m,gr({fromRouteId:i},h)))},[l,i])}const mu={};function lh(l,i,c){mu[l]||(mu[l]=!0)}function ah(l,i){l?.v7_startTransition,l?.v7_relativeSplatPath}function Bs(l){let{to:i,replace:c,state:d,relative:m}=l;Sn()||Me(!1);let{future:h,static:f}=u.useContext(Zt),{matches:N}=u.useContext(Vt),{pathname:x}=xt(),S=Qe(),w=to(i,eo(N,h.v7_relativeSplatPath),x,m==="path"),v=JSON.stringify(w);return u.useEffect(()=>S(JSON.parse(v),{replace:c,state:d,relative:m}),[S,v,m,c,d]),null}function Bl(l){return Kf(l.context)}function le(l){Me(!1)}function ih(l){let{basename:i="/",children:c=null,location:d,navigationType:m=ws.Pop,navigator:h,static:f=!1,future:N}=l;Sn()&&Me(!1);let x=i.replace(/^\/*/,"/"),S=u.useMemo(()=>({basename:x,navigator:h,static:f,future:gr({v7_relativeSplatPath:!1},N)}),[x,N,h,f]);typeof d=="string"&&(d=wn(d));let{pathname:w="/",search:v="",hash:j="",state:A=null,key:U="default"}=d,T=u.useMemo(()=>{let y=bn(w,x);return y==null?null:{location:{pathname:y,search:v,hash:j,state:A,key:U},navigationType:m}},[x,w,v,j,A,U,m]);return T==null?null:u.createElement(Zt.Provider,{value:S},u.createElement(Fl.Provider,{children:c,value:T}))}function oh(l){let{children:i,location:c}=l;return Jf(Wi(i),c)}new Promise(()=>{});function Wi(l,i){i===void 0&&(i=[]);let c=[];return u.Children.forEach(l,(d,m)=>{if(!u.isValidElement(d))return;let h=[...i,m];if(d.type===u.Fragment){c.push.apply(c,Wi(d.props.children,h));return}d.type!==le&&Me(!1),!d.props.index||!d.props.children||Me(!1);let f={id:d.props.id||h.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,loader:d.props.loader,action:d.props.action,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(f.children=Wi(d.props.children,h)),c.push(f)}),c}function Al(){return Al=Object.assign?Object.assign.bind():function(l){for(var i=1;i<arguments.length;i++){var c=arguments[i];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(l[d]=c[d])}return l},Al.apply(this,arguments)}function Hu(l,i){if(l==null)return{};var c={},d=Object.keys(l),m,h;for(h=0;h<d.length;h++)m=d[h],!(i.indexOf(m)>=0)&&(c[m]=l[m]);return c}function ch(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function dh(l,i){return l.button===0&&(!i||i==="_self")&&!ch(l)}function Hi(l){return l===void 0&&(l=""),new URLSearchParams(typeof l=="string"||Array.isArray(l)||l instanceof URLSearchParams?l:Object.keys(l).reduce((i,c)=>{let d=l[c];return i.concat(Array.isArray(d)?d.map(m=>[c,m]):[[c,d]])},[]))}function uh(l,i){let c=Hi(l);return i&&i.forEach((d,m)=>{c.has(m)||i.getAll(m).forEach(h=>{c.append(m,h)})}),c}const mh=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ph=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],fh="6";try{window.__reactRouterVersion=fh}catch{}const hh=u.createContext({isTransitioning:!1}),xh="startTransition",pu=df[xh];function gh(l){let{basename:i,children:c,future:d,window:m}=l,h=u.useRef();h.current==null&&(h.current=gf({window:m,v5Compat:!0}));let f=h.current,[N,x]=u.useState({action:f.action,location:f.location}),{v7_startTransition:S}=d||{},w=u.useCallback(v=>{S&&pu?pu(()=>x(v)):x(v)},[x,S]);return u.useLayoutEffect(()=>f.listen(w),[f,w]),u.useEffect(()=>ah(d),[d]),u.createElement(ih,{basename:i,children:c,location:N.location,navigationType:N.action,navigator:f,future:d})}const vh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,je=u.forwardRef(function(i,c){let{onClick:d,relative:m,reloadDocument:h,replace:f,state:N,target:x,to:S,preventScrollReset:w,viewTransition:v}=i,j=Hu(i,mh),{basename:A}=u.useContext(Zt),U,T=!1;if(typeof S=="string"&&yh.test(S)&&(U=S,vh))try{let R=new URL(window.location.href),L=S.startsWith("//")?new URL(R.protocol+S):new URL(S),O=bn(L.pathname,A);L.origin===R.origin&&O!=null?S=O+L.search+L.hash:T=!0}catch{}let y=Vf(S,{relative:m}),P=bh(S,{replace:f,state:N,target:x,preventScrollReset:w,relative:m,viewTransition:v});function b(R){d&&d(R),R.defaultPrevented||P(R)}return u.createElement("a",Al({},j,{href:U||y,onClick:T||h?d:b,ref:c,target:x}))}),Vs=u.forwardRef(function(i,c){let{"aria-current":d="page",caseSensitive:m=!1,className:h="",end:f=!1,style:N,to:x,viewTransition:S,children:w}=i,v=Hu(i,ph),j=$l(x,{relative:v.relative}),A=xt(),U=u.useContext(zu),{navigator:T,basename:y}=u.useContext(Zt),P=U!=null&&Nh(j)&&S===!0,b=T.encodeLocation?T.encodeLocation(j).pathname:j.pathname,R=A.pathname,L=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;m||(R=R.toLowerCase(),L=L?L.toLowerCase():null,b=b.toLowerCase()),L&&y&&(L=bn(L,y)||L);const O=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let B=R===b||!f&&R.startsWith(b)&&R.charAt(O)==="/",M=L!=null&&(L===b||!f&&L.startsWith(b)&&L.charAt(b.length)==="/"),fe={isActive:B,isPending:M,isTransitioning:P},Pe=B?d:void 0,Y;typeof h=="function"?Y=h(fe):Y=[h,B?"active":null,M?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let G=typeof N=="function"?N(fe):N;return u.createElement(je,Al({},v,{"aria-current":Pe,className:Y,ref:c,style:G,to:x,viewTransition:S}),typeof w=="function"?w(fe):w)});var Ki;(function(l){l.UseScrollRestoration="useScrollRestoration",l.UseSubmit="useSubmit",l.UseSubmitFetcher="useSubmitFetcher",l.UseFetcher="useFetcher",l.useViewTransitionState="useViewTransitionState"})(Ki||(Ki={}));var fu;(function(l){l.UseFetcher="useFetcher",l.UseFetchers="useFetchers",l.UseScrollRestoration="useScrollRestoration"})(fu||(fu={}));function jh(l){let i=u.useContext(zl);return i||Me(!1),i}function bh(l,i){let{target:c,replace:d,state:m,preventScrollReset:h,relative:f,viewTransition:N}=i===void 0?{}:i,x=Qe(),S=xt(),w=$l(l,{relative:f});return u.useCallback(v=>{if(dh(v,c)){v.preventDefault();let j=d!==void 0?d:Dl(S)===Dl(w);x(l,{replace:j,state:m,preventScrollReset:h,relative:f,viewTransition:N})}},[S,x,w,d,m,c,l,h,f,N])}function kn(l){let i=u.useRef(Hi(l)),c=u.useRef(!1),d=xt(),m=u.useMemo(()=>uh(d.search,c.current?null:i.current),[d.search]),h=Qe(),f=u.useCallback((N,x)=>{const S=Hi(typeof N=="function"?N(m):N);c.current=!0,h("?"+S,x)},[h,m]);return[m,f]}function Nh(l,i){i===void 0&&(i={});let c=u.useContext(hh);c==null&&Me(!1);let{basename:d}=jh(Ki.useViewTransitionState),m=$l(l,{relative:i.relative});if(!c.isTransitioning)return!1;let h=bn(c.currentLocation.pathname,d)||c.currentLocation.pathname,f=bn(c.nextLocation.pathname,d)||c.nextLocation.pathname;return Vi(m.pathname,f)!=null||Vi(m.pathname,h)!=null}const Ku=({children:l})=>s.jsx("div",{className:"mx-auto w-full max-w-6xl px-6",children:l}),Ju={400:"Please check the entered data and try again.",401:"Your session has expired. Please sign in again.",403:"You dont have permission to access this page.",404:"The requested resource was not found.",409:"This action conflicts with an existing record.",422:"Some fields are invalid. Please review and try again.",429:"Too many attempts. Please try again later.",500:"Something went wrong on our side. Please try again.",503:"The service is temporarily unavailable. Please try again later."};class Ee extends Error{status;title;detail;traceId;errorId;fieldErrors;generalErrors;debug;constructor({status:i,title:c,detail:d,traceId:m,errorId:h,fieldErrors:f,generalErrors:N,debug:x}){super(d||c||Ju[i]||"Request failed."),this.name="AppError",this.status=i,this.title=c,this.detail=d,this.traceId=m,this.errorId=h,this.fieldErrors=f,this.generalErrors=N,this.debug=x}}function wh(l){if(!l||typeof l!="object")return;const i=Object.entries(l).map(([c,d])=>Array.isArray(d)?[c,d.map(String)]:typeof d=="string"?[c,[d]]:[c,[]]).filter(([,c])=>c.length>0);if(i.length!==0)return Object.fromEntries(i)}async function qu(l){const i=l.headers.get("content-type")??"";let c=null,d=null;if(i.includes("application/json")||i.includes("application/problem+json"))try{c=await l.json()}catch{c=null}if(!c)try{d=await l.text()}catch{d=null}const m=typeof c?.status=="number"?c.status:l.status,h=typeof c?.title=="string"?c.title:l.statusText,f=typeof c?.detail=="string"?c.detail:d||Ju[m],N=wh(c?.errors),x=Array.isArray(c?.generalErrors)?c.generalErrors.map(String):void 0;return new Ee({status:m,title:h,detail:f,traceId:typeof c?.traceId=="string"?c.traceId:void 0,errorId:typeof c?.errorId=="string"?c.errorId:void 0,fieldErrors:N,generalErrors:x,debug:typeof c?.debug=="object"?c.debug:void 0})}const so="https://localhost:7001",Sh=l=>l.startsWith("http")?l:`${so}${l.startsWith("/")?"":"/"}${l}`,Ge=async(l,i={})=>{const c=await fetch(Sh(l),{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json",...i.headers??{}},...i});if(!c.ok)throw await qu(c);if(c.status!==204)return await c.json()},kh=l=>Ge("/auth/login",{method:"POST",body:JSON.stringify(l)}),Ch=l=>Ge("/auth/login/mfa",{method:"POST",body:JSON.stringify({mfaToken:l.mfaToken,code:l.code,rememberMachine:l.rememberMachine??!1,useRecoveryCode:l.useRecoveryCode??!1})}),Eh=l=>Ge("/auth/register",{method:"POST",body:JSON.stringify(l)}),Ph=l=>Ge("/auth/forgot-password",{method:"POST",body:JSON.stringify(l)}),Rh=l=>Ge("/auth/reset-password",{method:"POST",body:JSON.stringify(l)}),Th=l=>Ge("/auth/activate",{method:"POST",body:JSON.stringify(l)}),Qu=()=>Ge("/auth/logout",{method:"POST"}),Ih=()=>Ge("/auth/session"),no=l=>l?l.startsWith("/")?`${so}${l}`:l:null,Ji="astraid.auth.status";let zi=null,Pl="loading",fr="",hr=null;const Gu=u.createContext(null),Uh=l=>l?.isAuthenticated?"authenticated":"anonymous",Lh=()=>sessionStorage.getItem(Ji)==="authenticated"?"authenticated":"loading",Dh=({children:l})=>{const[i,c]=u.useState(zi),[d,m]=u.useState(Pl==="loading"?Lh():Pl),[h,f]=u.useState(fr),N=u.useCallback(async()=>{if(hr){await hr;return}hr=(async()=>{m(w=>w==="authenticated"?w:"loading"),f("");try{const v=await Ih(),j=Uh(v);c(v),m(j),zi=v,Pl=j,fr="",sessionStorage.setItem(Ji,j)}catch(w){const v="anonymous";c(null),m(v),w instanceof Ee?(f(w.detail??w.message),fr=w.detail??w.message):w instanceof Error?(f(w.message),fr=w.message):(f("Unable to load session."),fr="Unable to load session."),zi=null,Pl=v,sessionStorage.setItem(Ji,v)}})().finally(()=>{hr=null}),await hr},[]);u.useEffect(()=>{N()},[N]);const x=u.useMemo(()=>({session:i,status:d,isLoading:d==="loading",error:h,refresh:N}),[h,N,i,d]);return s.jsx(Gu.Provider,{value:x,children:l})},Cs=()=>{const l=u.useContext(Gu);if(!l)throw new Error("useAuthSession must be used within AuthSessionProvider.");return l},Ah=(l,i)=>l==="authenticated"&&!!i?.isAuthenticated,_h=l=>!!l,ro=()=>_h(void 0)?(void 0).trim():"/admin",lo=l=>/^https?:\/\//i.test(l),Oh="system.admin",Yu=l=>l?.includes(Oh)??!1,Es=({children:l,className:i,...c})=>s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,...c,children:l}),Mh=l=>s.jsxs(Es,{...l,children:[s.jsx("rect",{x:"3",y:"3",width:"8",height:"8",rx:"1"}),s.jsx("rect",{x:"13",y:"3",width:"8",height:"5",rx:"1"}),s.jsx("rect",{x:"13",y:"10",width:"8",height:"11",rx:"1"}),s.jsx("rect",{x:"3",y:"13",width:"8",height:"8",rx:"1"})]}),hu=l=>s.jsx(Es,{...l,children:s.jsx("path",{d:"M12 3l8 3v6c0 5-3.5 8-8 9-4.5-1-8-4-8-9V6l8-3z"})}),zh=l=>s.jsxs(Es,{...l,children:[s.jsx("circle",{cx:"8",cy:"12",r:"3"}),s.jsx("path",{d:"M11 12h10"}),s.jsx("path",{d:"M18 9v6"}),s.jsx("path",{d:"M21 10v4"})]}),Fh=l=>s.jsxs(Es,{...l,children:[s.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2"}),s.jsx("path",{d:"M3 7l9 6 9-6"})]}),$h=l=>s.jsxs(Es,{...l,children:[s.jsx("rect",{x:"3",y:"4",width:"18",height:"12",rx:"2"}),s.jsx("path",{d:"M12 16v4"}),s.jsx("path",{d:"M8 20h8"})]}),Bh=l=>s.jsx(Es,{...l,children:s.jsx("path",{d:"M3 12h4l2-5 4 10 2-5h6"})}),Vh=l=>s.jsxs(Es,{...l,children:[s.jsx("circle",{cx:"12",cy:"12",r:"3"}),s.jsx("path",{d:"M19.4 15a1.7 1.7 0 0 0 .3 1.8l.1.1a2 2 0 1 1-2.8 2.8l-.1-.1a1.7 1.7 0 0 0-1.8-.3 1.7 1.7 0 0 0-1 1.5V21a2 2 0 1 1-4 0v-.2a1.7 1.7 0 0 0-1-1.5 1.7 1.7 0 0 0-1.8.3l-.1.1A2 2 0 1 1 4.4 17l.1-.1a1.7 1.7 0 0 0 .3-1.8 1.7 1.7 0 0 0-1.5-1H3a2 2 0 1 1 0-4h.2a1.7 1.7 0 0 0 1.5-1 1.7 1.7 0 0 0-.3-1.8l-.1-.1A2 2 0 1 1 7 4.4l.1.1a1.7 1.7 0 0 0 1.8.3h.1a1.7 1.7 0 0 0 1-1.5V3a2 2 0 1 1 4 0v.2a1.7 1.7 0 0 0 1 1.5h.1a1.7 1.7 0 0 0 1.8-.3l.1-.1A2 2 0 1 1 19.6 7l-.1.1a1.7 1.7 0 0 0-.3 1.8v.1a1.7 1.7 0 0 0 1.5 1H21a2 2 0 1 1 0 4h-.2a1.7 1.7 0 0 0-1.5 1z"})]}),Wh=l=>s.jsxs(Es,{...l,children:[s.jsx("path",{d:"M10 17l5-5-5-5"}),s.jsx("path",{d:"M15 12H3"}),s.jsx("path",{d:"M21 19V5a2 2 0 0 0-2-2h-6"})]}),et={profile:Mh,security:hu,mfa:hu,email:Fh,password:zh,sessions:$h,activity:Bh,admin:Vh,logout:Wh},Hh=[{key:"profile",label:"Dashboard",to:"/account",icon:et.profile},{key:"security",label:"Security",to:"/account/security",icon:et.security},{key:"mfa",label:"MFA",to:"/account/security/mfa",icon:et.mfa},{key:"email",label:"Change email",to:"/account/security/email",icon:et.email},{key:"password",label:"Change password",to:"/account/security/password",icon:et.password},{key:"sessions",label:"Sign out everywhere",to:"/account/security/sessions",icon:et.sessions},{key:"activity",label:"Recent logins",to:"/account/security/activity",icon:et.activity}],qi=[{key:"mfa",label:"MFA management",to:"/account/security/mfa",description:"Set up, disable, and recover multi-factor authentication.",icon:et.mfa},{key:"email",label:"Change email",to:"/account/security/email",description:"Start a secured email change flow and confirm ownership.",icon:et.email},{key:"password",label:"Change password",to:"/account/security/password",description:"Update your password and refresh account protection.",icon:et.password},{key:"sessions",label:"Sign out all sessions",to:"/account/security/sessions",description:"Invalidate sessions on every other device.",icon:et.sessions},{key:"activity",label:"Recent login activity",to:"/account/security/activity",description:"Review recent sign-in successes, failures, and logout events.",icon:et.activity}],Ll="h-5 w-5",Fi="h-4 w-4",Kh=l=>(l.userName??l.email??"User").charAt(0).toUpperCase(),Jh=({className:l})=>s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:l,"aria-hidden":"true",children:s.jsx("path",{d:"m6 9 6 6 6-6"})});function qh({session:l,onLogout:i}){const[c,d]=u.useState(!1),[m,h]=u.useState(!1),f=u.useRef(null),N=u.useRef(null),x=u.useRef(null),S=xt(),w=ro(),v=u.useMemo(()=>{const U=Hh.map(T=>({...T,Icon:T.icon}));return Yu(l.permissions)&&U.push({key:"admin",label:"Admin",to:w,external:lo(w),Icon:et.admin}),U.push({key:"logout",label:"Logout",action:i,danger:!0,Icon:et.logout}),U},[w,i,l.permissions]);u.useEffect(()=>{if(!c)return;const U=y=>!f.current?.contains(y.target)&&d(!1),T=y=>{y.key==="Escape"&&(d(!1),x.current?.focus())};return document.addEventListener("mousedown",U),document.addEventListener("keydown",T),()=>{document.removeEventListener("mousedown",U),document.removeEventListener("keydown",T)}},[c]);const j=U=>{if(U.key==="Tab"&&d(!1),U.key!=="ArrowDown"&&U.key!=="ArrowUp")return;U.preventDefault();const T=N.current?.querySelectorAll("[data-menu-item='true']");if(!T?.length)return;const y=Array.from(T).indexOf(document.activeElement),P=U.key==="ArrowDown"?(y+1+T.length)%T.length:(y-1+T.length)%T.length;T[P].focus()},A=async U=>{h(!0);try{await U(),d(!1)}finally{h(!1)}};return s.jsxs("div",{className:"relative",ref:f,children:[s.jsxs("button",{ref:x,type:"button",className:"flex max-w-[260px] items-center gap-2 rounded-full border border-slate-700 px-3 py-2 text-sm text-slate-100 transition hover:border-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-haspopup":"menu","aria-expanded":c,onClick:()=>d(U=>!U),children:[s.jsx("span",{className:"inline-flex h-7 w-7 shrink-0 items-center justify-center rounded-full bg-slate-800 text-xs font-semibold text-slate-200",children:Kh(l)}),s.jsx("span",{className:"truncate",children:l.userName??l.email??"Account"}),s.jsx(Jh,{className:"h-4 w-4 text-slate-400"})]}),c&&s.jsx("div",{ref:N,role:"menu",onKeyDown:j,className:"absolute right-0 z-30 mt-2 w-64 rounded-xl border border-slate-700 bg-slate-900 p-2 shadow-2xl",children:v.map(U=>{const T=U.Icon;if(U.action)return s.jsxs("button",{role:"menuitem","data-menu-item":"true",disabled:m,onClick:()=>A(U.action),className:"flex w-full items-center gap-2 rounded-lg px-3 py-2 text-left text-sm text-rose-200 transition hover:bg-rose-900/30 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsx(T,{className:Fi}),m?"Logging out...":U.label]},U.key);if(U.external&&U.to)return s.jsxs("a",{role:"menuitem","data-menu-item":"true",href:U.to,onClick:()=>d(!1),className:"flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-slate-100 transition hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsx(T,{className:Fi}),U.label]},U.key);const y=U.to==="/account"?S.pathname==="/account":!!U.to&&S.pathname.startsWith(U.to);return s.jsxs(je,{to:U.to??"#",role:"menuitem","data-menu-item":"true",onClick:()=>d(!1),className:`flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-slate-100 transition hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 ${y?"bg-slate-800/80":""}`,children:[s.jsx(T,{className:Fi}),U.label]},U.key)})})]})}const Rl=({isActive:l})=>`rounded-full px-3 py-1 text-sm transition ${l?"bg-indigo-500/20 text-indigo-200":"text-slate-300 hover:text-white"}`,Qh=()=>{const l=Qe(),{session:i,status:c,refresh:d}=Cs(),m=Ah(c,i),h=i?.permissions?.includes("system.admin")??!1,f=ro(),N=lo(f),x=async()=>{await Qu(),await d(),l("/",{replace:!0})};return s.jsx("header",{className:"border-b border-slate-800 bg-slate-950/70 backdrop-blur",children:s.jsx(Ku,{children:s.jsxs("div",{className:"flex flex-col gap-4 py-5 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"AstraId"}),s.jsx("h1",{className:"text-xl font-semibold text-white",children:"Public UI"})]}),s.jsxs("nav",{className:"flex flex-wrap items-center gap-2","aria-label":"Primary",children:[s.jsx(Vs,{to:"/",className:Rl,children:"Home"}),c==="loading"?s.jsx("span",{className:"rounded-full border border-slate-800 px-3 py-1 text-sm text-slate-500",children:"Checking session"}):null,c==="anonymous"?s.jsxs(s.Fragment,{children:[s.jsx(Vs,{to:"/login",className:Rl,children:"Login"}),s.jsx(Vs,{to:"/register",className:Rl,children:"Register"})]}):null,m&&h?N?s.jsx("a",{href:f,className:"rounded-full px-3 py-1 text-sm text-amber-200 transition hover:text-amber-50",children:"Admin"}):s.jsx(Vs,{to:f,className:Rl,children:"Admin"}):null]}),s.jsx("div",{className:"flex flex-wrap items-center gap-3",children:c==="loading"?s.jsx("span",{className:"text-sm text-slate-500",children:"Checking session"}):m&&i?s.jsx(qh,{session:i,onLogout:x}):null})]})})})},ts=({title:l,description:i,children:c})=>s.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-900/70 p-6 shadow-xl shadow-slate-950/40",children:[l?s.jsxs("header",{className:"mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:l}),i?s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:i}):null]}):null,c]}),Gh={info:"border-sky-400/40 bg-sky-500/10 text-sky-100",warning:"border-amber-400/40 bg-amber-500/10 text-amber-100",error:"border-rose-400/40 bg-rose-500/10 text-rose-100",success:"border-emerald-400/40 bg-emerald-500/10 text-emerald-100"},ht=({variant:l="info",children:i})=>s.jsx("div",{className:`rounded-xl border px-4 py-3 text-sm ${Gh[l]}`,children:i}),Yh=()=>{const l=Qe(),{session:i,isLoading:c,error:d,refresh:m}=Cs(),[h,f]=u.useState(""),N=ro(),x=lo(N),S=u.useMemo(()=>i?.permissions?.length?i.permissions.some(v=>v.toLowerCase()==="system.admin"):!1,[i]),w=async()=>{f("");try{await Qu(),await m(),l("/",{replace:!0})}catch(v){f(v instanceof Error?v.message:"Unable to sign out.")}};return s.jsx("div",{className:"flex flex-col gap-6",children:s.jsx(ts,{title:"Public UI",description:"Public sign-in interface for users.",children:s.jsx("div",{className:"flex flex-col gap-3 text-sm text-slate-300",children:c?s.jsx(ht,{variant:"info",children:"Loading session..."}):d?s.jsx(ht,{variant:"warning",children:d}):i&&i.isAuthenticated?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-base font-semibold text-white",children:"You are signed in. Nothing else to show here yet."}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-sm text-slate-400",children:"User"}),s.jsx("p",{className:"text-sm text-white",children:i.userName??i.email??"Unknown user"}),i.userId?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"mt-3 text-sm text-slate-400",children:"ID"}),s.jsx("p",{className:"text-xs text-slate-300",children:i.userId})]}):null,i.email?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"mt-3 text-sm text-slate-400",children:"Email"}),s.jsx("p",{className:"text-sm text-slate-200",children:i.email})]}):null,i.roles.length?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"mt-3 text-sm text-slate-400",children:"Roles"}),s.jsx("p",{className:"text-xs text-slate-300",children:i.roles.join(", ")})]}):null,i.permissions.length?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"mt-3 text-sm text-slate-400",children:"Permissions"}),s.jsx("p",{className:"text-xs text-slate-300",children:i.permissions.join(", ")})]}):null]}),h?s.jsx(ht,{variant:"warning",children:h}):null,s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{className:"rounded-lg border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-100 transition hover:border-slate-500",onClick:w,children:"Logout"}),s.jsx(je,{className:"rounded-lg border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-100 transition hover:border-slate-500",to:"/account",children:"Account"}),S?x?s.jsx("a",{className:"rounded-lg bg-slate-800 px-4 py-2 text-sm font-semibold text-slate-100 transition hover:bg-slate-700",href:N,children:"Admin"}):s.jsx(je,{className:"rounded-lg bg-slate-800 px-4 py-2 text-sm font-semibold text-slate-100 transition hover:bg-slate-700",to:N,children:"Admin"}):null]})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"You are not signed in. Continue by signing in or registering."}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx(je,{className:"rounded-lg bg-indigo-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-indigo-400",to:"/login",children:"Sign in"}),s.jsx(je,{className:"rounded-lg border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-100 transition hover:border-slate-500",to:"/register",children:"Register"})]})]})})})})},Ks=({children:l,className:i,...c})=>s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,...c,children:l}),Xu=l=>s.jsxs(Ks,{...l,children:[s.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2"}),s.jsx("path",{d:"M3 7l9 6 9-6"})]}),Zu=l=>s.jsxs(Ks,{...l,children:[s.jsx("rect",{x:"4",y:"11",width:"16",height:"10",rx:"2"}),s.jsx("path",{d:"M8 11V8a4 4 0 0 1 8 0v3"})]}),Qi=l=>s.jsxs(Ks,{...l,children:[s.jsx("path",{d:"M2 12s3.5-6 10-6 10 6 10 6-3.5 6-10 6-10-6-10-6z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Gi=l=>s.jsxs(Ks,{...l,children:[s.jsx("path",{d:"M3 3l18 18"}),s.jsx("path",{d:"M10.5 6.7A10.9 10.9 0 0 1 12 6c6.5 0 10 6 10 6a18 18 0 0 1-3.1 3.9"}),s.jsx("path",{d:"M8.6 8.7A5 5 0 0 0 16 15.4"}),s.jsx("path",{d:"M6.5 6.5C3.8 8.1 2 12 2 12s3.5 6 10 6c1.6 0 3-.3 4.2-.9"})]}),Xh=l=>s.jsxs(Ks,{...l,children:[s.jsx("path",{d:"M10 17l5-5-5-5"}),s.jsx("path",{d:"M15 12H3"}),s.jsx("path",{d:"M21 19V5a2 2 0 0 0-2-2h-6"})]}),Zh=l=>s.jsxs(Ks,{...l,children:[s.jsx("circle",{cx:"10",cy:"8",r:"4"}),s.jsx("path",{d:"M2 20c0-3.3 3.6-6 8-6"}),s.jsx("path",{d:"M19 8v6"}),s.jsx("path",{d:"M16 11h6"})]}),ex=l=>s.jsx(Ks,{...l,children:s.jsx("path",{d:"m4 12 5 5L20 6"})});function _t({traceId:l,errorId:i,debug:c,compact:d=!1}){return!l&&!i&&!c?null:s.jsxs("details",{className:`rounded-lg border border-slate-700/60 bg-slate-950/50 ${d?"px-3 py-2 text-xs":"px-4 py-3 text-sm"}`,children:[s.jsx("summary",{className:"cursor-pointer font-semibold text-slate-200",children:"Diagnostics"}),s.jsxs("div",{className:"mt-3 space-y-2 text-slate-300",children:[i&&s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-slate-200",children:"Error ID:"})," ",i]}),l&&s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-slate-200",children:"Trace ID:"})," ",l]}),c?.exceptionType&&s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-slate-200",children:"Exception:"})," ",c.exceptionType]}),(c?.path||c?.method)&&s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-slate-200",children:"Request:"})," ",[c.method,c.path].filter(Boolean).join(" ")]}),c?.innerExceptionSummary&&s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-slate-200",children:"Inner exception:"})," ",c.innerExceptionSummary]}),c?.stackTrace&&s.jsx("pre",{className:"max-h-64 overflow-auto rounded-md bg-slate-900/70 p-3 text-xs text-slate-200",children:c.stackTrace})]})]})}function bt({message:l}){return l?s.jsx("p",{className:"mt-1 text-xs text-rose-300",children:l}):null}const tx=()=>{const l=Qe(),[i]=kn(),c=i.get("returnUrl"),[d,m]=u.useState(""),[h,f]=u.useState(""),[N,x]=u.useState(!1),[S,w]=u.useState(null),[v,j]=u.useState({}),[A,U]=u.useState(!1),T=async y=>{y.preventDefault(),w(null),j({}),U(!0);try{const P=await kh({emailOrUsername:d,password:h,returnUrl:c});if(P.requiresTwoFactor){const R=P.mfaToken;if(!R)throw new Error("Missing MFA token. Please try again.");const L=new URLSearchParams;L.set("token",R),(P.redirectTo??c)&&L.set("returnUrl",P.redirectTo??c??""),l(`/mfa?${L.toString()}`,{replace:!0});return}const b=no(P.redirectTo??c??null);b?window.location.href=b:l("/",{replace:!0})}catch(P){if(P&&typeof P=="object"&&"status"in P){const b=P;w(b),j(b.fieldErrors??{})}else w(new Ee({status:500,detail:"Unable to sign in."}))}finally{U(!1)}};return s.jsx("main",{className:"mx-auto w-full max-w-md",children:s.jsx(ts,{title:"Sign in",description:"Access your AstraId account securely.",children:s.jsxs("form",{className:"flex flex-col gap-4",onSubmit:T,noValidate:!0,children:[S?s.jsxs("div",{className:"flex flex-col gap-3",role:"alert","aria-live":"polite",children:[s.jsx(ht,{variant:"error",children:S.detail??S.message}),s.jsx(_t,{traceId:S.traceId,errorId:S.errorId,debug:S.debug,compact:!0})]}):null,s.jsxs("div",{children:[s.jsx("label",{htmlFor:"login-identity",className:"text-sm text-slate-200",children:"Email or username"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(Xu,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-500","aria-hidden":"true"}),s.jsx("input",{id:"login-identity",className:"w-full rounded-lg border border-slate-700 bg-slate-950 py-2 pl-10 pr-3 text-white outline-none transition focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40",type:"text",value:d,onChange:y=>m(y.target.value),autoComplete:"username","aria-invalid":!!v.emailOrUsername?.[0],"aria-describedby":v.emailOrUsername?.[0]?"login-identity-error":void 0,required:!0})]}),s.jsx("div",{id:"login-identity-error",children:s.jsx(bt,{message:v.emailOrUsername?.[0]})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[s.jsx("label",{htmlFor:"login-password",className:"text-sm text-slate-200",children:"Password"}),s.jsx(je,{className:"text-xs text-indigo-300 transition hover:text-indigo-200 focus:outline-none focus:ring-2 focus:ring-indigo-500",to:"/forgot-password",children:"Forgot password?"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zu,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-500","aria-hidden":"true"}),s.jsx("input",{id:"login-password",className:"w-full rounded-lg border border-slate-700 bg-slate-950 py-2 pl-10 pr-11 text-white outline-none transition focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40",type:N?"text":"password",value:h,onChange:y=>f(y.target.value),autoComplete:"current-password","aria-invalid":!!v.password?.[0],"aria-describedby":v.password?.[0]?"login-password-error":void 0,required:!0}),s.jsx("button",{type:"button",onClick:()=>x(y=>!y),className:"absolute right-2 top-1/2 inline-flex -translate-y-1/2 rounded p-1 text-slate-300 transition hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":N?"Hide password":"Show password","aria-pressed":N,children:N?s.jsx(Gi,{className:"h-4 w-4","aria-hidden":"true"}):s.jsx(Qi,{className:"h-4 w-4","aria-hidden":"true"})})]}),s.jsx("div",{id:"login-password-error",children:s.jsx(bt,{message:v.password?.[0]})})]}),s.jsxs("button",{type:"submit",disabled:A,className:"inline-flex items-center justify-center gap-2 rounded-lg bg-indigo-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-slate-950 disabled:cursor-not-allowed disabled:opacity-60",children:[s.jsx(Xh,{className:"h-4 w-4","aria-hidden":"true"}),A?"Signing in...":"Sign in"]})]})})})},sx=()=>{const l=Qe(),[i]=kn(),c=i.get("returnUrl"),[d,m]=u.useState(""),[h,f]=u.useState(""),[N,x]=u.useState(""),[S,w]=u.useState(!1),[v,j]=u.useState(!1),[A,U]=u.useState(null),[T,y]=u.useState({}),[P,b]=u.useState(!1),R=async L=>{L.preventDefault(),U(null),y({}),b(!0);try{await Eh({email:d,password:h,confirmPassword:N,returnUrl:c});const O=no(c);O?window.location.href=O:l("/",{replace:!0})}catch(O){if(O&&typeof O=="object"&&"status"in O){const B=O;U(B),y(B.fieldErrors??{})}else U(new Ee({status:500,detail:"Unable to register."}))}finally{b(!1)}};return s.jsx("main",{className:"mx-auto w-full max-w-md",children:s.jsx(ts,{title:"Create account",description:"Set up your AstraId account.",children:s.jsxs("form",{className:"flex flex-col gap-4",onSubmit:R,noValidate:!0,children:[A?s.jsxs("div",{className:"flex flex-col gap-3",role:"alert","aria-live":"polite",children:[s.jsx(ht,{variant:"error",children:A.detail??A.message}),s.jsx(_t,{traceId:A.traceId,errorId:A.errorId,debug:A.debug,compact:!0})]}):null,s.jsxs("div",{children:[s.jsx("label",{htmlFor:"register-email",className:"text-sm text-slate-200",children:"Email"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(Xu,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-500","aria-hidden":"true"}),s.jsx("input",{id:"register-email",className:"w-full rounded-lg border border-slate-700 bg-slate-950 py-2 pl-10 pr-3 text-white outline-none transition focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40",type:"email",value:d,onChange:L=>m(L.target.value),autoComplete:"email","aria-invalid":!!T.email?.[0],"aria-describedby":T.email?.[0]?"register-email-error":void 0,required:!0})]}),s.jsx("div",{id:"register-email-error",children:s.jsx(bt,{message:T.email?.[0]})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"register-password",className:"text-sm text-slate-200",children:"Password"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(Zu,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-500","aria-hidden":"true"}),s.jsx("input",{id:"register-password",className:"w-full rounded-lg border border-slate-700 bg-slate-950 py-2 pl-10 pr-11 text-white outline-none transition focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40",type:S?"text":"password",value:h,onChange:L=>f(L.target.value),autoComplete:"new-password","aria-invalid":!!T.password?.[0],"aria-describedby":T.password?.[0]?"register-password-error":"register-password-hint",required:!0}),s.jsx("button",{type:"button",onClick:()=>w(L=>!L),className:"absolute right-2 top-1/2 inline-flex -translate-y-1/2 rounded p-1 text-slate-300 transition hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":S?"Hide password":"Show password","aria-pressed":S,children:S?s.jsx(Gi,{className:"h-4 w-4","aria-hidden":"true"}):s.jsx(Qi,{className:"h-4 w-4","aria-hidden":"true"})})]}),s.jsx("p",{id:"register-password-hint",className:"mt-2 text-xs text-slate-400",children:"Use at least 8 characters with a mix of letters and numbers."}),s.jsx("div",{id:"register-password-error",children:s.jsx(bt,{message:T.password?.[0]})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"register-confirm-password",className:"text-sm text-slate-200",children:"Confirm password"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(ex,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-500","aria-hidden":"true"}),s.jsx("input",{id:"register-confirm-password",className:"w-full rounded-lg border border-slate-700 bg-slate-950 py-2 pl-10 pr-11 text-white outline-none transition focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/40",type:v?"text":"password",value:N,onChange:L=>x(L.target.value),autoComplete:"new-password","aria-invalid":!!T.confirmPassword?.[0],"aria-describedby":T.confirmPassword?.[0]?"register-confirm-password-error":void 0,required:!0}),s.jsx("button",{type:"button",onClick:()=>j(L=>!L),className:"absolute right-2 top-1/2 inline-flex -translate-y-1/2 rounded p-1 text-slate-300 transition hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":v?"Hide confirmed password":"Show confirmed password","aria-pressed":v,children:v?s.jsx(Gi,{className:"h-4 w-4","aria-hidden":"true"}):s.jsx(Qi,{className:"h-4 w-4","aria-hidden":"true"})})]}),s.jsx("div",{id:"register-confirm-password-error",children:s.jsx(bt,{message:T.confirmPassword?.[0]})})]}),s.jsxs("button",{type:"submit",disabled:P,className:"inline-flex items-center justify-center gap-2 rounded-lg bg-indigo-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-slate-950 disabled:cursor-not-allowed disabled:opacity-60",children:[s.jsx(Zh,{className:"h-4 w-4","aria-hidden":"true"}),P?"Creating account...":"Create account"]}),s.jsxs("div",{className:"text-xs text-slate-400",children:["Already have an account?"," ",s.jsx(je,{className:"hover:text-slate-200 focus:outline-none focus:ring-2 focus:ring-indigo-500",to:"/login",children:"Sign in"})]})]})})})},nx=()=>{const[l,i]=u.useState(""),[c,d]=u.useState(null),[m,h]=u.useState({}),[f,N]=u.useState(""),[x,S]=u.useState(!1),w=async v=>{v.preventDefault(),d(null),h({}),N(""),S(!0);try{const j=await Ph({email:l});N(j.message??"If an account exists for this email, youll receive a password reset link shortly.")}catch(j){if(j&&typeof j=="object"&&"status"in j){const A=j;d(A),h(A.fieldErrors??{})}else d(new Ee({status:500,detail:"Unable to send request."}))}finally{S(!1)}};return s.jsx("div",{className:"mx-auto max-w-md",children:s.jsx(ts,{title:"Reset password",description:"Enter the email to reset your password.",children:s.jsxs("form",{className:"flex flex-col gap-4",onSubmit:w,children:[c?s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx(ht,{variant:"error",children:c.detail??c.message}),s.jsx(_t,{traceId:c.traceId,errorId:c.errorId,debug:c.debug,compact:!0})]}):null,f?s.jsx(ht,{variant:"success",children:f}):null,s.jsxs("label",{className:"text-sm text-slate-200",children:["Email",s.jsx("input",{className:"mt-2 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white",type:"email",value:l,onChange:v=>i(v.target.value),autoComplete:"email",required:!0}),s.jsx(bt,{message:m.email?.[0]})]}),s.jsx("button",{type:"submit",disabled:x,className:"rounded-lg bg-indigo-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-indigo-400 disabled:cursor-not-allowed disabled:opacity-60",children:x?"Sending...":"Send reset link"})]})})})};function em({title:l,message:i}){return s.jsx("div",{className:"mx-auto max-w-md",children:s.jsx(ts,{title:l,children:s.jsxs("div",{className:"space-y-4 text-sm text-slate-300",children:[s.jsx("p",{children:i}),s.jsx(je,{to:"/account/security",className:"inline-flex rounded-lg bg-indigo-500 px-4 py-2 font-semibold text-white transition hover:bg-indigo-400",children:"Go to account security"})]})})})}const rx=()=>{const{status:l}=Cs(),[i]=kn(),c=u.useMemo(()=>i.get("email")??"",[i]),d=u.useMemo(()=>i.get("token")??"",[i]),[m,h]=u.useState(c),[f,N]=u.useState(d),[x,S]=u.useState(""),[w,v]=u.useState(""),[j,A]=u.useState(null),[U,T]=u.useState({}),[y,P]=u.useState(""),[b,R]=u.useState(!1),L=async O=>{O.preventDefault(),A(null),T({}),P(""),R(!0);try{await Rh({email:m,token:f,newPassword:x,confirmPassword:w}),P("Your password was updated. Please sign in again.")}catch(B){if(B&&typeof B=="object"&&"status"in B){const M=B;A(M),T(M.fieldErrors??{})}else A(new Ee({status:500,detail:"Unable to reset password."}))}finally{R(!1)}};return l==="authenticated"?s.jsx(em,{title:"Reset password",message:"You are already signed in. Reset password links are intended for signed-out recovery flows."}):s.jsx("div",{className:"mx-auto max-w-md",children:s.jsx(ts,{title:"Set a new password",children:s.jsxs("form",{className:"flex flex-col gap-4",onSubmit:L,children:[j?s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx(ht,{variant:"error",children:j.detail??j.message}),s.jsx(_t,{traceId:j.traceId,errorId:j.errorId,debug:j.debug,compact:!0})]}):null,y?s.jsx(ht,{variant:"success",children:y}):null,s.jsxs("label",{className:"text-sm text-slate-200",children:["Email",s.jsx("input",{className:"mt-2 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white",type:"email",value:m,onChange:O=>h(O.target.value),autoComplete:"email",required:!0}),s.jsx(bt,{message:U.email?.[0]})]}),s.jsxs("label",{className:"text-sm text-slate-200",children:["Reset token",s.jsx("input",{className:"mt-2 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white",type:"text",value:f,onChange:O=>N(O.target.value),required:!0}),s.jsx(bt,{message:U.token?.[0]})]}),s.jsxs("label",{className:"text-sm text-slate-200",children:["New password",s.jsx("input",{className:"mt-2 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white",type:"password",value:x,onChange:O=>S(O.target.value),autoComplete:"new-password",required:!0}),s.jsx(bt,{message:U.newPassword?.[0]})]}),s.jsxs("label",{className:"text-sm text-slate-200",children:["Confirm new password",s.jsx("input",{className:"mt-2 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white",type:"password",value:w,onChange:O=>v(O.target.value),autoComplete:"new-password",required:!0}),s.jsx(bt,{message:U.confirmPassword?.[0]})]}),s.jsx("button",{type:"submit",disabled:b,className:"rounded-lg bg-indigo-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-indigo-400 disabled:cursor-not-allowed disabled:opacity-60",children:b?"Saving...":"Update password"}),y?s.jsx("div",{className:"text-xs text-slate-400",children:s.jsx(je,{className:"hover:text-slate-200",to:"/login",children:"Back to sign in"})}):null]})})})},lx=()=>{const{status:l}=Cs(),[i]=kn(),c=u.useMemo(()=>i.get("email")??"",[i]),d=u.useMemo(()=>i.get("token")??"",[i]),[m,h]=u.useState(c),[f,N]=u.useState(d),[x,S]=u.useState(null),[w,v]=u.useState({}),[j,A]=u.useState(""),[U,T]=u.useState(!1),y=async P=>{P.preventDefault(),S(null),v({}),A(""),T(!0);try{await Th({email:m,token:f}),A("Your account has been activated. Please sign in.")}catch(b){if(b&&typeof b=="object"&&"status"in b){const R=b;S(R),v(R.fieldErrors??{})}else S(new Ee({status:500,detail:"Unable to activate account."}))}finally{T(!1)}};return l==="authenticated"?s.jsx(em,{title:"Activate account",message:"You are already signed in. Account activation links are intended for email verification flows."}):s.jsx("div",{className:"mx-auto flex max-w-3xl flex-col gap-6",children:s.jsx(ts,{title:"Activate account",children:s.jsxs("form",{className:"flex flex-col gap-4",onSubmit:y,children:[x?s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx(ht,{variant:"error",children:x.detail??x.message}),s.jsx(_t,{traceId:x.traceId,errorId:x.errorId,debug:x.debug,compact:!0})]}):null,j?s.jsx(ht,{variant:"success",children:j}):null,s.jsxs("label",{className:"text-sm text-slate-200",children:["Email",s.jsx("input",{className:"mt-2 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white",type:"email",value:m,onChange:P=>h(P.target.value),autoComplete:"email",required:!0}),s.jsx(bt,{message:w.email?.[0]})]}),s.jsxs("label",{className:"text-sm text-slate-200",children:["Verification token",s.jsx("input",{className:"mt-2 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white",type:"text",value:f,onChange:P=>N(P.target.value),required:!0}),s.jsx(bt,{message:w.token?.[0]})]}),s.jsx("button",{type:"submit",disabled:U,className:"rounded-lg bg-indigo-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-indigo-400 disabled:cursor-not-allowed disabled:opacity-60",children:U?"Activating...":"Activate account"}),j?s.jsx("div",{className:"text-xs text-slate-400",children:s.jsx(je,{className:"hover:text-slate-200",to:"/login",children:"Back to sign in"})}):null]})})})};function ax({children:l}){const{session:i,isLoading:c}=Cs(),d=xt();if(c)return s.jsx("div",{className:"py-10 text-sm text-slate-400",children:"Loading account..."});if(!i?.isAuthenticated){const m=`${d.pathname}${d.search}${d.hash}`;return s.jsx(Bs,{to:`/login?returnUrl=${encodeURIComponent(m)}`,replace:!0})}return s.jsx(s.Fragment,{children:l})}const ix=({isActive:l})=>`flex items-center gap-2 rounded-xl px-3 py-2 text-sm transition ${l?"bg-indigo-500/20 text-indigo-100 ring-1 ring-indigo-400/30":"text-slate-300 hover:bg-slate-800 hover:text-white"}`;function xu({to:l,icon:i,label:c,onClick:d,end:m}){return s.jsxs(Vs,{to:l,className:ix,onClick:d,end:m,children:[i,c]})}function ox(){const l=et.profile,i=et.security;return s.jsxs("nav",{className:"space-y-1",children:[s.jsx("p",{className:"px-3 pb-2 text-xs font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Account"}),s.jsx(xu,{to:"/account",label:"Profile",icon:s.jsx(l,{className:"h-[17px] w-[17px]"}),end:!0}),s.jsx(xu,{to:"/account/security",label:"Security",icon:s.jsx(i,{className:"h-[17px] w-[17px]"})})]})}function cx(){return s.jsx("section",{className:"rounded-2xl border border-slate-800 bg-slate-900/30 p-4 md:p-6",children:s.jsxs("div",{className:"grid gap-5 md:grid-cols-[220px_1fr]",children:[s.jsx("aside",{children:s.jsx(ox,{})}),s.jsx("main",{children:s.jsx(Bl,{})})]})})}const dx=()=>Ge("/auth/me"),ux=l=>Ge("/auth/me/change-password",{method:"POST",body:JSON.stringify({currentPassword:l.currentPassword,newPassword:l.newPassword,confirmNewPassword:l.confirmPassword})}),mx=l=>Ge("/auth/me/change-email/start",{method:"POST",body:JSON.stringify({newEmail:l.newEmail,password:l.currentPassword})}),px=l=>Ge("/auth/me/change-email/confirm",{method:"POST",body:JSON.stringify(l)}),fx=()=>Ge("/auth/me/signout-all",{method:"POST"}),hx=(l=20)=>Ge(`/auth/me/security-events?take=${l}`),tm=()=>Ge("/auth/mfa/status"),xx=()=>Ge("/auth/mfa/setup/start",{method:"POST"}),gx=l=>Ge("/auth/mfa/setup/confirm",{method:"POST",body:JSON.stringify(l)}),vx=()=>Ge("/auth/mfa/recovery-codes/regenerate",{method:"POST"}),yx=l=>Ge("/auth/mfa/disable",{method:"POST",body:JSON.stringify(l)}),Nn=(l,i)=>l&&typeof l=="object"&&"kind"in l&&(l.kind==="problem"||l.kind==="validation")?l:l instanceof Ee?l.fieldErrors&&Object.keys(l.fieldErrors).length>0?{kind:"validation",status:l.status,title:l.title,detail:l.detail??l.message,traceId:l.traceId,errorId:l.errorId,fieldErrors:l.fieldErrors}:{kind:"problem",status:l.status,title:l.title,detail:l.detail??l.message,traceId:l.traceId,errorId:l.errorId}:l instanceof Error?{kind:"problem",status:500,title:"Unexpected error",detail:l.message}:{kind:"problem",status:500,title:"Unexpected error",detail:i};function Nt({kind:l,message:i}){return s.jsx(ht,{variant:l==="success"?"success":"error",children:i})}function Ps({title:l,description:i,actions:c}){return s.jsxs("div",{className:"mb-6 flex flex-col gap-3 border-b border-slate-800 pb-4 sm:flex-row sm:items-start sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:l}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:i})]}),c?s.jsx("div",{className:"shrink-0",children:c}):null]})}function jx(){const[l,i]=u.useState(null),[c,d]=u.useState(null),[m,h]=u.useState(null),f=Qe();u.useEffect(()=>{(async()=>{try{const[S,w]=await Promise.all([dx(),tm().catch(()=>null)]);i(S),d(w)}catch(S){const w=Nn(S,"Unable to load account dashboard.");if(w.status===401||w.status===403)return f(`/login?returnUrl=${encodeURIComponent("/account")}`,{replace:!0});h(w)}})()},[f]);const N=et.profile,x=et.security;return s.jsxs("div",{className:"space-y-5",children:[s.jsx(Ps,{title:"Profile",description:"Your self-service account dashboard."}),m?.kind==="problem"&&s.jsx(Nt,{kind:"error",message:m.detail??m.title??"Unable to load account dashboard."}),s.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/50 p-4",children:[s.jsx("p",{className:"text-xs text-slate-400",children:"Email"}),s.jsx("p",{className:"mt-2 font-semibold text-white",children:l?.email??"Unknown"})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/50 p-4",children:[s.jsx("p",{className:"text-xs text-slate-400",children:"Email status"}),s.jsx("p",{className:"mt-2 font-semibold text-white",children:l?.emailConfirmed?"Verified":"Verification required"})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/50 p-4",children:[s.jsx("p",{className:"text-xs text-slate-400",children:"MFA"}),s.jsx("p",{className:"mt-2 font-semibold text-white",children:c?.enabled?"Enabled":"Disabled"})]})]}),s.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[s.jsxs(je,{to:"/account",className:"rounded-xl border border-slate-700 p-4 hover:border-indigo-400",children:[s.jsx(N,{className:`${Ll} mb-2 text-indigo-300`}),s.jsx("p",{className:"font-semibold text-white",children:"Profile"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Review your account identity details."})]}),s.jsxs(je,{to:"/account/security",className:"rounded-xl border border-slate-700 p-4 hover:border-indigo-400",children:[s.jsx(x,{className:`${Ll} mb-2 text-indigo-300`}),s.jsx("p",{className:"font-semibold text-white",children:"Security"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Open enterprise security controls and activity pages."})]}),qi.map(S=>{const w=S.icon;return s.jsxs(je,{to:S.to,className:"rounded-xl border border-slate-700 p-4 hover:border-indigo-400",children:[s.jsx(w,{className:`${Ll} mb-2 text-indigo-300`}),s.jsx("p",{className:"font-semibold text-white",children:S.label}),s.jsx("p",{className:"text-sm text-slate-400",children:S.description})]},S.key)})]})]})}function Ws({label:l,error:i,className:c,...d}){return s.jsxs("label",{className:"text-sm text-slate-200",children:[l,s.jsx("input",{...d,className:`mt-2 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white ${c??""}`}),i?s.jsx("p",{className:"mt-1 text-xs text-rose-300",children:i}):null]})}function bx(){const[l,i]=u.useState(""),[c,d]=u.useState(""),[m,h]=u.useState(""),[f,N]=u.useState(!0),[x,S]=u.useState(!1),[w,v]=u.useState(""),[j,A]=u.useState(null),U=Qe(),T=async P=>{P.preventDefault(),S(!0),v(""),A(null);try{await ux({currentPassword:l,newPassword:c,confirmPassword:m,signOutOtherSessions:f}),i(""),d(""),h(""),v("Password updated.")}catch(b){const R=Nn(b,"Unable to update password.");if(R.status===401||R.status===403){U(`/login?returnUrl=${encodeURIComponent("/account/security/password")}`,{replace:!0});return}A(R)}finally{S(!1)}},y=j?.kind==="validation"?j.fieldErrors:{};return s.jsxs("div",{children:[s.jsx(Ps,{title:"Password",description:"Change your password and optionally sign out other sessions."}),s.jsxs("form",{className:"space-y-3 rounded-xl border border-slate-800 bg-slate-950/50 p-5",onSubmit:T,children:[w?s.jsx(Nt,{kind:"success",message:w}):null,j?.kind==="problem"?s.jsx(Nt,{kind:"error",message:`${j.detail??"Request failed."}${j.errorId?` (Error ID: ${j.errorId})`:""}`}):null,j?.kind==="validation"?s.jsx(Nt,{kind:"error",message:Object.values(j.fieldErrors).flat()[0]??"Validation failed."}):null,s.jsx(Ws,{label:"Current password",type:"password",value:l,onChange:P=>i(P.target.value),error:y.currentPassword?.[0],autoComplete:"current-password"}),s.jsx(Ws,{label:"New password",type:"password",value:c,onChange:P=>d(P.target.value),error:y.newPassword?.[0],autoComplete:"new-password"}),s.jsx(Ws,{label:"Confirm password",type:"password",value:m,onChange:P=>h(P.target.value),error:y.confirmPassword?.[0],autoComplete:"new-password"}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[s.jsx("input",{type:"checkbox",checked:f,onChange:P=>N(P.target.checked)}),"Sign out other sessions"]}),s.jsx("button",{type:"submit",disabled:x,className:"rounded-lg bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",children:x?"Updating...":"Update password"})]})]})}function Nx(){const[l,i]=u.useState(""),[c,d]=u.useState(""),[m,h]=u.useState(!1),[f,N]=u.useState(""),[x,S]=u.useState(null),w=Qe(),v=async A=>{A.preventDefault(),h(!0),S(null),N("");try{await mx({newEmail:l,currentPassword:c,returnUrl:"/account/security/email/confirm"}),d(""),N("Check your email for a confirmation link.")}catch(U){const T=Nn(U,"Unable to request email change.");if(T.status===401||T.status===403){w(`/login?returnUrl=${encodeURIComponent("/account/security/email")}`,{replace:!0});return}S(T)}finally{h(!1)}},j=x?.kind==="validation"?x.fieldErrors:{};return s.jsxs("div",{children:[s.jsx(Ps,{title:"Email",description:"Request a change for your account email address."}),s.jsxs("form",{className:"space-y-3 rounded-xl border border-slate-800 bg-slate-950/50 p-5",onSubmit:v,children:[f?s.jsx(Nt,{kind:"success",message:f}):null,x?.kind==="problem"?s.jsx(Nt,{kind:"error",message:`${x.detail??"Request failed."}${x.errorId?` (Error ID: ${x.errorId})`:""}`}):null,x?.kind==="validation"?s.jsx(Nt,{kind:"error",message:Object.values(x.fieldErrors).flat()[0]??"Validation failed."}):null,s.jsx(Ws,{label:"New email",type:"email",value:l,onChange:A=>i(A.target.value),error:j.newEmail?.[0],autoComplete:"email"}),s.jsx(Ws,{label:"Current password",type:"password",value:c,onChange:A=>d(A.target.value),error:j.currentPassword?.[0],autoComplete:"current-password"}),s.jsx("button",{type:"submit",disabled:m,className:"rounded-lg bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",children:m?"Submitting...":"Send confirmation link"})]})]})}function wx(){const[l,i]=u.useState(!1),[c,d]=u.useState(null),m=async()=>{if(window.confirm("Sign out all active sessions? You will need to sign in again on other devices.")){i(!0);try{const h=await fx();d(h.message)}finally{i(!1)}}};return s.jsxs("div",{className:"space-y-3",children:[s.jsx(Ps,{title:"Sign out all sessions",description:"Invalidate all active sessions except the current flow."}),c?s.jsx(Nt,{kind:"success",message:c}):null,s.jsx("button",{type:"button",onClick:m,disabled:l,className:"rounded-lg border border-rose-700 px-4 py-2 text-sm font-semibold text-rose-200 hover:border-rose-500 disabled:opacity-60",children:l?"Signing out...":"Sign out all sessions"})]})}function Sx({message:l="Loading..."}){return s.jsx("p",{className:"text-sm text-slate-400",children:l})}function kx(){const[l,i]=u.useState(null),[c,d]=u.useState(null),[m,h]=u.useState(""),[f,N]=u.useState(""),[x,S]=u.useState([]),[w,v]=u.useState(null),[j,A]=u.useState(""),[U,T]=u.useState(!0),[y,P]=u.useState(!1),b=Qe(),R=async()=>{T(!0);try{const B=await tm();i(B)}catch(B){const M=Nn(B,"Unable to load MFA status.");if(M.status===401||M.status===403){b(`/login?returnUrl=${encodeURIComponent("/account/security/mfa")}`,{replace:!0});return}v(M)}finally{T(!1)}};u.useEffect(()=>{R()},[]);const L=async B=>{P(!0),v(null),A("");try{await B(),await R()}catch(M){v(Nn(M,"Unable to complete MFA action."))}finally{P(!1)}},O=u.useMemo(()=>x.join(`
`),[x]);return s.jsxs("div",{children:[s.jsx(Ps,{title:"MFA",description:"Manage multi-factor authentication for your account."}),U?s.jsx(Sx,{message:"Loading MFA status..."}):null,j?s.jsx(Nt,{kind:"success",message:j}):null,w?.kind==="problem"?s.jsx(Nt,{kind:"error",message:`${w.detail??"Request failed."}${w.errorId?` (Error ID: ${w.errorId})`:""}`}):null,s.jsxs("div",{className:"mt-4 space-y-4",children:[s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/50 p-4 text-sm text-slate-200",children:[s.jsxs("p",{children:["MFA status: ",s.jsx("span",{className:"font-semibold text-white",children:l?.enabled?"Enabled":"Disabled"})]}),s.jsxs("p",{className:"mt-1",children:["Recovery codes left: ",l?.recoveryCodesLeft??0]})]}),l?.enabled?s.jsxs("div",{className:"space-y-3",children:[s.jsx(Ws,{label:"Authenticator code",value:f,onChange:B=>N(B.target.value),error:w?.kind==="validation"?w.fieldErrors.code?.[0]:void 0}),s.jsx("button",{type:"button",className:"rounded-lg border border-rose-700 px-4 py-2 text-sm font-semibold text-rose-200 hover:border-rose-500",disabled:y||!f,onClick:()=>L(async()=>{await yx({code:f}),N(""),A("MFA disabled.")}),children:"Disable MFA"}),s.jsx("button",{type:"button",className:"rounded-lg border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-500",disabled:y,onClick:()=>L(async()=>{const B=await vx();S(B.recoveryCodes),A("Recovery codes generated.")}),children:"Generate recovery codes"})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{type:"button",className:"rounded-lg bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",disabled:y,onClick:()=>L(async()=>{const B=await xx();d(B)}),children:"Start MFA setup"}),c?s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/50 p-4",children:[s.jsx("p",{className:"text-sm text-slate-300",children:"Shared key"}),s.jsx("code",{className:"mt-2 block rounded bg-slate-900 px-2 py-2 text-xs text-slate-100",children:c.sharedKey}),s.jsx(Ws,{label:"Verification code",value:m,onChange:B=>h(B.target.value),error:w?.kind==="validation"?w.fieldErrors.code?.[0]:void 0}),s.jsx("button",{type:"button",className:"rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-white hover:bg-emerald-400",disabled:y||!m,onClick:()=>L(async()=>{const B=await gx({code:m});S(B.recoveryCodes),h(""),A("MFA enabled.")}),children:"Verify & enable MFA"})]}):null]}),x.length>0?s.jsx("textarea",{readOnly:!0,value:O,className:"min-h-[130px] w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 font-mono text-xs text-slate-100"}):null]})]})}function Cx(){const[l,i]=u.useState([]);return u.useEffect(()=>{hx(20).then(i).catch(()=>i([]))},[]),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Ps,{title:"Recent login activity",description:"Review recent sign-in events, MFA outcomes, and logout activity."}),s.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-800",children:s.jsxs("table",{className:"min-w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-slate-900/80 text-slate-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2",children:"Time (UTC)"}),s.jsx("th",{className:"px-3 py-2",children:"Event"}),s.jsx("th",{className:"px-3 py-2",children:"IP"}),s.jsx("th",{className:"px-3 py-2",children:"User agent"})]})}),s.jsxs("tbody",{children:[l.map(c=>s.jsxs("tr",{className:"border-t border-slate-800",children:[s.jsx("td",{className:"px-3 py-2 text-slate-300",children:new Date(c.timestampUtc).toLocaleString()}),s.jsx("td",{className:"px-3 py-2 text-white",children:c.eventType}),s.jsx("td",{className:"px-3 py-2 text-slate-300",children:c.ipAddress??"-"}),s.jsx("td",{className:"px-3 py-2 text-slate-400",children:(c.userAgent??"-").slice(0,72)})]},c.id)),l.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-3 py-4 text-slate-400",children:"No recent security events."})}):null]})]})})]})}function Ex(){const i=xt().pathname==="/account/security";return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ps,{title:"Security",description:"Manage account protections with dedicated security controls."}),s.jsx("div",{className:"flex flex-wrap gap-2",children:qi.map(c=>{const d=c.icon;return s.jsx(Vs,{to:c.to,className:({isActive:m})=>`rounded-lg border px-3 py-2 text-xs font-semibold uppercase tracking-wide ${m?"border-indigo-400 bg-indigo-500/20 text-indigo-100":"border-slate-700 text-slate-300 hover:border-slate-500"}`,children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(d,{className:"h-4 w-4"}),c.label]})},c.key)})}),i?s.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:qi.map(c=>{const d=c.icon;return s.jsxs(je,{to:c.to,className:"rounded-xl border border-slate-700 bg-slate-950/40 p-4 text-sm text-slate-100 transition hover:border-indigo-400",children:[s.jsx(d,{className:`${Ll} mb-2 text-indigo-300`}),s.jsx("p",{className:"font-semibold",children:c.label}),s.jsx("p",{className:"mt-1 text-slate-400",children:c.description})]},c.key)})}):s.jsx(Bl,{})]})}function Px(){const[l]=kn(),i=u.useMemo(()=>l.get("userId")??"",[l]),c=u.useMemo(()=>l.get("email")??"",[l]),d=u.useMemo(()=>l.get("token")??"",[l]),[m,h]=u.useState(!1),[f,N]=u.useState(""),[x,S]=u.useState(null),w=async()=>{h(!0),N(""),S(null);try{const v=await px({userId:i,newEmail:c,token:d});N(v.message??"Your email has been updated.")}catch(v){S(Nn(v,"Unable to confirm email change."))}finally{h(!1)}};return s.jsxs("div",{className:"mx-auto max-w-2xl",children:[s.jsx(Ps,{title:"Confirm email change",description:"Complete your requested email change."}),f?s.jsx(Nt,{kind:"success",message:f}):null,x?.kind==="problem"?s.jsx(Nt,{kind:"error",message:`${x.detail??"Request failed."}${x.errorId?` (Error ID: ${x.errorId})`:""}`}):null,x?.kind==="validation"?s.jsx(Nt,{kind:"error",message:Object.values(x.fieldErrors).flat()[0]??"Validation failed."}):null,s.jsx("button",{type:"button",onClick:w,disabled:!i||!c||!d||m,className:"mt-4 rounded-lg bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",children:m?"Confirming...":"Confirm email change"}),s.jsx("div",{className:"mt-4 text-sm",children:s.jsx(je,{className:"text-indigo-300 hover:text-indigo-200",to:f?"/account/security/email":"/login",children:f?"Back to Account Email":"Back to login"})})]})}const Rx=()=>{const[l]=kn(),i=Qe(),c=l.get("token")??"",d=l.get("returnUrl"),[m,h]=u.useState(""),[f,N]=u.useState(!1),[x,S]=u.useState(!1),[w,v]=u.useState(null),[j,A]=u.useState({}),[U,T]=u.useState(!1),y=async P=>{P.preventDefault(),v(null),A({}),T(!0);try{const b=await Ch({mfaToken:c,code:m,useRecoveryCode:f,rememberMachine:x}),R=no(b.redirectTo??d??null);R?window.location.href=R:i("/",{replace:!0})}catch(b){if(b&&typeof b=="object"&&"status"in b){const R=b;v(R),A(R.fieldErrors??{})}else v(new Ee({status:500,detail:"Unable to verify the code."}))}finally{T(!1)}};return s.jsx("div",{className:"mx-auto max-w-md",children:s.jsx(ts,{title:"Two-factor authentication",description:"Enter the code from your authenticator app or use a recovery code.",children:s.jsxs("form",{className:"flex flex-col gap-4",onSubmit:y,children:[w?s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx(ht,{variant:"error",children:w.detail??w.message}),s.jsx(_t,{traceId:w.traceId,errorId:w.errorId,debug:w.debug,compact:!0})]}):null,c?null:s.jsx(ht,{variant:"error",children:"The MFA challenge is no longer available. Please sign in again."}),s.jsxs("label",{className:"text-sm text-slate-200",children:[f?"Recovery code":"Verification code",s.jsx("input",{className:"mt-2 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white",type:"text",value:m,onChange:P=>h(P.target.value),autoComplete:"one-time-code",required:!0}),s.jsx(bt,{message:j.code?.[0]})]}),s.jsxs("label",{className:"flex items-center gap-3 text-xs text-slate-400",children:[s.jsx("input",{type:"checkbox",checked:f,onChange:P=>N(P.target.checked)}),"Use a recovery code"]}),f?null:s.jsxs("label",{className:"flex items-center gap-3 text-xs text-slate-400",children:[s.jsx("input",{type:"checkbox",checked:x,onChange:P=>S(P.target.checked)}),"Trust this device"]}),s.jsx("button",{type:"submit",disabled:U||!c,className:"rounded-lg bg-indigo-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-indigo-400 disabled:cursor-not-allowed disabled:opacity-60",children:U?"Verifying...":"Continue"}),s.jsx("div",{className:"text-xs text-slate-400",children:s.jsx(je,{className:"hover:text-slate-200",to:"/login",children:"Back to sign in"})})]})})})};function ao({title:l,description:i,hint:c}){const d=xt(),m=new URLSearchParams(d.search),h=m.get("traceId")??void 0,f=m.get("errorId")??void 0;return s.jsx(ts,{title:l,description:i,children:s.jsxs("div",{className:"flex flex-col gap-4 text-sm text-slate-300",children:[c?s.jsx("p",{children:c}):null,s.jsx(_t,{traceId:h,errorId:f,compact:!0})]})})}function gu(){return s.jsx(ao,{title:"404",description:"The requested resource was not found.",hint:"Check the URL or use the navigation to find what you need."})}function Tx(){return s.jsx(ao,{title:"403",description:"You dont have permission to access this page.",hint:"If you believe this is a mistake, contact an administrator."})}function Ix(){return s.jsx(ao,{title:"500",description:"Something went wrong on our side. Please try again.",hint:"If the issue persists, contact support and share the trace ID."})}const Ux="/admin",vu="/admin",sm=l=>l?l.startsWith("/")?l:`/${l}`:"/",he=l=>sm(l),Lx=l=>sm(l),Dx=l=>{const i=Lx(l);return i==="/"?vu:`${vu}${i}`},Ax="/*",_x=({isActive:l})=>`rounded-md px-3 py-2 text-sm font-medium transition ${l?"bg-slate-800 text-white":"text-slate-300 hover:bg-slate-900"}`;function yn({title:l,items:i}){return s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"px-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:l}),s.jsx("div",{className:"flex flex-col gap-1",children:i.map(c=>s.jsx(Vs,{to:c.to,className:_x,end:c.end,children:c.label},c.to))})]})}function Ox({children:l}){return s.jsx("div",{className:"min-h-screen bg-slate-950 text-slate-100",children:s.jsxs("div",{className:"flex min-h-screen",children:[s.jsxs("aside",{className:"w-64 border-r border-slate-900 bg-slate-950/80",children:[s.jsxs("div",{className:"px-6 py-6",children:[s.jsx(je,{to:he("/"),className:"text-lg font-semibold text-white",children:"AstraId Admin"}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Authorization server control panel"})]}),s.jsxs("nav",{className:"flex flex-col gap-6 px-4 pb-6",children:[s.jsx(yn,{title:"OIDC",items:[{to:he("/"),label:"Overview",end:!0},{to:he("/oidc/clients"),label:"Clients"},{to:he("/oidc/scopes"),label:"Scopes"},{to:he("/oidc/resources"),label:"Resources"}]}),s.jsx(yn,{title:"Konfigurace",items:[{to:he("/config/permissions"),label:"Permissions"},{to:he("/config/roles"),label:"Roles"},{to:he("/config/api-resources"),label:"API Endpoints"}]}),s.jsx(yn,{title:"Uivatel",items:[{to:he("/users"),label:"Users"}]}),s.jsx(yn,{title:"Audit",items:[{to:he("/audit"),label:"Audit log"}]}),s.jsx(yn,{title:"Security",items:[{to:he("/security/keys"),label:"Signing Keys"},{to:he("/security/rotation"),label:"Rotation Policy"},{to:he("/security/tokens"),label:"Token Policy"},{to:he("/security/incidents"),label:"Incidents"},{to:he("/security/revocation"),label:"Revocation"},{to:he("/security/dataprotection"),label:"DataProtection"},{to:he("/security/user-lifecycle"),label:"User Lifecycle"}]}),s.jsx(yn,{title:"Diagnostics",items:[{to:he("/diagnostics/errors"),label:"Errors"}]})]})]}),s.jsxs("div",{className:"flex min-h-screen flex-1 flex-col",children:[s.jsx("header",{className:"border-b border-slate-900 bg-slate-950/60 px-8 py-4",children:s.jsxs("div",{className:"text-sm text-slate-400",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:"Admin"}),"  AuthServer"]})}),s.jsx("main",{className:"flex w-full flex-1 flex-col gap-6 px-8 py-8",children:l})]})]})})}const Yi=new EventTarget;function ge(l){Yi.dispatchEvent(new CustomEvent("toast",{detail:l}))}function Mx(l){const i=c=>{l(c.detail)};return Yi.addEventListener("toast",i),()=>Yi.removeEventListener("toast",i)}const zx={error:"border-red-400/40 bg-red-950/80 text-red-100",success:"border-emerald-400/40 bg-emerald-950/80 text-emerald-100",info:"border-slate-400/40 bg-slate-900/80 text-slate-100"};function Fx(){const[l,i]=u.useState([]);return u.useEffect(()=>Mx(c=>{const d={...c,tone:c.tone??"info",id:crypto.randomUUID()};i(m=>[...m,d]),setTimeout(()=>{i(m=>m.filter(h=>h.id!==d.id))},4e3)}),[]),l.length===0?null:s.jsx("div",{className:"fixed right-6 top-6 z-50 flex w-full max-w-sm flex-col gap-3",children:l.map(c=>s.jsx("div",{className:`rounded-lg border px-4 py-3 text-sm shadow-lg backdrop-blur ${zx[c.tone??"info"]}`,children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{children:c.message}),c.diagnostics?s.jsx(_t,{traceId:c.diagnostics.traceId,errorId:c.diagnostics.errorId,debug:c.diagnostics.debug,compact:!0}):null]})},c.id))})}function $x(){return s.jsxs(s.Fragment,{children:[s.jsx(Ox,{children:s.jsx(Bl,{})}),s.jsx(Fx,{})]})}function Bx({children:l}){const{session:i,isLoading:c}=Cs(),d=xt();if(c)return s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950 text-slate-100",children:"Natm..."});if(!i?.isAuthenticated){const m=Dx(`${d.pathname}${d.search}${d.hash}`),h=`/login?returnUrl=${encodeURIComponent(m)}`;return s.jsx(Bs,{to:h,replace:!0})}return Yu(i.permissions)?s.jsx(s.Fragment,{children:l}):s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950 text-slate-100",children:s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-8 text-center",children:[s.jsx("h1",{className:"text-xl font-semibold text-white",children:"Access denied"}),s.jsx("p",{className:"mt-2 text-sm text-slate-400",children:"Nemte oprvnn pro administraci systmu."})]})})}const Vx=so,Wx=l=>l.startsWith("http")?l:`${Vx}${l.startsWith("/")?"":"/"}${l}`;async function q(l,i={}){const{suppressToast:c,...d}=i,m=await fetch(Wx(l),{credentials:"include",...d,headers:{"Content-Type":"application/json",...d.headers??{}}});if(!m.ok){const f=await qu(m);throw c||ge({message:f.message,tone:"error",diagnostics:{traceId:f.traceId,errorId:f.errorId,debug:f.debug}}),f}if(m.status===204)return null;const h=await m.text();return h?JSON.parse(h):null}function Hx(){const[l,i]=u.useState(null),[c,d]=u.useState(!0);return u.useEffect(()=>{let m=!0;return(async()=>{try{const f=await q("/admin/api/me");m&&i(f)}finally{m&&d(!1)}})(),()=>{m=!1}},[]),s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-900/40 p-6",children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Admin Dashboard"}),s.jsx("p",{className:"mt-2 text-sm text-slate-300",children:"Manage OAuth clients, scopes, users, and audit activity for the AuthServer."})]}),s.jsxs("section",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-900/40 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Session"}),c&&s.jsx("p",{className:"mt-3 text-sm text-slate-400",children:"Loading session..."}),!c&&l&&s.jsxs("div",{className:"mt-3 space-y-2 text-sm text-slate-300",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-400",children:"Signed in as:"})," ",l.email??l.userName??l.userId]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-400",children:"Roles:"})," ",l.roles.length?l.roles.join(", "):"None"]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-400",children:"Permissions:"})," ",l.permissions.length?l.permissions.join(", "):"None"]})]})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-900/40 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Quick links"}),s.jsxs("div",{className:"mt-3 flex flex-col gap-2 text-sm",children:[s.jsx(je,{className:"text-indigo-300 hover:text-indigo-200",to:he("/oidc/clients"),children:"Manage clients"}),s.jsx(je,{className:"text-indigo-300 hover:text-indigo-200",to:he("/oidc/scopes"),children:"Manage scopes"}),s.jsx(je,{className:"text-indigo-300 hover:text-indigo-200",to:he("/users"),children:"Review users"}),s.jsx(je,{className:"text-indigo-300 hover:text-indigo-200",to:he("/audit"),children:"Audit log"})]})]})]})]})}function Kx(){const[l,i]=u.useState(""),[c,d]=u.useState(1),[m,h]=u.useState(10),[f,N]=u.useState(null),[x,S]=u.useState(!1);u.useEffect(()=>{let j=!0;return(async()=>{S(!0);const U=new URLSearchParams;l.trim()&&U.set("search",l.trim()),U.set("page",String(c)),U.set("pageSize",String(m));try{const T=await q(`/admin/api/clients?${U.toString()}`);j&&N(T)}finally{j&&S(!1)}})(),()=>{j=!1}},[c,m,l]);const w=f?Math.max(1,Math.ceil(f.totalCount/f.pageSize)):1,v=async j=>{const A=await q(`/admin/api/clients/${j.id}/toggle`,{method:"POST",body:JSON.stringify({enabled:!j.enabled})});N(U=>U&&{...U,items:U.items.map(T=>T.id===j.id?{...T,enabled:A.enabled}:T)})};return s.jsxs("section",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Clients"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Manage OpenIddict client applications."})]}),s.jsx(je,{to:he("/oidc/clients/new"),className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400",children:"New client"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3 rounded-lg border border-slate-800 bg-slate-900/40 p-4",children:[s.jsx("input",{className:"w-full max-w-sm rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500",placeholder:"Search by client ID or display name...",value:l,onChange:j=>{i(j.target.value),d(1)}}),s.jsx("select",{className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100",value:m,onChange:j=>{h(Number(j.target.value)),d(1)},children:[10,20,30].map(j=>s.jsxs("option",{value:j,children:[j," / page"]},j))})]}),s.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-800",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-slate-900 text-slate-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 font-medium",children:"Client ID"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Display name"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Type"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Status"}),s.jsx("th",{className:"px-4 py-3 font-medium text-right",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-800 bg-slate-950/40",children:[x&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-slate-400",children:"Loading clients..."})}),!x&&f?.items.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-slate-400",children:"No clients yet  create one."})}),f?.items.map(j=>s.jsxs("tr",{className:"text-slate-100",children:[s.jsx("td",{className:"px-4 py-3 font-medium",children:j.clientId}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:j.displayName??"-"}),s.jsx("td",{className:"px-4 py-3 capitalize text-slate-300",children:j.clientType}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${j.enabled?"bg-emerald-500/20 text-emerald-200":"bg-rose-500/20 text-rose-200"}`,children:j.enabled?"Enabled":"Disabled"})}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-3",children:[s.jsx("button",{type:"button",className:"text-sm font-semibold text-slate-300 hover:text-slate-100",onClick:()=>v(j),children:j.enabled?"Disable":"Enable"}),s.jsx(je,{to:he(`/oidc/clients/${j.id}`),className:"text-sm font-semibold text-indigo-300 hover:text-indigo-200",children:"Edit"})]})})]},j.id))]})]})}),f&&s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-sm text-slate-300",children:[s.jsxs("span",{children:["Page ",f.page," of ",w,"  ",f.totalCount," clients"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"rounded-md border border-slate-700 px-3 py-1 text-slate-200 disabled:opacity-40",onClick:()=>d(j=>Math.max(1,j-1)),disabled:f.page<=1,children:"Previous"}),s.jsx("button",{className:"rounded-md border border-slate-700 px-3 py-1 text-slate-200 disabled:opacity-40",onClick:()=>d(j=>Math.min(w,j+1)),disabled:f.page>=w,children:"Next"})]})]})]})}function re({label:l,hint:i,tooltip:c,error:d,required:m,children:h}){return s.jsxs("div",{className:"flex flex-col gap-2 text-sm text-slate-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"font-medium text-slate-200",children:[l,m&&s.jsx("span",{className:"ml-1 text-rose-300",children:"*"})]}),c&&s.jsx(Ss,{tooltip:c})]}),h,i&&s.jsx(qx,{children:i}),s.jsx(Jx,{message:d})]})}function Ss({tooltip:l}){return s.jsxs("span",{className:"group relative inline-flex",children:[s.jsx("button",{type:"button",className:"flex h-5 w-5 items-center justify-center rounded-full border border-slate-600 text-xs text-slate-300 hover:border-slate-400 hover:text-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-400","aria-label":"Help",children:"?"}),s.jsx("span",{className:"pointer-events-none absolute left-1/2 top-full z-10 mt-2 w-64 -translate-x-1/2 rounded-md border border-slate-700 bg-slate-950 p-2 text-xs text-slate-200 opacity-0 shadow-lg transition-opacity group-hover:opacity-100 group-focus-within:opacity-100",children:l})]})}function Jx({message:l}){return l?s.jsx("p",{className:"text-xs text-rose-300",children:l}):null}function qx({children:l}){return s.jsx("p",{className:"text-xs text-slate-400",children:l})}function Ke({message:l,diagnostics:i}){return l?s.jsxs("div",{className:"flex flex-col gap-3 rounded-lg border border-rose-500/40 bg-rose-500/10 px-4 py-3 text-sm text-rose-200",children:[s.jsx("span",{children:l}),i?s.jsx(_t,{traceId:i.traceId,errorId:i.errorId,debug:i.debug}):null]}):null}function yu({value:l,onChange:i,onBlur:c,placeholder:d,error:m,lineErrors:h=[],minRows:f=6}){const N=!!m||h.length>0,x=S=>{i(S.target.value)};return s.jsxs("div",{children:[s.jsx("textarea",{className:`w-full rounded-md border bg-slate-950 px-3 py-2 text-slate-100 ${N?"border-rose-400":"border-slate-700"}`,rows:f,value:l,onChange:x,onBlur:c,placeholder:d}),h.length>0&&s.jsx("div",{className:"mt-2 space-y-1 text-xs text-rose-300",children:h.map((S,w)=>s.jsxs("div",{children:[S.line>0?`Line ${S.line}: `:"",S.message]},`${S.line}-${w}`))})]})}const Qx=/^[a-z0-9][a-z0-9:_.-]*$/,Gx=/^[a-z0-9][a-z0-9:_.-]*$/,Yx=/^[a-zA-Z0-9][a-zA-Z0-9_.-]*$/,_l=3,Ol=100,ju=3,bu=100,Xx=["authorization_code","refresh_token","client_credentials"];function Nu(l){const i=l.trim().toLowerCase();return i?i.length<_l||i.length>Ol?{value:i,error:`Scope name must be between ${_l} and ${Ol} characters.`}:Qx.test(i)?{value:i,error:null}:{value:i,error:"Scope name may use lowercase letters, numbers, :, ., _, -."}:{value:i,error:"Scope name is required."}}function wu(l){const i=l.trim().toLowerCase();return i?i.length<_l||i.length>Ol?{value:i,error:`Resource name must be between ${_l} and ${Ol} characters.`}:Gx.test(i)?{value:i,error:null}:{value:i,error:"Resource name may use lowercase letters, numbers, :, ., _, -."}:{value:i,error:"Resource name is required."}}function Su(l){const i=l.trim();return i?i.length<ju||i.length>bu?{value:i,error:`Client ID must be between ${ju} and ${bu} characters.`}:Yx.test(i)?{value:i,error:null}:{value:i,error:"Client ID may use letters, numbers, underscores, dots, and dashes."}:{value:i,error:"Client ID is required."}}function ku(l){if(!l||l.length===0)return"Select at least one grant type.";const i=l.filter(c=>!Xx.includes(c));return i.length>0?`Unsupported grant types: ${i.join(", ")}.`:null}function Cu(l,i,c){return l==="public"&&i.includes("client_credentials")?"Public clients cannot use client_credentials.":l==="confidential"&&c?"PKCE can only be required for public clients.":c&&!i.includes("authorization_code")?"PKCE requires authorization_code grant type.":null}function Tl(l){return l.split(/\r?\n/).map(i=>i.trim()).filter(Boolean)}function Eu(l,i){const c=l.split(/\r?\n/),d=[],m=c.map(h=>h.trim()).filter(h=>h.length>0);return m.forEach((h,f)=>{if(/\s/.test(h)){d.push({line:f+1,message:"URI must not contain whitespace."});return}try{const N=new URL(h);if(N.hash){d.push({line:f+1,message:"URI must not include a fragment (#)."});return}const x=N.protocol==="https:",S=N.hostname==="localhost"||N.hostname==="127.0.0.1"||N.hostname==="[::1]";!x&&!(S&&N.protocol==="http:")&&d.push({line:f+1,message:"Use HTTPS unless it is a localhost callback."})}catch{d.push({line:f+1,message:"Must be an absolute URL."})}}),i&&m.length===0&&d.push({line:0,message:"At least one redirect URI is required."}),{normalized:m,errors:d}}function Pu(l){return l.length===0?null:l.some(i=>i.line===0)?l.find(i=>i.line===0)?.message??null:"One or more redirect URIs are invalid. Review the list below."}function We(l){if(l instanceof Ee){const i=l.fieldErrors??{},c=l.generalErrors?.[0]??l.detail??l.message??null;return{fieldErrors:i,generalError:c,diagnostics:{traceId:l.traceId,errorId:l.errorId,debug:l.debug}}}return{fieldErrors:{},generalError:"Unexpected error."}}const Zx={clientId:"",displayName:"",clientType:"public",enabled:!0,grantTypes:["authorization_code","refresh_token"],pkceRequired:!0,scopes:[],redirectUrisText:"",postLogoutRedirectUrisText:""};function nm({mode:l,clientId:i}){const c=Qe(),d=xt(),[m,h]=u.useState(Zx),[f,N]=u.useState([]),[x,S]=u.useState(l==="edit"),[w,v]=u.useState(!1),[j,A]=u.useState({}),[U,T]=u.useState(null),[y,P]=u.useState(void 0),[b,R]=u.useState([]),[L,O]=u.useState([]),[B,M]=u.useState(()=>d.state?.secret??null),[fe,Pe]=u.useState(()=>!!B),[Y,G]=u.useState(null),[xe,Re]=u.useState([]),[ke,$e]=u.useState([]),[Te,Ce]=u.useState(""),[J,ae]=u.useState(null),[$,E]=u.useState("SpaPublic"),z=m.clientType==="confidential",de=u.useMemo(()=>[{value:"authorization_code",label:"Authorization Code"},{value:"refresh_token",label:"Refresh Token"},{value:"client_credentials",label:"Client Credentials"}],[]);u.useEffect(()=>{(async()=>{const Z=new URLSearchParams({page:"1",pageSize:"200"}),ce=await q(`/admin/api/oidc/scopes?${Z.toString()}`);N(ce.items)})(),(async()=>{const Z=await q("/admin/api/client-profiles/rules"),ce=await q("/admin/api/client-presets");Re(Z.profiles),$e(ce),ce.length>0&&(Ce(ce[0].id),E(ce[0].profile))})()},[]),u.useEffect(()=>{Te&&q(`/admin/api/client-presets/${Te}`).then(F=>{ae(F),E(F.profile),l==="create"&&h(Q=>({...Q,clientType:F.defaults.clientType==="confidential"?"confidential":"public",pkceRequired:F.defaults.pkceRequired,grantTypes:F.defaults.grantTypes,redirectUrisText:F.defaults.redirectUris.join(`
`),postLogoutRedirectUrisText:F.defaults.postLogoutRedirectUris.join(`
`),scopes:F.defaults.scopes}))})},[Te,l]),u.useEffect(()=>{if(l!=="edit"||!i)return;let F=!0;return(async()=>{S(!0);try{const Z=await q(`/admin/api/clients/${i}`);if(!F)return;h({clientId:Z.clientId,displayName:Z.displayName??"",clientType:Z.clientType.toLowerCase()==="confidential"?"confidential":"public",enabled:Z.enabled,grantTypes:Z.grantTypes,pkceRequired:Z.pkceRequired,scopes:Z.scopes,redirectUrisText:Z.redirectUris.join(`
`),postLogoutRedirectUrisText:Z.postLogoutRedirectUris.join(`
`)}),E(Z.profile??"SpaPublic"),Z.presetId&&Ce(Z.presetId)}finally{F&&S(!1)}})(),()=>{F=!1}},[i,l]);const pe=F=>{const Q={},Z=Su(F.clientId);Z.error&&(Q.clientId=Z.error);const ce=ku(F.grantTypes);ce&&(Q.grantTypes=ce);const Wt=Cu(F.clientType,F.grantTypes,F.pkceRequired);Wt&&(Q.pkceRequired=Wt);const ss=Eu(F.redirectUrisText,F.grantTypes.includes("authorization_code"));R(ss.errors),ss.errors.length>0&&(Q.redirectUris=Pu(ss.errors)??void 0);const Ot=Eu(F.postLogoutRedirectUrisText,!1);return O(Ot.errors),Ot.errors.length>0&&(Q.postLogoutRedirectUris=Pu(Ot.errors)??void 0),A(Q),Q},be=async F=>{F.preventDefault();const Q=pe(m);if(!(Object.keys(Q).length>0)){T(null),P(void 0),v(!0);try{const Z={clientId:m.clientId.trim(),displayName:m.displayName.trim()||null,clientType:m.clientType,enabled:m.enabled,grantTypes:m.grantTypes,pkceRequired:m.clientType==="public"?m.pkceRequired:!1,scopes:m.scopes,redirectUris:Tl(m.redirectUrisText),postLogoutRedirectUris:Tl(m.postLogoutRedirectUrisText),profile:$,presetId:Te,presetVersion:J?.version,overrides:{clientType:m.clientType,pkceRequired:m.pkceRequired,grantTypes:m.grantTypes,scopes:m.scopes,redirectUris:Tl(m.redirectUrisText),postLogoutRedirectUris:Tl(m.postLogoutRedirectUrisText)}};if(l==="create"){const ce=await q("/admin/api/clients",{method:"POST",body:JSON.stringify(Z),suppressToast:!0});ce.clientSecret?(M(ce.clientSecret),Pe(!0),G(null)):(M(null),Pe(!1),G("Client created. Secret was not displayed for security reasons.")),ge({message:"Client created.",tone:"success"}),c(he(`/oidc/clients/${ce.client.id}`),{state:{secret:ce.clientSecret}});return}if(!i)return;await q(`/admin/api/clients/${i}`,{method:"PUT",body:JSON.stringify(Z),suppressToast:!0}),ge({message:"Client updated.",tone:"success"})}catch(Z){if(Z instanceof Ee){const ce=We(Z);A({clientId:ce.fieldErrors.clientId?.[0],grantTypes:ce.fieldErrors.grantTypes?.[0],pkceRequired:ce.fieldErrors.pkceRequired?.[0],redirectUris:ce.fieldErrors.redirectUris?.[0],postLogoutRedirectUris:ce.fieldErrors.postLogoutRedirectUris?.[0],scopes:ce.fieldErrors.scopes?.[0],presetId:ce.fieldErrors.presetId?.[0]}),T(ce.generalError??"Unable to save client."),P(ce.diagnostics);return}T("Unable to save client."),P(void 0)}finally{v(!1)}}},ve=async()=>{if(!i)return;const F=await q(`/admin/api/clients/${i}/rotate-secret`,{method:"POST"});F.clientSecret?(M(F.clientSecret),Pe(!0),G(null)):(M(null),Pe(!1),G("Secret rotated. New secret was not displayed for security reasons."))};return x?s.jsx("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-6 text-slate-300",children:"Loading client..."}):s.jsxs("form",{onSubmit:be,className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:l==="create"?"Create client":"Edit client"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Configure OpenIddict client settings and permissions."})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[l==="edit"&&z&&s.jsx("button",{type:"button",onClick:ve,className:"rounded-md border border-amber-300/50 px-4 py-2 text-sm font-semibold text-amber-200 hover:bg-amber-400/10",children:"Rotate secret"}),s.jsx("button",{type:"submit",disabled:w,className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",children:w?"Saving...":"Save"})]})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-900/40 p-6",children:[s.jsx(Ke,{message:U,diagnostics:y}),l==="create"&&s.jsxs("div",{className:"mb-6 grid gap-5 md:grid-cols-2",children:[s.jsx(re,{label:"Client profile",hint:"Server-published profile rules.",children:s.jsx("select",{className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-slate-100",value:$,onChange:F=>{const Q=F.target.value;E(Q);const Z=ke.find(ce=>ce.profile===Q);Z&&Ce(Z.id)},children:xe.map(F=>s.jsx("option",{value:F.profile,children:F.profile},F.profile))})}),s.jsx(re,{label:"Preset",error:j.presetId,hint:"Preset defaults and locked fields are provided by server.",children:s.jsx("select",{className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-slate-100",value:Te,onChange:F=>Ce(F.target.value),children:ke.filter(F=>F.profile===$).map(F=>s.jsxs("option",{value:F.id,children:[F.name," (v",F.version,")"]},F.id))})})]}),s.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[s.jsx(re,{label:"Client ID",tooltip:"Identifiktor klienta v OIDC. Pouvej 3100 znak bez mezer. Pklad: web-spa, cms-admin.",hint:"Pouvej psmena, sla, _, . nebo -. Lowercase doporueno.",error:j.clientId,required:!0,children:s.jsx("input",{className:`rounded-md border bg-slate-950 px-3 py-2 text-slate-100 ${j.clientId?"border-rose-400":"border-slate-700"}`,value:m.clientId,onChange:F=>h(Q=>({...Q,clientId:F.target.value})),onBlur:()=>{const F=Su(m.clientId);A(Q=>({...Q,clientId:F.error??void 0}))},placeholder:"web-spa",required:!0})}),s.jsx(re,{label:"Display name",tooltip:"Lidsk nzev klienta pro admin pehledy. Neovlivuje protokolov hodnoty.",hint:"Voliteln, doporueno pro lep orientaci.",children:s.jsx("input",{className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-slate-100",value:m.displayName,onChange:F=>h(Q=>({...Q,displayName:F.target.value})),placeholder:"CMS Admin SPA"})}),s.jsx(re,{label:"Client type",tooltip:"Public klient je SPA/mobile bez bezpenho loit tajemstv. Confidential klient je server-to-server s uloenm secret.",hint:"Public = SPA/mobile. Confidential = backend.",children:s.jsxs("select",{className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-slate-100",value:m.clientType,onChange:F=>{const Q=F.target.value;h(Z=>({...Z,clientType:Q})),A(Z=>({...Z,pkceRequired:void 0,grantTypes:void 0}))},disabled:J?.lockedFields.includes("clientType"),children:[s.jsx("option",{value:"public",children:"Public"}),s.jsx("option",{value:"confidential",children:"Confidential"})]})}),s.jsx(re,{label:"Status",tooltip:"Zakzan klienta zastav autorizace i tokeny.",hint:"Vypni, pokud nechce klienta doasn pouvat.",children:s.jsxs("label",{className:"flex items-center gap-3 text-sm text-slate-200",children:[s.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-600 bg-slate-950 text-indigo-500",checked:m.enabled,onChange:F=>h(Q=>({...Q,enabled:F.target.checked}))}),"Enabled"]})})]})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-900/40 p-6",children:[s.jsx(re,{label:"Grant types",tooltip:"Grant types definuj, jak klient zsk token. Pro SPA typicky authorization_code + refresh_token.",hint:"Vyber alespo jeden grant type.",error:j.grantTypes,required:!0,children:s.jsx("div",{className:"flex flex-wrap gap-4",children:de.map(F=>s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-200",children:[s.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-600 bg-slate-950 text-indigo-500",checked:m.grantTypes.includes(F.value),onChange:Q=>{const Z=Q.target.checked?[...m.grantTypes,F.value]:m.grantTypes.filter(ce=>ce!==F.value);h(ce=>({...ce,grantTypes:Z})),A(ce=>({...ce,grantTypes:ku(Z)??void 0}))},disabled:J?.lockedFields.includes("grantTypes")||m.clientType==="public"&&F.value==="client_credentials"}),F.label]},F.value))})}),m.clientType==="public"&&s.jsx(re,{label:"PKCE",tooltip:"PKCE zvyuje bezpenost Authorization Code flow u public klient. Pokud je zapnuto, mus bt povolen authorization_code.",hint:"Doporueno pro SPA/mobile klienty.",error:j.pkceRequired,children:s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-200",children:[s.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-600 bg-slate-950 text-indigo-500",checked:m.pkceRequired,onChange:F=>{h(Q=>({...Q,pkceRequired:F.target.checked})),A(Q=>({...Q,pkceRequired:Cu(m.clientType,m.grantTypes,F.target.checked)??void 0}))},disabled:J?.lockedFields.includes("pkceRequired")}),"Require PKCE"]})})]}),s.jsx("section",{className:"rounded-xl border border-slate-800 bg-slate-900/40 p-6",children:s.jsx(re,{label:"Scopes",tooltip:"Vyber scope, kter me klient poadovat. Scopes jsou navzan na API resources.",hint:"Nejprve vytvo scopes v OIDC Scopes.",error:j.scopes,children:s.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[f.map(F=>s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-200",children:[s.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-600 bg-slate-950 text-indigo-500",checked:m.scopes.includes(F.name),onChange:Q=>h(Z=>({...Z,scopes:Q.target.checked?[...Z.scopes,F.name]:Z.scopes.filter(ce=>ce!==F.name)}))}),s.jsx("span",{className:"font-medium",children:F.name}),F.displayName&&s.jsx("span",{className:"text-xs text-slate-400",children:F.displayName})]},F.name)),f.length===0&&s.jsx("p",{className:"text-sm text-slate-400",children:"No scopes yet  create one."})]})})}),s.jsx("section",{className:"rounded-xl border border-slate-800 bg-slate-900/40 p-6",children:s.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[s.jsx(re,{label:"Redirect URIs",tooltip:"URL, kam se vrac uivatel po pihlen. Mus bt absolutn, HTTPS (v dev povol http://localhost).",hint:"1 URI per line. Povinn pro authorization_code.",error:j.redirectUris,required:m.grantTypes.includes("authorization_code"),children:s.jsx(yu,{value:m.redirectUrisText,onChange:F=>h(Q=>({...Q,redirectUrisText:F})),onBlur:()=>pe(m),placeholder:"http://localhost:5173/auth/callback",error:j.redirectUris,lineErrors:b,minRows:5})}),s.jsx(re,{label:"Post logout redirect URIs",tooltip:"URL, kam se vrac uivatel po odhlen. Mus bt absolutn a bez fragmentu.",hint:"1 URI per line. Voliteln.",error:j.postLogoutRedirectUris,children:s.jsx(yu,{value:m.postLogoutRedirectUrisText,onChange:F=>h(Q=>({...Q,postLogoutRedirectUrisText:F})),onBlur:()=>pe(m),placeholder:"https://app.example.com/logout/callback",error:j.postLogoutRedirectUris,lineErrors:L,minRows:5})})]})}),Y&&s.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 p-4 text-sm text-amber-200",children:Y}),fe&&B&&s.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-slate-950/80 px-4",children:s.jsxs("div",{className:"w-full max-w-lg rounded-xl border border-slate-700 bg-slate-900 p-6 text-slate-100 shadow-xl",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Client secret"}),s.jsx("p",{className:"mt-2 text-sm text-slate-300",children:"This secret is shown only once. Copy it and store it securely."}),s.jsx("div",{className:"mt-4 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 font-mono text-sm",children:B}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{type:"button",className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400",onClick:()=>Pe(!1),children:"Close"})})]})})]})}function e0(){return s.jsx(nm,{mode:"create"})}function t0(){const{id:l}=es();return l?s.jsx(nm,{mode:"edit",clientId:l}):null}function Hs({title:l,description:i,confirmLabel:c="Confirm",cancelLabel:d="Cancel",isOpen:m,confirmDisabled:h=!1,onConfirm:f,onCancel:N,children:x}){return m?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/70 px-4",children:s.jsxs("div",{className:"w-full max-w-md rounded-lg border border-slate-800 bg-slate-950 p-6 shadow-lg",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:l}),i&&s.jsx("p",{className:"mt-2 text-sm text-slate-300",children:i}),x&&s.jsx("div",{className:"mt-4 text-sm text-slate-300",children:x}),s.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:N,className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 hover:bg-slate-900",children:d}),s.jsx("button",{type:"button",onClick:f,disabled:h,className:"rounded-md bg-rose-500 px-4 py-2 text-sm font-semibold text-white hover:bg-rose-400 disabled:cursor-not-allowed disabled:opacity-50",children:c})]})]})}):null}function s0(){const[l,i]=u.useState(""),[c,d]=u.useState(1),[m,h]=u.useState(10),[f,N]=u.useState(null),[x,S]=u.useState(!1),[w,v]=u.useState(null),[j,A]=u.useState(null),[U,T]=u.useState(!1);u.useEffect(()=>{let b=!0;return(async()=>{S(!0);const L=new URLSearchParams;l.trim()&&L.set("search",l.trim()),L.set("page",String(c)),L.set("pageSize",String(m));try{const O=await q(`/admin/api/oidc/scopes?${L.toString()}`);b&&N(O)}finally{b&&S(!1)}})(),()=>{b=!1}},[c,m,l]),u.useEffect(()=>{if(!w){A(null);return}let b=!0;return(async()=>{T(!0);try{const L=await q(`/admin/api/oidc/scopes/${w.id}/usage`);b&&A(L)}finally{b&&T(!1)}})(),()=>{b=!1}},[w]);const y=f?Math.max(1,Math.ceil(f.totalCount/f.pageSize)):1,P=async()=>{w&&(await q(`/admin/api/oidc/scopes/${w.id}`,{method:"DELETE"}),ge({message:"Scope deleted.",tone:"success"}),v(null),N(b=>b&&{...b,items:b.items.filter(R=>R.id!==w.id),totalCount:Math.max(0,b.totalCount-1)}))};return s.jsxs("section",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"OIDC Scopes"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Manage OpenIddict scopes and their bound resources."})]}),s.jsx(je,{to:he("/oidc/scopes/new"),className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400",children:"New scope"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3 rounded-lg border border-slate-800 bg-slate-900/40 p-4",children:[s.jsx("input",{className:"w-full max-w-sm rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500",placeholder:"Search by scope name or display name...",value:l,onChange:b=>{i(b.target.value),d(1)}}),s.jsx("select",{className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100",value:m,onChange:b=>{h(Number(b.target.value)),d(1)},children:[10,20,30].map(b=>s.jsxs("option",{value:b,children:[b," / page"]},b))})]}),s.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-800",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-slate-900 text-slate-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 font-medium",children:"Name"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Display name"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Resources"}),s.jsx("th",{className:"px-4 py-3 text-right font-medium",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-800 bg-slate-950/40",children:[x&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-slate-400",children:"Loading scopes..."})}),!x&&f?.items.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-slate-400",children:"No scopes yet  create one."})}),f?.items.map(b=>s.jsxs("tr",{className:"text-slate-100",children:[s.jsx("td",{className:"px-4 py-3 font-medium",children:b.name}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:b.displayName??"-"}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:b.resources.length>0?s.jsx("div",{className:"flex flex-wrap gap-2",children:b.resources.map(R=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-1 text-xs text-slate-200",children:R},R))}):"-"}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-3",children:[s.jsx(je,{to:he(`/oidc/scopes/${b.id}`),className:"text-sm font-semibold text-indigo-300 hover:text-indigo-200",children:"Edit"}),s.jsx("button",{type:"button",className:"text-sm font-semibold text-rose-300 hover:text-rose-200",onClick:()=>v(b),children:"Delete"})]})})]},b.id))]})]})}),f&&s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-sm text-slate-300",children:[s.jsxs("span",{children:["Page ",f.page," of ",y,"  ",f.totalCount," scopes"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"rounded-md border border-slate-700 px-3 py-1 text-slate-200 disabled:opacity-40",onClick:()=>d(b=>Math.max(1,b-1)),disabled:f.page<=1,children:"Previous"}),s.jsx("button",{className:"rounded-md border border-slate-700 px-3 py-1 text-slate-200 disabled:opacity-40",onClick:()=>d(b=>Math.min(y,b+1)),disabled:f.page>=y,children:"Next"})]})]}),s.jsx(Hs,{title:"Delete scope?",description:"This will permanently remove the scope from OpenIddict.",confirmLabel:"Delete",confirmDisabled:(j?.clientCount??0)>0||U,isOpen:!!w,onCancel:()=>v(null),onConfirm:P,children:w&&s.jsxs("div",{className:"space-y-2 text-sm text-slate-300",children:[s.jsxs("p",{children:["Used by"," ",s.jsx("span",{className:"font-semibold text-slate-100",children:U?"...":j?.clientCount??0})," ","clients."]}),(j?.clientCount??0)>0&&s.jsx("p",{className:"text-rose-300",children:"Remove the scope from clients before deleting."})]})})]})}const n0={name:"",displayName:"",description:"",resources:[],claimsText:""};function rm({mode:l,scopeId:i}){const c=Qe(),[d,m]=u.useState(n0),[h,f]=u.useState([]),[N,x]=u.useState({}),[S,w]=u.useState(null),[v,j]=u.useState(void 0),[A,U]=u.useState(l==="edit"),[T,y]=u.useState(!1);u.useEffect(()=>{(async()=>{const R=new URLSearchParams({page:"1",pageSize:"200",includeInactive:"false"}),L=await q(`/admin/api/oidc/resources?${R.toString()}`);f(L.items)})()},[]),u.useEffect(()=>{if(l!=="edit"||!i)return;let b=!0;return(async()=>{U(!0);try{const L=await q(`/admin/api/oidc/scopes/${i}`);if(!b)return;m({name:L.name,displayName:L.displayName??"",description:L.description??"",resources:L.resources,claimsText:L.claims.join(`
`)})}finally{b&&U(!1)}})(),()=>{b=!1}},[l,i]);const P=async b=>{b.preventDefault();const R=Nu(d.name);if(R.error){x({name:R.error});return}x({}),w(null),j(void 0),y(!0);try{const L={name:R.value,displayName:d.displayName.trim()||null,description:d.description.trim()||null,resources:d.resources,claims:r0(d.claimsText)};if(l==="create"){const O=await q("/admin/api/oidc/scopes",{method:"POST",body:JSON.stringify(L),suppressToast:!0});ge({message:"Scope created.",tone:"success"}),c(he(`/oidc/scopes/${O.id}`));return}if(!i)return;await q(`/admin/api/oidc/scopes/${i}`,{method:"PUT",body:JSON.stringify(L),suppressToast:!0}),ge({message:"Scope updated.",tone:"success"})}catch(L){if(L instanceof Ee){const O=We(L);x({name:O.fieldErrors.name?.[0],resources:O.fieldErrors.resources?.[0]}),w(O.generalError??"Unable to save scope."),j(O.diagnostics);return}w("Unable to save scope."),j(void 0)}finally{y(!1)}};return A?s.jsx("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-6 text-slate-300",children:"Loading scope..."}):s.jsxs("form",{onSubmit:P,className:"flex flex-col gap-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:l==="create"?"Create scope":"Edit scope"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Define OpenIddict scopes and their resources."})]}),s.jsx(Ke,{message:S,diagnostics:v}),s.jsxs("div",{className:"grid gap-6 rounded-lg border border-slate-800 bg-slate-900/40 p-6 md:grid-cols-2",children:[s.jsx(re,{label:"Name",tooltip:"OIDC scope identifiktor. Pouvej lowercase, bez mezer. Pklad: api, api.read, cms:write.",hint:"3100 znak, povoleno: a-z, 0-9, :, ., _, -.",error:N.name,required:!0,children:s.jsx("input",{className:`rounded-md border bg-slate-950 px-3 py-2 text-slate-100 ${N.name?"border-rose-400":"border-slate-700"}`,value:d.name,onChange:b=>m(R=>({...R,name:b.target.value})),onBlur:()=>{const b=Nu(d.name);x(R=>({...R,name:b.error??void 0}))},placeholder:"api.read"})}),s.jsx(re,{label:"Display name",tooltip:"Ptelsk nzev scope pro admin pehledy. Neovlivuje protokol.",hint:"Voliteln.",children:s.jsx("input",{className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-slate-100",value:d.displayName,onChange:b=>m(R=>({...R,displayName:b.target.value})),placeholder:"API Read"})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(re,{label:"Description",tooltip:"Intern popis scope pro administrtory.",hint:"Voliteln.",children:s.jsx("textarea",{className:"min-h-[120px] rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-slate-100",value:d.description,onChange:b=>m(R=>({...R,description:b.target.value})),placeholder:"Optional description for admins."})})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(re,{label:"Resources",tooltip:"Resources reprezentuj API/audienci. Scope me mapovat na vce resources.",hint:"Vyber resources, kter tento scope chrn.",error:N.resources,children:s.jsxs("div",{className:"grid gap-2 md:grid-cols-2",children:[h.length===0&&s.jsx("div",{className:"rounded-md border border-dashed border-slate-700 bg-slate-950/40 p-4 text-sm text-slate-400",children:"No active resources yet  create one."}),h.map(b=>s.jsxs("label",{className:"flex items-center gap-3 rounded-md border border-slate-800 bg-slate-950/40 p-3",children:[s.jsx("input",{type:"checkbox",checked:d.resources.includes(b.name),onChange:R=>{const L=new Set(d.resources);R.target.checked?L.add(b.name):L.delete(b.name),m(O=>({...O,resources:Array.from(L)}))},className:"h-4 w-4 rounded border-slate-600 bg-slate-900 text-indigo-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-slate-100",children:b.name}),s.jsx("div",{className:"text-xs text-slate-400",children:b.displayName??"No display name"})]})]},b.id))]})})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(re,{label:"Claims",tooltip:"Voliteln claimy pidvan do tokenu, jeden claim na dek.",hint:"1 claim per line, nap. preferred_username.",children:s.jsx("textarea",{className:"min-h-[120px] rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-slate-100",value:d.claimsText,onChange:b=>m(R=>({...R,claimsText:b.target.value})),placeholder:"custom_claim"})})})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{type:"submit",disabled:T,className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",children:T?"Saving...":"Save scope"}),s.jsx("button",{type:"button",onClick:()=>c(-1),className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 hover:bg-slate-900",children:"Cancel"})]})]})}function r0(l){return l.split(`
`).map(i=>i.trim()).filter(Boolean)}function l0(){return s.jsx(rm,{mode:"create"})}function a0(){const{id:l}=es();return l?s.jsx(rm,{mode:"edit",scopeId:l}):null}function i0(){const[l,i]=u.useState(""),[c,d]=u.useState(1),[m,h]=u.useState(10),[f,N]=u.useState(null),[x,S]=u.useState(!1),[w,v]=u.useState(null),[j,A]=u.useState(null),[U,T]=u.useState(!1);u.useEffect(()=>{let b=!0;return(async()=>{S(!0);const L=new URLSearchParams;l.trim()&&L.set("search",l.trim()),L.set("page",String(c)),L.set("pageSize",String(m)),L.set("includeInactive","true");try{const O=await q(`/admin/api/oidc/resources?${L.toString()}`);b&&N(O)}finally{b&&S(!1)}})(),()=>{b=!1}},[c,m,l]),u.useEffect(()=>{if(!w){A(null);return}let b=!0;return(async()=>{T(!0);try{const L=await q(`/admin/api/oidc/resources/${w.id}/usage`);b&&A(L)}finally{b&&T(!1)}})(),()=>{b=!1}},[w]);const y=f?Math.max(1,Math.ceil(f.totalCount/f.pageSize)):1,P=async()=>{w&&(await q(`/admin/api/oidc/resources/${w.id}`,{method:"DELETE"}),ge({message:"Resource deactivated.",tone:"success"}),v(null),N(b=>b&&{...b,items:b.items.map(R=>R.id===w.id?{...R,isActive:!1}:R)}))};return s.jsxs("section",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"OIDC Resources"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Manage protected API resources used by OpenIddict scopes."})]}),s.jsx(je,{to:he("/oidc/resources/new"),className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400",children:"New resource"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3 rounded-lg border border-slate-800 bg-slate-900/40 p-4",children:[s.jsx("input",{className:"w-full max-w-sm rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500",placeholder:"Search by resource name or description...",value:l,onChange:b=>{i(b.target.value),d(1)}}),s.jsx("select",{className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100",value:m,onChange:b=>{h(Number(b.target.value)),d(1)},children:[10,20,30].map(b=>s.jsxs("option",{value:b,children:[b," / page"]},b))})]}),s.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-800",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-slate-900 text-slate-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 font-medium",children:"Name"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Display name"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Status"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Updated"}),s.jsx("th",{className:"px-4 py-3 text-right font-medium",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-800 bg-slate-950/40",children:[x&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-slate-400",children:"Loading resources..."})}),!x&&f?.items.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-slate-400",children:"No resources yet  create one."})}),f?.items.map(b=>s.jsxs("tr",{className:"text-slate-100",children:[s.jsx("td",{className:"px-4 py-3 font-medium",children:b.name}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:b.displayName??"-"}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${b.isActive?"bg-emerald-500/20 text-emerald-200":"bg-rose-500/20 text-rose-200"}`,children:b.isActive?"Active":"Inactive"})}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:new Date(b.updatedUtc).toLocaleDateString()}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-3",children:[s.jsx(je,{to:he(`/oidc/resources/${b.id}`),className:"text-sm font-semibold text-indigo-300 hover:text-indigo-200",children:"Edit"}),b.isActive&&s.jsx("button",{type:"button",className:"text-sm font-semibold text-rose-300 hover:text-rose-200",onClick:()=>v(b),children:"Deactivate"})]})})]},b.id))]})]})}),f&&s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-sm text-slate-300",children:[s.jsxs("span",{children:["Page ",f.page," of ",y,"  ",f.totalCount," resources"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"rounded-md border border-slate-700 px-3 py-1 text-slate-200 disabled:opacity-40",onClick:()=>d(b=>Math.max(1,b-1)),disabled:f.page<=1,children:"Previous"}),s.jsx("button",{className:"rounded-md border border-slate-700 px-3 py-1 text-slate-200 disabled:opacity-40",onClick:()=>d(b=>Math.min(y,b+1)),disabled:f.page>=y,children:"Next"})]})]}),s.jsx(Hs,{title:"Deactivate resource?",description:"This resource will be hidden from scope selection. Existing scopes will keep the reference.",confirmLabel:"Deactivate",confirmDisabled:(j?.scopeCount??0)>0||U,isOpen:!!w,onCancel:()=>v(null),onConfirm:P,children:w&&s.jsxs("div",{className:"space-y-2 text-sm text-slate-300",children:[s.jsxs("p",{children:["Used by"," ",s.jsx("span",{className:"font-semibold text-slate-100",children:U?"...":j?.scopeCount??0})," ","scopes."]}),(j?.scopeCount??0)>0&&s.jsx("p",{className:"text-rose-300",children:"Remove the resource from scopes before deactivating."})]})})]})}const o0={name:"",displayName:"",description:"",isActive:!0};function lm({mode:l,resourceId:i}){const c=Qe(),[d,m]=u.useState(o0),[h,f]=u.useState({}),[N,x]=u.useState(null),[S,w]=u.useState(void 0),[v,j]=u.useState(l==="edit"),[A,U]=u.useState(!1);u.useEffect(()=>{if(l!=="edit"||!i)return;let y=!0;return(async()=>{j(!0);try{const b=await q(`/admin/api/oidc/resources/${i}`);if(!y)return;m({name:b.name,displayName:b.displayName??"",description:b.description??"",isActive:b.isActive})}finally{y&&j(!1)}})(),()=>{y=!1}},[l,i]);const T=async y=>{y.preventDefault();const P=wu(d.name);if(P.error){f({name:P.error});return}f({}),x(null),w(void 0),U(!0);try{const b={name:P.value,displayName:d.displayName.trim()||null,description:d.description.trim()||null,isActive:d.isActive};if(l==="create"){const R=await q("/admin/api/oidc/resources",{method:"POST",body:JSON.stringify(b),suppressToast:!0});ge({message:"Resource created.",tone:"success"}),c(he(`/oidc/resources/${R.id}`));return}if(!i)return;await q(`/admin/api/oidc/resources/${i}`,{method:"PUT",body:JSON.stringify(b),suppressToast:!0}),ge({message:"Resource updated.",tone:"success"})}catch(b){if(b instanceof Ee){const R=We(b);f({name:R.fieldErrors.name?.[0]}),x(R.generalError??"Unable to save resource."),w(R.diagnostics);return}x("Unable to save resource."),w(void 0)}finally{U(!1)}};return v?s.jsx("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-6 text-slate-300",children:"Loading resource..."}):s.jsxs("form",{onSubmit:T,className:"flex flex-col gap-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:l==="create"?"Create resource":"Edit resource"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Resources are used as scope targets in OpenIddict."})]}),s.jsx(Ke,{message:N,diagnostics:S}),s.jsxs("div",{className:"grid gap-6 rounded-lg border border-slate-800 bg-slate-900/40 p-6 md:grid-cols-2",children:[s.jsx(re,{label:"Name",tooltip:"Resource reprezentuje API/audienci. Pklad: api, cms. Scopes na nj budou ukazovat.",hint:"3100 znak, lowercase bez mezer.",error:h.name,required:!0,children:s.jsx("input",{className:`rounded-md border bg-slate-950 px-3 py-2 text-slate-100 ${h.name?"border-rose-400":"border-slate-700"}`,value:d.name,onChange:y=>m(P=>({...P,name:y.target.value})),onBlur:()=>{const y=wu(d.name);f(P=>({...P,name:y.error??void 0}))},placeholder:"api"})}),s.jsx(re,{label:"Display name",tooltip:"Lidsk nzev resource pro admin pehledy.",hint:"Voliteln.",children:s.jsx("input",{className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-slate-100",value:d.displayName,onChange:y=>m(P=>({...P,displayName:y.target.value})),placeholder:"Core API"})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(re,{label:"Description",tooltip:"Intern popis resource pro administrtory.",hint:"Voliteln.",children:s.jsx("textarea",{className:"min-h-[120px] rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-slate-100",value:d.description,onChange:y=>m(P=>({...P,description:y.target.value})),placeholder:"Optional description for admins."})})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(re,{label:"Status",tooltip:"Deaktivovan resource nelze piazovat ke scope, ale existujc vazby zstvaj.",hint:"Vypni, pokud resource doasn nepouv.",children:s.jsxs("label",{className:"flex items-center gap-3 text-sm text-slate-200",children:[s.jsx("input",{type:"checkbox",checked:d.isActive,onChange:y=>m(P=>({...P,isActive:y.target.checked})),className:"h-4 w-4 rounded border-slate-600 bg-slate-900 text-indigo-400"}),"Active (available for scope selection)"]})})})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{type:"submit",disabled:A,className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",children:A?"Saving...":"Save resource"}),s.jsx("button",{type:"button",onClick:()=>c(-1),className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 hover:bg-slate-900",children:"Cancel"})]})]})}function c0(){return s.jsx(lm,{mode:"create"})}function d0(){const{id:l}=es();return l?s.jsx(lm,{mode:"edit",resourceId:l}):null}function u0(){const[l,i]=u.useState([]),[c,d]=u.useState(!0),[m,h]=u.useState(null),[f,N]=u.useState(null),[x,S]=u.useState(!1);u.useEffect(()=>{let v=!0;return(async()=>{try{const A=await q("/admin/api/permissions");v&&i(A)}finally{v&&d(!1)}})(),()=>{v=!1}},[]),u.useEffect(()=>{if(!m){N(null);return}let v=!0;return(async()=>{S(!0);try{const A=await q(`/admin/api/permissions/${m.id}/usage`);v&&N(A)}finally{v&&S(!1)}})(),()=>{v=!1}},[m]);const w=async()=>{m&&(await q(`/admin/api/permissions/${m.id}`,{method:"DELETE"}),ge({message:"Permission deleted.",tone:"success"}),i(v=>v.filter(j=>j.id!==m.id)),h(null))};return s.jsxs("section",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Permissions"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Manage permission definitions and grouping."})]}),s.jsx(je,{to:he("/config/permissions/new"),className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400",children:"New permission"})]}),s.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-800",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-slate-900 text-slate-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 font-medium",children:"Key"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Description"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Group"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"System"}),s.jsx("th",{className:"px-4 py-3 text-right font-medium",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-800 bg-slate-950/40",children:[c&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-slate-400",children:"Loading permissions..."})}),!c&&l.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-slate-400",children:"No permissions yet  create one."})}),l.map(v=>s.jsxs("tr",{className:"text-slate-100",children:[s.jsx("td",{className:"px-4 py-3 font-medium",children:v.key}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:v.description}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:v.group||"-"}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:v.isSystem?"Yes":"No"}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-3",children:[s.jsx(je,{to:he(`/config/permissions/${v.id}`),className:"text-sm font-semibold text-indigo-300 hover:text-indigo-200",children:"Edit"}),!v.isSystem&&s.jsx("button",{type:"button",className:"text-sm font-semibold text-rose-300 hover:text-rose-200",onClick:()=>h(v),children:"Delete"})]})})]},v.id))]})]})}),s.jsx(Hs,{title:"Delete permission?",description:"This will remove the permission and related mappings.",confirmLabel:"Delete",confirmDisabled:(f?.roleCount??0)>0||(f?.endpointCount??0)>0||x,isOpen:!!m,onCancel:()=>h(null),onConfirm:w,children:m&&s.jsxs("div",{className:"space-y-2 text-sm text-slate-300",children:[s.jsxs("p",{children:["Used by"," ",s.jsx("span",{className:"font-semibold text-slate-100",children:x?"...":f?.roleCount??0})," ","roles and"," ",s.jsx("span",{className:"font-semibold text-slate-100",children:x?"...":f?.endpointCount??0})," ","endpoints."]}),((f?.roleCount??0)>0||(f?.endpointCount??0)>0)&&s.jsx("p",{className:"text-rose-300",children:"Remove assignments before deleting."})]})})]})}const m0=/^[a-z0-9]+(\.[a-z0-9]+)*$/,p0=/^[A-Za-z0-9][A-Za-z0-9 _\.-]*$/;function Ru(l){const i=l.trim();return i?i.length<3||i.length>100?{value:i,error:"Permission key must be between 3 and 100 characters."}:m0.test(i)?{value:i,error:null}:{value:i,error:"Use lowercase letters, numbers, and dots only (e.g. system.admin)."}:{value:i,error:"Permission key is required."}}function Tu(l){const i=l.trim();return i?i.length>250?{value:i,error:"Description must be 250 characters or fewer."}:am(i)?{value:i,error:"Description must not contain control characters."}:{value:i,error:null}:{value:i,error:"Description is required."}}function Iu(l){const i=l.trim();return i?i.length>100?{value:i,error:"Group must be 100 characters or fewer."}:am(i)?{value:i,error:"Group must not contain control characters."}:{value:i,error:null}:{value:i,error:null}}function Il(l){const i=l.trim();return i?i.length<2||i.length>64?{value:i,error:"Role name must be between 2 and 64 characters."}:p0.test(i)?{value:i,error:null}:{value:i,error:"Use letters, numbers, spaces, dots, underscores, or dashes only."}:{value:i,error:"Role name is required."}}function jn(l,i){if(!l||!i)return null;const c=new Date(l),d=new Date(i);return Number.isNaN(c.getTime())||Number.isNaN(d.getTime())?"Date range is invalid.":c>d?"From date must be earlier than to date.":null}function Ml(l){const i=l.trim();return i?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)?{value:i,error:null}:{value:i,error:"Enter a valid email address."}:{value:i,error:"Email is required."}}function am(l){return Array.from(l).some(i=>i<=""||i==="")}const f0={key:"",description:"",group:"",isSystem:!1};function im({mode:l,permissionId:i}){const c=Qe(),[d,m]=u.useState(f0),[h,f]=u.useState({}),[N,x]=u.useState(null),[S,w]=u.useState(void 0),[v,j]=u.useState(l==="edit"),[A,U]=u.useState(!1);u.useEffect(()=>{if(l!=="edit"||!i)return;let y=!0;return(async()=>{j(!0);try{const b=await q(`/admin/api/permissions/${i}`);y&&m({key:b.key,description:b.description,group:b.group,isSystem:b.isSystem})}finally{y&&j(!1)}})(),()=>{y=!1}},[l,i]);const T=async y=>{y.preventDefault();const P=Ru(d.key),b=Tu(d.description),R=Iu(d.group),L={key:P.error??void 0,description:b.error??void 0,group:R.error??void 0};if(f(L),x(null),w(void 0),!Object.values(L).some(Boolean)){U(!0);try{const O={key:P.value,description:b.value,group:R.value,isSystem:d.isSystem};if(l==="create"){await q("/admin/api/permissions",{method:"POST",body:JSON.stringify(O),suppressToast:!0}),ge({message:"Permission created.",tone:"success"}),c(he("/config/permissions"));return}if(!i)return;await q(`/admin/api/permissions/${i}`,{method:"PUT",body:JSON.stringify(O),suppressToast:!0}),ge({message:"Permission updated.",tone:"success"})}catch(O){if(O instanceof Ee){const B=We(O);f({key:B.fieldErrors.key?.[0],description:B.fieldErrors.description?.[0],group:B.fieldErrors.group?.[0]}),x(B.generalError??"Unable to save permission."),w(B.diagnostics);return}x("Unable to save permission."),w(void 0)}finally{U(!1)}}};return v?s.jsx("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-6 text-slate-300",children:"Loading permission..."}):s.jsxs("form",{onSubmit:T,className:"flex flex-col gap-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:l==="create"?"Create permission":"Edit permission"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Configure application permission metadata."})]}),s.jsx(Ke,{message:N,diagnostics:S}),s.jsxs("div",{className:"grid gap-6 rounded-lg border border-slate-800 bg-slate-900/40 p-6 md:grid-cols-2",children:[s.jsx(re,{label:"Key",tooltip:"Jednoznan identifiktor permission. Pouvej teky pro hierarchii a lowercase.",hint:"Pklad: system.admin nebo api.read. Pouv se v policy a claimu permission.",error:h.key,required:!0,children:s.jsx("input",{className:`rounded-md border bg-slate-950 px-3 py-2 text-slate-100 ${h.key?"border-rose-400":"border-slate-700"}`,value:d.key,onChange:y=>m(P=>({...P,key:y.target.value})),onBlur:()=>f(y=>({...y,key:Ru(d.key).error??void 0})),placeholder:"system.admin",disabled:l==="edit"&&d.isSystem})}),s.jsx(re,{label:"Group",tooltip:"Skupina pro vizuln seskupen permission.",hint:"Voliteln, nap. System nebo OIDC.",error:h.group,children:s.jsx("input",{className:`rounded-md border bg-slate-950 px-3 py-2 text-slate-100 ${h.group?"border-rose-400":"border-slate-700"}`,value:d.group,onChange:y=>m(P=>({...P,group:y.target.value})),onBlur:()=>f(y=>({...y,group:Iu(d.group).error??void 0})),placeholder:"System"})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(re,{label:"Description",tooltip:"Krtk popis pro administrtory.",hint:"Povinn.",error:h.description,required:!0,children:s.jsx("textarea",{className:`min-h-[120px] rounded-md border bg-slate-950 px-3 py-2 text-slate-100 ${h.description?"border-rose-400":"border-slate-700"}`,value:d.description,onChange:y=>m(P=>({...P,description:y.target.value})),onBlur:()=>f(y=>({...y,description:Tu(d.description).error??void 0})),placeholder:"Allows access to admin features"})})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(re,{label:"System permission",tooltip:"System permissiony jsou chrnn proti smazn.",hint:"Zapni pouze pro core oprvnn.",children:s.jsxs("label",{className:"flex items-center gap-3 text-sm text-slate-200",children:[s.jsx("input",{type:"checkbox",checked:d.isSystem,onChange:y=>m(P=>({...P,isSystem:y.target.checked})),className:"h-4 w-4 rounded border-slate-600 bg-slate-900 text-indigo-400"}),"Protected from deletion"]})})})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{type:"submit",disabled:A,className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",children:A?"Saving...":"Save permission"}),s.jsx("button",{type:"button",onClick:()=>c(-1),className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 hover:bg-slate-900",children:"Cancel"})]})]})}function h0(){return s.jsx(im,{mode:"create"})}function x0(){const{id:l}=es();return l?s.jsx(im,{mode:"edit",permissionId:l}):null}function g0(){const[l,i]=u.useState([]),[c,d]=u.useState(""),[m,h]=u.useState(null),[f,N]=u.useState(null),[x,S]=u.useState(void 0),[w,v]=u.useState(!0),[j,A]=u.useState(null),[U,T]=u.useState(null),[y,P]=u.useState(!1),[b,R]=u.useState(null),[L,O]=u.useState(""),[B,M]=u.useState(null),[fe,Pe]=u.useState(null),[Y,G]=u.useState(void 0),[xe,Re]=u.useState(null),ke=async()=>{const $=await q("/admin/api/roles");i($)};u.useEffect(()=>{let $=!0;return(async()=>{try{await ke()}finally{$&&v(!1)}})(),()=>{$=!1}},[]),u.useEffect(()=>{if(!j){T(null);return}let $=!0;return(async()=>{P(!0);try{const z=await q(`/admin/api/roles/${j.id}/usage`);$&&T(z)}finally{$&&P(!1)}})(),()=>{$=!1}},[j]);const $e=async $=>{$.preventDefault();const E=Il(c);if(E.error){h(E.error);return}h(null),N(null),S(void 0);try{await q("/admin/api/roles",{method:"POST",body:JSON.stringify({name:E.value}),suppressToast:!0}),ge({message:"Role created.",tone:"success"}),d(""),await ke()}catch(z){if(z instanceof Ee){const de=We(z);h(de.fieldErrors.name?.[0]??null),N(de.generalError??"Unable to create role."),S(de.diagnostics);return}N("Unable to create role."),S(void 0)}},Te=async()=>{j&&(await q(`/admin/api/roles/${j.id}`,{method:"DELETE"}),ge({message:"Role deleted.",tone:"success"}),i($=>$.filter(E=>E.id!==j.id)),A(null))},Ce=$=>{R($.id),O($.name),M(null)},J=()=>{R(null),O("")},ae=async()=>{if(!b)return;const $=Il(L);if($.error){M($.error);return}M(null),Pe(null),G(void 0),Re(b);try{await q(`/admin/api/roles/${b}`,{method:"PUT",body:JSON.stringify({name:$.value}),suppressToast:!0}),ge({message:"Role updated.",tone:"success"}),i(E=>E.map(z=>z.id===b?{...z,name:$.value}:z)),J()}catch(E){if(E instanceof Ee){const z=We(E);M(z.fieldErrors.name?.[0]??null),Pe(z.generalError??"Unable to update role."),G(z.diagnostics);return}Pe("Unable to update role."),G(void 0)}finally{Re(null)}};return s.jsxs("section",{className:"flex flex-col gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Roles"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Assign permissions to roles for admin access control."})]}),s.jsxs("form",{onSubmit:$e,className:"flex flex-wrap items-end gap-3 rounded-lg border border-slate-800 bg-slate-900/40 p-4",children:[s.jsx("div",{className:"w-full max-w-sm",children:s.jsx(re,{label:"New role",tooltip:"Role je Identity role. Oprvnn se mapuj pes permissiony.",hint:"Pouvej krtk nzvy jako Admin, Support, Editor.",error:m,required:!0,children:s.jsx("input",{className:`w-full rounded-md border bg-slate-950 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 ${m?"border-rose-400":"border-slate-700"}`,placeholder:"Admin",value:c,onChange:$=>d($.target.value),onBlur:()=>h(Il(c).error??null)})})}),s.jsx("button",{type:"submit",className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400",children:"Create role"}),s.jsx("div",{className:"w-full",children:s.jsx(Ke,{message:f,diagnostics:x})})]}),s.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-800",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-slate-900 text-slate-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 font-medium",children:"Role"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"System"}),s.jsx("th",{className:"px-4 py-3 text-right font-medium",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-800 bg-slate-950/40",children:[w&&s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-4 py-6 text-center text-slate-400",children:"Loading roles..."})}),!w&&l.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-4 py-6 text-center text-slate-400",children:"No roles found."})}),l.map($=>s.jsxs("tr",{className:"text-slate-100",children:[s.jsxs("td",{className:"px-4 py-3 font-medium",children:[b===$.id?s.jsx("input",{className:`w-full rounded-md border bg-slate-950 px-3 py-2 text-sm text-slate-100 ${B?"border-rose-400":"border-slate-700"}`,value:L,onChange:E=>O(E.target.value),onBlur:()=>M(Il(L).error??null)}):$.name,b===$.id&&B&&s.jsx("div",{className:"mt-1 text-xs text-rose-300",children:B}),b===$.id&&s.jsx(Ke,{message:fe,diagnostics:Y})]}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:$.isSystem?"Yes":"No"}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-3",children:[s.jsx(je,{to:he(`/config/roles/${$.id}`),className:"text-sm font-semibold text-indigo-300 hover:text-indigo-200",children:"Edit permissions"}),!$.isSystem&&b!==$.id&&s.jsx("button",{type:"button",className:"text-sm font-semibold text-slate-300 hover:text-slate-200",onClick:()=>Ce($),children:"Rename"}),!$.isSystem&&b===$.id&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",className:"text-sm font-semibold text-emerald-300 hover:text-emerald-200",onClick:ae,disabled:xe===$.id,children:xe===$.id?"Saving...":"Save"}),s.jsx("button",{type:"button",className:"text-sm font-semibold text-slate-300 hover:text-slate-200",onClick:J,disabled:xe===$.id,children:"Cancel"})]}),!$.isSystem&&s.jsx("button",{type:"button",className:"text-sm font-semibold text-rose-300 hover:text-rose-200",onClick:()=>A($),children:"Delete"})]})})]},$.id))]})]})}),s.jsx(Hs,{title:"Delete role?",description:"This will remove the role and its permission assignments.",confirmLabel:"Delete",confirmDisabled:(U?.userCount??0)>0||y,isOpen:!!j,onCancel:()=>A(null),onConfirm:Te,children:j&&s.jsxs("div",{className:"space-y-2 text-sm text-slate-300",children:[s.jsxs("p",{children:["Assigned to"," ",s.jsx("span",{className:"font-semibold text-slate-100",children:y?"...":U?.userCount??0})," ","users."]}),(U?.userCount??0)>0&&s.jsx("p",{className:"text-rose-300",children:"Remove users from the role before deleting."})]})})]})}function v0(){const{id:l}=es(),i=Qe(),[c,d]=u.useState(null),[m,h]=u.useState([]),[f,N]=u.useState(new Set),[x,S]=u.useState(!0),[w,v]=u.useState(!1),[j,A]=u.useState(null),[U,T]=u.useState(void 0);u.useEffect(()=>{if(!l)return;let R=!0;return(async()=>{S(!0);try{const[O,B]=await Promise.all([q(`/admin/api/roles/${l}`),q("/admin/api/permissions")]);if(!R)return;d(O),h(B),N(new Set(O.permissionIds))}finally{R&&S(!1)}})(),()=>{R=!1}},[l]);const y=u.useMemo(()=>{const R=new Map;return m.forEach(L=>{const O=L.group||"General";R.has(O)||R.set(O,[]),R.get(O).push(L)}),Array.from(R.entries()).sort(([L],[O])=>L.localeCompare(O)).map(([L,O])=>({group:L,permissions:O.sort((B,M)=>B.key.localeCompare(M.key))}))},[m]),P=R=>{N(L=>{const O=new Set(L);return O.has(R)?O.delete(R):O.add(R),O})},b=async R=>{if(R.preventDefault(),!!l){A(null),T(void 0),v(!0);try{await q(`/admin/api/roles/${l}/permissions`,{method:"PUT",body:JSON.stringify({permissionIds:Array.from(f)}),suppressToast:!0}),ge({message:"Role permissions updated.",tone:"success"})}catch(L){if(L instanceof Ee){const O=We(L);A(O.generalError??"Unable to update role permissions."),T(O.diagnostics);return}A("Unable to update role permissions."),T(void 0)}finally{v(!1)}}};return l?x?s.jsx("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-6 text-slate-300",children:"Loading role..."}):c?s.jsxs("form",{onSubmit:b,className:"flex flex-col gap-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h1",{className:"text-2xl font-semibold text-white",children:["Role: ",c.name]}),s.jsx(Ss,{tooltip:"Role jsou Identity role. Oprvnn se mapuj pes permissiony (claim permission). Zmny ovlivn pstup uivatel."})]}),s.jsx("p",{className:"text-sm text-slate-300",children:"Assign permissions to control access."})]}),s.jsx(Ke,{message:j,diagnostics:U}),s.jsx("div",{className:"flex flex-col gap-6",children:y.map(R=>s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-6",children:[s.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-slate-400",children:R.group}),s.jsx("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:R.permissions.map(L=>s.jsxs("label",{className:"flex items-start gap-3 rounded-md border border-slate-800 bg-slate-950/40 p-3",children:[s.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 rounded border-slate-600 bg-slate-900 text-indigo-400",checked:f.has(L.id),onChange:()=>P(L.id)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-slate-100",children:L.key}),s.jsx("div",{className:"text-xs text-slate-400",children:L.description})]})]},L.id))})]},R.group))}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{type:"submit",disabled:w,className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",children:w?"Saving...":"Save permissions"}),s.jsx("button",{type:"button",onClick:()=>i(-1),className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 hover:bg-slate-900",children:"Cancel"})]})]}):s.jsx("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-6 text-slate-300",children:"Role not found."}):null}function y0(){const[l,i]=u.useState([]),[c,d]=u.useState(!0);return u.useEffect(()=>{let m=!0;return(async()=>{try{const f=await q("/admin/api/api-resources");m&&i(f)}finally{m&&d(!1)}})(),()=>{m=!1}},[]),s.jsxs("section",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"API Endpoints"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Manage API resources and endpoint permissions."})]}),s.jsx(je,{to:he("/config/api-resources/new"),className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400",children:"New API resource"})]}),s.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-800",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-slate-900 text-slate-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 font-medium",children:"Name"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Display name"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Base URL"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-right font-medium",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-800 bg-slate-950/40",children:[c&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-slate-400",children:"Loading API resources..."})}),!c&&l.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-slate-400",children:"No API resources defined."})}),l.map(m=>s.jsxs("tr",{className:"text-slate-100",children:[s.jsx("td",{className:"px-4 py-3 font-medium",children:m.name}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:m.displayName}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:m.baseUrl??"-"}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${m.isActive?"bg-emerald-500/20 text-emerald-200":"bg-rose-500/20 text-rose-200"}`,children:m.isActive?"Active":"Inactive"})}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-3",children:[s.jsx(je,{to:he(`/config/api-resources/${m.id}`),className:"text-sm font-semibold text-indigo-300 hover:text-indigo-200",children:"Edit"}),s.jsx(je,{to:he(`/config/api-resources/${m.id}/endpoints`),className:"text-sm font-semibold text-slate-300 hover:text-slate-100",children:"Endpoints"})]})})]},m.id))]})]})})]})}const j0={name:"",displayName:"",baseUrl:"",isActive:!0};function om({mode:l,resourceId:i}){const c=Qe(),[d,m]=u.useState(j0),[h,f]=u.useState(l==="edit"),[N,x]=u.useState(!1),[S,w]=u.useState(null),[v,j]=u.useState(null),[A,U]=u.useState({}),[T,y]=u.useState(null),[P,b]=u.useState(void 0);u.useEffect(()=>{if(l!=="edit"||!i)return;let O=!0;return(async()=>{f(!0);try{const M=await q(`/admin/api/api-resources/${i}`);O&&m({name:M.name,displayName:M.displayName,baseUrl:M.baseUrl??"",isActive:M.isActive})}finally{O&&f(!1)}})(),()=>{O=!1}},[l,i]);const R=async O=>{O.preventDefault();const B={};if(d.name.trim()||(B.name="Name is required."),d.displayName.trim()||(B.displayName="Display name is required."),d.baseUrl.trim())try{new URL(d.baseUrl.trim())}catch{B.baseUrl="Base URL must be a valid absolute URL."}if(U(B),y(null),b(void 0),!(Object.keys(B).length>0)){x(!0);try{const M={name:d.name.trim(),displayName:d.displayName.trim(),baseUrl:d.baseUrl.trim()||null,isActive:d.isActive};if(l==="create"){const fe=await q("/admin/api/api-resources",{method:"POST",body:JSON.stringify(M),suppressToast:!0});ge({message:"API resource created.",tone:"success"}),c(he(`/config/api-resources/${fe.id}`));return}if(!i)return;await q(`/admin/api/api-resources/${i}`,{method:"PUT",body:JSON.stringify(M),suppressToast:!0}),ge({message:"API resource updated.",tone:"success"})}catch(M){if(M instanceof Ee){const fe=We(M);U({name:fe.fieldErrors.name?.[0],displayName:fe.fieldErrors.displayName?.[0],baseUrl:fe.fieldErrors.baseUrl?.[0]}),y(fe.generalError??"Unable to save API resource."),b(fe.diagnostics);return}y("Unable to save API resource."),b(void 0)}finally{x(!1)}}},L=async()=>{if(!i)return;const O=await q(`/admin/api/api-resources/${i}/rotate-key`,{method:"POST"});O.apiKey?(w(O.apiKey),j(null),ge({message:"API key rotated.",tone:"success"})):(w(null),j("API key rotated. New key was not displayed for security reasons."),ge({message:"API key rotated.",tone:"success"}))};return h?s.jsx("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-6 text-slate-300",children:"Loading API resource..."}):s.jsxs("form",{onSubmit:R,className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:l==="create"?"Create API resource":"Edit API resource"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Configure API metadata and status."})]}),l==="edit"&&s.jsx("button",{type:"button",onClick:L,className:"rounded-md border border-amber-300/50 px-4 py-2 text-sm font-semibold text-amber-200 hover:bg-amber-400/10",children:"Rotate API key"})]}),S&&s.jsxs("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 p-4 text-sm text-amber-200",children:[s.jsx("p",{className:"font-semibold",children:"New API key"}),s.jsx("code",{className:"mt-2 block break-all rounded bg-amber-900/30 p-2 text-xs text-amber-100",children:S}),s.jsx("p",{className:"mt-2 text-xs text-amber-100",children:"Store this value securely; it will not be shown again."})]}),v&&s.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 p-4 text-sm text-amber-200",children:v}),s.jsx(Ke,{message:T,diagnostics:P}),s.jsxs("div",{className:"grid gap-6 rounded-lg border border-slate-800 bg-slate-900/40 p-6 md:grid-cols-2",children:[s.jsx(re,{label:"Name",tooltip:"Intern identifiktor API resource.",hint:"Povinn, nap. identity-api.",error:A.name,required:!0,children:s.jsx("input",{className:`rounded-md border bg-slate-950 px-3 py-2 text-slate-100 ${A.name?"border-rose-400":"border-slate-700"}`,value:d.name,onChange:O=>m(B=>({...B,name:O.target.value})),placeholder:"identity-api"})}),s.jsx(re,{label:"Display name",tooltip:"Lidsk nzev API pro administrtory.",hint:"Povinn.",error:A.displayName,required:!0,children:s.jsx("input",{className:`rounded-md border bg-slate-950 px-3 py-2 text-slate-100 ${A.displayName?"border-rose-400":"border-slate-700"}`,value:d.displayName,onChange:O=>m(B=>({...B,displayName:O.target.value})),placeholder:"Identity API"})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(re,{label:"Base URL",tooltip:"Zkladn URL API pro dokumentaci a odkazy.",hint:"Voliteln, mus bt absolutn URL.",error:A.baseUrl,children:s.jsx("input",{className:`rounded-md border bg-slate-950 px-3 py-2 text-slate-100 ${A.baseUrl?"border-rose-400":"border-slate-700"}`,value:d.baseUrl,onChange:O=>m(B=>({...B,baseUrl:O.target.value})),placeholder:"https://api.local.test"})})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(re,{label:"Status",tooltip:"Deaktivovan API resource nelze pouvat pro sync endpoint.",hint:"Vypni, pokud je API mimo provoz.",children:s.jsxs("label",{className:"flex items-center gap-3 text-sm text-slate-200",children:[s.jsx("input",{type:"checkbox",checked:d.isActive,onChange:O=>m(B=>({...B,isActive:O.target.checked})),className:"h-4 w-4 rounded border-slate-600 bg-slate-900 text-indigo-400"}),"Active"]})})})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{type:"submit",disabled:N,className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",children:N?"Saving...":"Save API resource"}),s.jsx("button",{type:"button",onClick:()=>c(-1),className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 hover:bg-slate-900",children:"Cancel"})]})]})}function b0(){return s.jsx(om,{mode:"create"})}function N0(){const{id:l}=es();return l?s.jsx(om,{mode:"edit",resourceId:l}):null}function w0(){const{id:l}=es(),[i,c]=u.useState([]),[d,m]=u.useState([]),[h,f]=u.useState(!0),[N,x]=u.useState(null),[S,w]=u.useState(!1),[v,j]=u.useState(null),[A,U]=u.useState(void 0);u.useEffect(()=>{if(!l)return;let R=!0;return(async()=>{f(!0);try{const[O,B]=await Promise.all([q(`/admin/api/api-resources/${l}/endpoints`),q("/admin/api/permissions")]);R&&(c(O),m(B))}finally{R&&f(!1)}})(),()=>{R=!1}},[l]);const T=u.useMemo(()=>{const R=new Map;return d.forEach(L=>{const O=L.group||"General";R.has(O)||R.set(O,[]),R.get(O).push(L)}),Array.from(R.entries()).sort(([L],[O])=>L.localeCompare(O))},[d]),y=R=>{x({endpoint:R,selected:new Set(R.permissionIds)})},P=R=>{N&&x(L=>{if(!L)return L;const O=new Set(L.selected);return O.has(R)?O.delete(R):O.add(R),{...L,selected:O}})},b=async()=>{if(!(!N||!l)){w(!0),j(null),U(void 0);try{await q(`/admin/api/api-resources/${l}/endpoints/${N.endpoint.id}/permissions`,{method:"PUT",body:JSON.stringify({permissionIds:Array.from(N.selected)}),suppressToast:!0}),ge({message:"Endpoint permissions updated.",tone:"success"}),c(R=>R.map(L=>L.id===N.endpoint.id?{...L,permissionIds:Array.from(N.selected),permissionKeys:d.filter(O=>N.selected.has(O.id)).map(O=>O.key)}:L)),x(null)}catch(R){if(R instanceof Ee){const L=We(R);j(L.generalError??"Unable to update endpoint permissions."),U(L.diagnostics);return}j("Unable to update endpoint permissions."),U(void 0)}finally{w(!1)}}};return l?s.jsxs("section",{className:"flex flex-col gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"API Endpoint Permissions"}),s.jsx(Ss,{tooltip:"Vyber permissiony pro konkrtn endpoint. Kombinace method + path mus bt uniktn v rmci API resource. Endpoints se synchronizuj z API sluby."})]}),s.jsx("p",{className:"text-sm text-slate-300",children:"Assign permissions to API endpoints."})]}),s.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-800",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-slate-900 text-slate-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 font-medium",children:"Method"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Path"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Permissions"}),s.jsx("th",{className:"px-4 py-3 text-right font-medium",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-800 bg-slate-950/40",children:[h&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-slate-400",children:"Loading endpoints..."})}),!h&&i.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-slate-400",children:"No endpoints registered. Sync endpoints from API service."})}),i.map(R=>s.jsxs("tr",{className:"text-slate-100",children:[s.jsx("td",{className:"px-4 py-3 font-medium",children:R.method}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:R.path}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:R.permissionKeys.length>0?s.jsx("div",{className:"flex flex-wrap gap-2",children:R.permissionKeys.map(L=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-1 text-xs text-slate-200",children:L},L))}):"-"}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx("button",{type:"button",className:"text-sm font-semibold text-indigo-300 hover:text-indigo-200",onClick:()=>y(R),children:"Edit permissions"})})]},R.id))]})]})}),N&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/70 px-4",children:s.jsxs("div",{className:"w-full max-w-2xl rounded-lg border border-slate-800 bg-slate-950 p-6 shadow-lg",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Edit permissions"}),s.jsxs("p",{className:"text-sm text-slate-300",children:[N.endpoint.method," ",N.endpoint.path]})]}),s.jsx("button",{type:"button",onClick:()=>x(null),className:"text-sm text-slate-400 hover:text-slate-200",children:"Close"})]}),s.jsxs("div",{className:"mt-4 max-h-[60vh] overflow-y-auto",children:[s.jsx("p",{className:"mb-3 text-xs text-slate-400",children:"Choose permissions required for this endpoint. You can leave it empty for public access."}),s.jsx(Ke,{message:v,diagnostics:A}),T.map(([R,L])=>s.jsxs("div",{className:"mb-4 rounded-lg border border-slate-800 bg-slate-900/40 p-4",children:[s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:R}),s.jsx("div",{className:"mt-3 grid gap-2 md:grid-cols-2",children:L.map(O=>s.jsxs("label",{className:"flex items-start gap-3 rounded-md border border-slate-800 bg-slate-950/40 p-3",children:[s.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 rounded border-slate-600 bg-slate-900 text-indigo-400",checked:N.selected.has(O.id),onChange:()=>P(O.id)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-slate-100",children:O.key}),s.jsx("div",{className:"text-xs text-slate-400",children:O.description})]})]},O.id))})]},R))]}),s.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:()=>x(null),className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 hover:bg-slate-900",children:"Cancel"}),s.jsx("button",{type:"button",onClick:b,disabled:S,className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",children:S?"Saving...":"Save permissions"})]})]})})]}):null}function S0(){const[l,i]=u.useState(""),[c,d]=u.useState(1),[m,h]=u.useState(10),[f,N]=u.useState(null),[x,S]=u.useState(!1),[w,v]=u.useState(0),[j,A]=u.useState(!1),[U,T]=u.useState(null),[y,P]=u.useState(null),[b,R]=u.useState(null),[L,O]=u.useState(void 0),[B,M]=u.useState({email:"",userName:"",phoneNumber:"",password:""});u.useEffect(()=>{let Y=!0;return(async()=>{S(!0);const xe=new URLSearchParams;l.trim()&&xe.set("search",l.trim()),xe.set("page",String(c)),xe.set("pageSize",String(m));try{const Re=await q(`/admin/api/users?${xe.toString()}`);Y&&N(Re)}finally{Y&&S(!1)}})(),()=>{Y=!1}},[c,m,l,w]);const fe=async Y=>{Y.preventDefault();const G=Ml(B.email);if(G.error){T(G.error);return}T(null),P(null),R(null),O(void 0),A(!0);try{await q("/admin/api/users",{method:"POST",body:JSON.stringify({email:G.value,userName:B.userName.trim()||null,phoneNumber:B.phoneNumber.trim()||null,password:B.password.trim()||null}),suppressToast:!0}),ge({message:"User created.",tone:"success"}),M({email:"",userName:"",phoneNumber:"",password:""}),d(1),v(xe=>xe+1)}catch(xe){if(xe instanceof Ee){const Re=We(xe);T(Re.fieldErrors.email?.[0]??null),P(Re.fieldErrors.password?.[0]??null),R(Re.generalError??"Unable to create user."),O(Re.diagnostics);return}R("Unable to create user."),O(void 0)}finally{A(!1)}},Pe=f?Math.max(1,Math.ceil(f.totalCount/f.pageSize)):1;return s.jsxs("section",{className:"flex flex-col gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Users"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Browse registered users and lock status."})]}),s.jsxs("div",{className:"flex flex-wrap items-end gap-3 rounded-lg border border-slate-800 bg-slate-900/40 p-4",children:[s.jsx("div",{className:"w-full max-w-sm",children:s.jsx(re,{label:"Search",tooltip:"Hled v emailu nebo username.",hint:"Pouij pesn fragment (nap. jana@).",children:s.jsx("input",{className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500",placeholder:"Search email or username",value:l,onChange:Y=>{i(Y.target.value),d(1)}})})}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Page size"}),s.jsx("select",{className:"mt-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100",value:m,onChange:Y=>{h(Number(Y.target.value)),d(1)},children:[10,20,30].map(Y=>s.jsxs("option",{value:Y,children:[Y," / page"]},Y))})]})]}),s.jsxs("form",{onSubmit:fe,className:"grid gap-3 rounded-lg border border-slate-800 bg-slate-900/40 p-4 md:grid-cols-2",children:[s.jsx(re,{label:"Email",tooltip:"Primrn pihlaovac email. Aktivace se posl na tuto adresu.",hint:"Povinn.",error:U,required:!0,children:s.jsx("input",{className:`w-full rounded-md border bg-slate-950 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 ${U?"border-rose-400":"border-slate-700"}`,placeholder:"name@example.com",value:B.email,onChange:Y=>M(G=>({...G,email:Y.target.value})),onBlur:()=>T(Ml(B.email).error??null)})}),s.jsx(re,{label:"Username",tooltip:"Voliteln username pro pihlen.",hint:"Kdy je przdn, pouije se email.",children:s.jsx("input",{className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500",placeholder:"Username",value:B.userName,onChange:Y=>M(G=>({...G,userName:Y.target.value}))})}),s.jsx(re,{label:"Phone number",tooltip:"Voliteln telefonn slo uivatele.",hint:"Pouij E.164 formt.",children:s.jsx("input",{className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500",placeholder:"+420123456789",value:B.phoneNumber,onChange:Y=>M(G=>({...G,phoneNumber:Y.target.value}))})}),s.jsx(re,{label:"Temporary password",tooltip:"Pokud nech przdn, systm vygeneruje aktivaci.",hint:"Voliteln. Mus splnit password policy.",error:y,children:s.jsx("input",{className:`w-full rounded-md border bg-slate-950 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 ${y?"border-rose-400":"border-slate-700"}`,type:"password",placeholder:"Temporary password",value:B.password,onChange:Y=>M(G=>({...G,password:Y.target.value}))})}),s.jsxs("div",{className:"flex items-center gap-3 md:col-span-2",children:[s.jsx("button",{type:"submit",disabled:j,className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",children:j?"Creating...":"Create user"}),s.jsxs("span",{className:"flex items-center gap-2 text-xs text-slate-400",children:[s.jsx(Ss,{tooltip:"Uivatel dostane aktivan email s potvrzovacm linkem."}),"New users will receive an activation email."]})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(Ke,{message:b,diagnostics:L})})]}),s.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-800",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-slate-900 text-slate-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 font-medium",children:"Email"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Username"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Confirmed"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Locked"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Roles"}),s.jsx("th",{className:"px-4 py-3 text-right font-medium",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-800 bg-slate-950/40",children:[x&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-slate-400",children:"Loading users..."})}),!x&&f?.items.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-slate-400",children:"No users found. Create the first user above."})}),f?.items.map(Y=>s.jsxs("tr",{className:"text-slate-100",children:[s.jsx("td",{className:"px-4 py-3 font-medium",children:Y.email??"-"}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:Y.userName??"-"}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${Y.emailConfirmed?"bg-emerald-500/20 text-emerald-200":"bg-amber-500/20 text-amber-200"}`,children:Y.emailConfirmed?"Yes":"No"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${Y.isLockedOut?"bg-rose-500/20 text-rose-200":"bg-emerald-500/20 text-emerald-200"}`,children:Y.isLockedOut?"Locked":"Active"})}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:Y.roles.length?Y.roles.join(", "):"-"}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx(je,{to:he(`/users/${Y.id}`),className:"text-sm font-semibold text-indigo-300 hover:text-indigo-200",children:"Manage"})})]},Y.id))]})]})}),f&&s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-sm text-slate-300",children:[s.jsxs("span",{children:["Page ",f.page," of ",Pe,"  ",f.totalCount," users"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"rounded-md border border-slate-700 px-3 py-1 text-slate-200 disabled:opacity-40",onClick:()=>d(Y=>Math.max(1,Y-1)),disabled:f.page<=1,children:"Previous"}),s.jsx("button",{className:"rounded-md border border-slate-700 px-3 py-1 text-slate-200 disabled:opacity-40",onClick:()=>d(Y=>Math.min(Pe,Y+1)),disabled:f.page>=Pe,children:"Next"})]})]})]})}function k0(){const{id:l}=es(),i=Qe(),{session:c}=Cs(),[d,m]=u.useState(null),[h,f]=u.useState([]),[N,x]=u.useState(new Set),[S,w]=u.useState(""),[v,j]=u.useState({}),[A,U]=u.useState(null),[T,y]=u.useState(null),[P,b]=u.useState(null),[R,L]=u.useState(null),[O,B]=u.useState(null),[M,fe]=u.useState(void 0),[Pe,Y]=u.useState(void 0),[G,xe]=u.useState(void 0),[Re,ke]=u.useState(void 0),[$e,Te]=u.useState(void 0),[Ce,J]=u.useState(!0),[ae,$]=u.useState(!1),[E,z]=u.useState(!1),[de,pe]=u.useState(!1),[be,ve]=u.useState(!1),[F,Q]=u.useState({email:"",userName:"",phoneNumber:"",emailConfirmed:!1,isActive:!0});u.useEffect(()=>{if(!l)return;let me=!0;return(async()=>{J(!0);try{const[ze,En]=await Promise.all([q(`/admin/api/users/${l}`),q("/admin/api/roles")]);me&&(m(ze),f(En),x(new Set(ze.roles)),Q({email:ze.email??"",userName:ze.userName??"",phoneNumber:ze.phoneNumber??"",emailConfirmed:ze.emailConfirmed,isActive:ze.isActive}))}finally{me&&J(!1)}})(),()=>{me=!1}},[l]);const Z=me=>{x(we=>{const ze=new Set(we);return ze.has(me)?ze.delete(me):ze.add(me),ze})},ce=async()=>{if(l){y(null),Y(void 0),$(!0);try{await q(`/admin/api/users/${l}/roles`,{method:"PUT",body:JSON.stringify({roles:Array.from(N)}),suppressToast:!0}),ge({message:"User roles updated.",tone:"success"})}catch(me){if(me instanceof Ee){const we=We(me);y(we.generalError??"Unable to update roles."),Y(we.diagnostics);return}y("Unable to update roles."),Y(void 0)}finally{$(!1)}}},Wt=async()=>{if(!l||!d)return;const me=Ml(F.email);if(me.error){j({email:me.error});return}j({}),U(null),fe(void 0),z(!0);try{await q(`/admin/api/users/${l}`,{method:"PUT",body:JSON.stringify({email:me.value,userName:F.userName.trim()||null,phoneNumber:F.phoneNumber.trim()||null,emailConfirmed:F.emailConfirmed,isActive:F.isActive}),suppressToast:!0}),m({...d,email:me.value,userName:F.userName.trim()||null,phoneNumber:F.phoneNumber.trim()||null,emailConfirmed:F.emailConfirmed,isActive:F.isActive}),ge({message:"User updated.",tone:"success"})}catch(we){if(we instanceof Ee){const ze=We(we);j({email:ze.fieldErrors.email?.[0]}),U(ze.generalError??"Unable to update user."),fe(ze.diagnostics);return}U("Unable to update user."),fe(void 0)}finally{z(!1)}},ss=async()=>{if(!l||!d)return;b(null),xe(void 0);const me=!d.isLockedOut;try{await q(`/admin/api/users/${l}/lock`,{method:"POST",body:JSON.stringify({locked:me}),suppressToast:!0}),m({...d,isLockedOut:me}),ge({message:me?"User locked.":"User unlocked.",tone:"success"})}catch(we){if(we instanceof Ee){const ze=We(we);b(ze.generalError??"Unable to update lock status."),xe(ze.diagnostics);return}b("Unable to update lock status."),xe(void 0)}},Ot=async()=>{if(l){if(!S.trim()){L("New password is required.");return}L(null),ke(void 0);try{await q(`/admin/api/users/${l}/reset-password`,{method:"POST",body:JSON.stringify({newPassword:S}),suppressToast:!0}),w(""),ge({message:"Password reset.",tone:"success"})}catch(me){if(me instanceof Ee){const we=We(me);L(we.fieldErrors.newPassword?.[0]??we.generalError),ke(we.diagnostics);return}L("Unable to reset password."),ke(void 0)}}},Cn=async()=>{if(!(!l||!d)){pe(!0),B(null),Te(void 0);try{await q(`/admin/api/users/${l}/resend-activation`,{method:"POST",suppressToast:!0}),ge({message:"Activation email resent.",tone:"success"})}catch(me){if(me instanceof Ee){const we=We(me);B(we.generalError??"Unable to resend activation email."),Te(we.diagnostics);return}B("Unable to resend activation email."),Te(void 0)}finally{pe(!1)}}},vr=async()=>{l&&(ve(!1),await q(`/admin/api/users/${l}`,{method:"DELETE"}),ge({message:"User deactivated.",tone:"success"}),i(-1))};return l?Ce?s.jsx("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-6 text-slate-300",children:"Loading user..."}):d?s.jsxs("section",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:d.email??d.userName}),s.jsx("p",{className:"text-sm text-slate-300",children:"Manage user access and security settings."})]}),s.jsx("button",{type:"button",onClick:()=>i(-1),className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 hover:bg-slate-900",children:"Back"})]}),s.jsxs("div",{className:"grid gap-4 rounded-lg border border-slate-800 bg-slate-900/40 p-6 md:grid-cols-2",children:[s.jsx(re,{label:"Email",tooltip:"Primrn pihlaovac email. Zmna me vyadovat novou aktivaci.",hint:"Povinn.",error:v.email,required:!0,children:s.jsx("input",{className:`rounded-md border bg-slate-950 px-3 py-2 text-sm text-slate-100 ${v.email?"border-rose-400":"border-slate-700"}`,value:F.email,onChange:me=>Q(we=>({...we,email:me.target.value})),onBlur:()=>j({email:Ml(F.email).error??void 0}),placeholder:"user@example.com"})}),s.jsx(re,{label:"Username",tooltip:"Voliteln username pro pihlen.",hint:"Kdy je przdn, pouije se email.",children:s.jsx("input",{className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100",value:F.userName,onChange:me=>Q(we=>({...we,userName:me.target.value})),placeholder:"username"})}),s.jsx(re,{label:"Phone",tooltip:"Voliteln telefonn slo.",hint:"Pouij E.164 formt.",children:s.jsx("input",{className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100",value:F.phoneNumber,onChange:me=>Q(we=>({...we,phoneNumber:me.target.value})),placeholder:"+420123456789"})}),s.jsxs("div",{className:"flex flex-col gap-2 text-sm text-slate-200",children:[s.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-500",children:"2FA enabled"}),s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/40 px-3 py-2 text-sm text-slate-200",children:d.twoFactorEnabled?"Yes":"No"})]}),s.jsxs("div",{className:"flex flex-col gap-2 text-sm text-slate-200",children:[s.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recovery codes left"}),s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/40 px-3 py-2 text-sm text-slate-200",children:d.recoveryCodesLeft})]}),s.jsxs("label",{className:"flex items-center gap-3 text-sm text-slate-200",children:[s.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-600 bg-slate-900 text-indigo-400",checked:F.emailConfirmed,onChange:me=>Q(we=>({...we,emailConfirmed:me.target.checked}))}),"Email confirmed"]}),s.jsxs("label",{className:"flex items-center gap-3 text-sm text-slate-200",children:[s.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-600 bg-slate-900 text-indigo-400",checked:F.isActive,onChange:me=>Q(we=>({...we,isActive:me.target.checked}))}),"Account active"]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3 md:col-span-2",children:[s.jsx("button",{type:"button",onClick:Wt,disabled:E,className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",children:E?"Saving...":"Save details"}),!d.emailConfirmed&&s.jsx("button",{type:"button",onClick:Cn,disabled:de,className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 hover:bg-slate-900 disabled:opacity-60",children:de?"Sending...":"Resend activation"}),s.jsx(Ss,{tooltip:"Aktivan email obsahuje token pro potvrzen adresy."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(Ke,{message:A,diagnostics:M}),s.jsx(Ke,{message:O,diagnostics:$e})]})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Roles"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Assign identity roles for access. Roles map to permissions."})]}),s.jsx("button",{type:"button",onClick:ce,disabled:ae,className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",children:ae?"Saving...":"Save roles"})]}),s.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-slate-400",children:[s.jsx(Ss,{tooltip:"Role != permission. Role mapuje sadu permission, kter se propisuj do claimu permission."}),"Permissions are derived from role mappings."]}),s.jsx("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:h.map(me=>s.jsxs("label",{className:"flex items-center gap-3 rounded-md border border-slate-800 bg-slate-950/40 p-3 text-sm text-slate-200",children:[s.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-600 bg-slate-900 text-indigo-400",checked:N.has(me.name),onChange:()=>Z(me.name)}),me.name]},me.id))}),s.jsx("div",{className:"mt-4",children:s.jsx(Ke,{message:T,diagnostics:Pe})})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Account status"}),s.jsx(Ss,{tooltip:"Lockout blokuje pihlen a do odemen."})]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Lock or unlock this user."}),s.jsx("button",{type:"button",onClick:ss,disabled:c?.userId===d.id&&!d.isLockedOut,className:`mt-4 rounded-md px-4 py-2 text-sm font-semibold ${d.isLockedOut?"bg-emerald-500 text-white hover:bg-emerald-400":"bg-rose-500 text-white hover:bg-rose-400"} disabled:cursor-not-allowed disabled:opacity-60`,children:d.isLockedOut?"Unlock user":"Lock user"}),c?.userId===d.id&&!d.isLockedOut&&s.jsx("p",{className:"mt-2 text-xs text-rose-300",children:"You cannot lock your own account."}),s.jsx(Ke,{message:P,diagnostics:G})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Reset password"}),s.jsx(Ss,{tooltip:"Vygeneruje nov heslo. Uivatel by ho ml zmnit pi dalm pihlen."})]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Set a new password for this user."}),s.jsxs("div",{className:"mt-4 flex flex-col gap-3",children:[s.jsx("input",{type:"password",className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100",value:S,onChange:me=>w(me.target.value),placeholder:"New password"}),R&&s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"text-xs text-rose-300",children:R}),s.jsx(_t,{traceId:Re?.traceId,errorId:Re?.errorId,debug:Re?.debug,compact:!0})]}),s.jsx("button",{type:"button",onClick:Ot,className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400",children:"Reset password"})]})]})]}),s.jsxs("div",{className:"rounded-lg border border-rose-500/40 bg-rose-500/10 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-rose-100",children:"Deactivate user"}),s.jsx("p",{className:"text-sm text-rose-200/70",children:"Deactivated users cannot log in until reactivated."}),s.jsx("button",{type:"button",onClick:()=>ve(!0),className:"mt-4 rounded-md bg-rose-500 px-4 py-2 text-sm font-semibold text-white hover:bg-rose-400",children:"Deactivate user"})]}),s.jsx(Hs,{title:"Deactivate user?",description:"This will disable sign-in for the user until reactivated.",confirmLabel:"Deactivate",isOpen:be,onCancel:()=>ve(!1),onConfirm:vr})]}):s.jsx("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-6 text-slate-300",children:"User not found."}):null}function C0(){const[l,i]=u.useState(""),[c,d]=u.useState(""),[m,h]=u.useState(""),[f,N]=u.useState(""),[x,S]=u.useState(""),[w,v]=u.useState(""),[j,A]=u.useState(null),[U,T]=u.useState(null),[y,P]=u.useState(void 0),[b,R]=u.useState(1),[L,O]=u.useState(10),[B,M]=u.useState(null),[fe,Pe]=u.useState(!1);u.useEffect(()=>{const G=jn(x,w);if(A(G),G)return;let xe=!0;return(async()=>{Pe(!0);const ke=new URLSearchParams;l.trim()&&ke.set("search",l.trim()),c.trim()&&ke.set("action",c.trim()),m.trim()&&ke.set("targetType",m.trim()),f.trim()&&ke.set("targetId",f.trim()),x&&ke.set("fromUtc",new Date(x).toISOString()),w&&ke.set("toUtc",new Date(w).toISOString()),ke.set("page",String(b)),ke.set("pageSize",String(L));try{const $e=await q(`/admin/api/audit?${ke.toString()}`,{suppressToast:!0});xe&&M($e),xe&&(T(null),P(void 0))}catch($e){if($e instanceof Ee){const Te=We($e);xe&&(T(Te.generalError??"Unable to load audit entries."),P(Te.diagnostics))}else xe&&(T("Unable to load audit entries."),P(void 0))}finally{xe&&Pe(!1)}})(),()=>{xe=!1}},[c,x,b,L,l,f,m,w]);const Y=B?Math.max(1,Math.ceil(B.totalCount/B.pageSize)):1;return s.jsxs("section",{className:"flex flex-col gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Audit log"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Review admin actions captured by the server."})]}),s.jsxs("div",{className:"grid gap-3 rounded-lg border border-slate-800 bg-slate-900/40 p-4 md:grid-cols-2",children:[s.jsx(re,{label:"Search",tooltip:"Hled v action, target type a target id.",hint:"Pouij voln text pro rychl filtrovn.",children:s.jsx("input",{className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500",placeholder:"Search action, target, or ID",value:l,onChange:G=>{i(G.target.value),R(1)}})}),s.jsx(re,{label:"Action",tooltip:"Filtrovat podle action kle (nap. client.updated).",hint:"Pouij pesn prefix.",children:s.jsx("input",{className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500",placeholder:"client.updated",value:c,onChange:G=>{d(G.target.value),R(1)}})}),s.jsx(re,{label:"Target type",tooltip:"Typ entity (nap. User, Permission, ApiEndpoint).",hint:"Voliteln.",children:s.jsx("input",{className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500",placeholder:"Permission",value:m,onChange:G=>{h(G.target.value),R(1)}})}),s.jsx(re,{label:"Target ID",tooltip:"ID clovho objektu.",hint:"Voliteln.",children:s.jsx("input",{className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500",placeholder:"GUID / ID",value:f,onChange:G=>{N(G.target.value),R(1)}})}),s.jsx(re,{label:"From (local time)",tooltip:"Audit log ukld as v UTC. Zadan as je lokln a pevede se na UTC.",hint:"Voliteln.",error:j,children:s.jsx("input",{type:"datetime-local",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100",value:x,onChange:G=>{S(G.target.value),R(1)},onBlur:()=>A(jn(x,w))})}),s.jsx(re,{label:"To (local time)",tooltip:"Audit log ukld as v UTC. Zadan as je lokln a pevede se na UTC.",hint:"Voliteln.",error:j,children:s.jsx("input",{type:"datetime-local",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100",value:w,onChange:G=>{v(G.target.value),R(1)},onBlur:()=>A(jn(x,w))})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("label",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Page size"}),s.jsx("select",{className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100",value:L,onChange:G=>{O(Number(G.target.value)),R(1)},children:[10,20,30].map(G=>s.jsxs("option",{value:G,children:[G," / page"]},G))})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(Ke,{message:U,diagnostics:y})})]}),s.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-800",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-slate-900 text-slate-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 font-medium",children:"Timestamp"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Action"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Target"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Actor"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Details"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-800 bg-slate-950/40",children:[fe&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-slate-400",children:"Loading audit entries..."})}),!fe&&B?.items.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-slate-400",children:"No audit entries found."})}),B?.items.map(G=>s.jsxs("tr",{className:"text-slate-100",children:[s.jsx("td",{className:"px-4 py-3 text-slate-300",children:new Date(G.timestampUtc).toLocaleString()}),s.jsx("td",{className:"px-4 py-3 font-medium",children:G.action}),s.jsxs("td",{className:"px-4 py-3 text-slate-300",children:[G.targetType,G.targetId?` (${G.targetId})`:""]}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:G.actorEmail??G.actorUserId??"System"}),s.jsx("td",{className:"px-4 py-3 text-slate-400",children:G.dataJson?s.jsx("code",{className:"rounded bg-slate-900 px-2 py-1 text-xs text-slate-200",children:G.dataJson}):"-"})]},G.id))]})]})}),B&&s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-sm text-slate-300",children:[s.jsxs("span",{children:["Page ",B.page," of ",Y,"  ",B.totalCount," entries"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"rounded-md border border-slate-700 px-3 py-1 text-slate-200 disabled:opacity-40",onClick:()=>R(G=>Math.max(1,G-1)),disabled:B.page<=1,children:"Previous"}),s.jsx("button",{className:"rounded-md border border-slate-700 px-3 py-1 text-slate-200 disabled:opacity-40",onClick:()=>R(G=>Math.min(Y,G+1)),disabled:B.page>=Y,children:"Next"})]})]})]})}function E0(){const[l,i]=u.useState(""),[c,d]=u.useState(""),[m,h]=u.useState(""),[f,N]=u.useState(""),[x,S]=u.useState(null),[w,v]=u.useState(null),[j,A]=u.useState(void 0),[U,T]=u.useState(1),[y,P]=u.useState(10),[b,R]=u.useState(null),[L,O]=u.useState(!1);u.useEffect(()=>{const M=jn(m,f);if(S(M),M)return;let fe=!0;return(async()=>{O(!0);const Y=new URLSearchParams;l.trim()&&Y.set("traceId",l.trim()),c.trim()&&Y.set("status",c.trim()),m&&Y.set("fromUtc",new Date(m).toISOString()),f&&Y.set("toUtc",new Date(f).toISOString()),Y.set("page",String(U)),Y.set("pageSize",String(y));try{const G=await q(`/admin/api/diagnostics/errors?${Y.toString()}`,{suppressToast:!0});fe&&(R(G),v(null),A(void 0))}catch(G){if(G instanceof Ee){const xe=We(G);fe&&(v(xe.generalError??"Unable to load error logs."),A(xe.diagnostics))}else fe&&(v("Unable to load error logs."),A(void 0))}finally{fe&&O(!1)}})(),()=>{fe=!1}},[m,U,y,c,l,f]);const B=b?Math.max(1,Math.ceil(b.totalCount/b.pageSize)):1;return s.jsxs("section",{className:"flex flex-col gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Diagnostics  Errors"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Review server-side error logs captured for 5xx responses."})]}),s.jsxs("div",{className:"grid gap-3 rounded-lg border border-slate-800 bg-slate-900/40 p-4 md:grid-cols-2",children:[s.jsx(re,{label:"Trace ID",hint:"Filter by correlation/trace identifier.",children:s.jsx("input",{className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100",placeholder:"trace-id",value:l,onChange:M=>{i(M.target.value),T(1)}})}),s.jsx(re,{label:"Status code",hint:"Filter by HTTP status (e.g. 500).",children:s.jsx("input",{className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100",placeholder:"500",value:c,onChange:M=>{d(M.target.value),T(1)}})}),s.jsx(re,{label:"From (local time)",hint:"Optional range filter.",error:x,children:s.jsx("input",{type:"datetime-local",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100",value:m,onChange:M=>{h(M.target.value),T(1)},onBlur:()=>S(jn(m,f))})}),s.jsx(re,{label:"To (local time)",hint:"Optional range filter.",error:x,children:s.jsx("input",{type:"datetime-local",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100",value:f,onChange:M=>{N(M.target.value),T(1)},onBlur:()=>S(jn(m,f))})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("label",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Page size"}),s.jsx("select",{className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100",value:y,onChange:M=>{P(Number(M.target.value)),T(1)},children:[10,20,30].map(M=>s.jsxs("option",{value:M,children:[M," / page"]},M))})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(Ke,{message:w,diagnostics:j})})]}),s.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-800",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-slate-900 text-slate-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 font-medium",children:"Timestamp"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Status"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Path"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Trace"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Actor"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Details"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-800 bg-slate-950/40",children:[L&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-slate-400",children:"Loading error logs..."})}),!L&&b?.items.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-slate-400",children:"No error logs found."})}),b?.items.map(M=>s.jsxs("tr",{className:"text-slate-100",children:[s.jsx("td",{className:"px-4 py-3 text-slate-300",children:new Date(M.timestampUtc).toLocaleString()}),s.jsx("td",{className:"px-4 py-3 font-medium",children:M.statusCode}),s.jsxs("td",{className:"px-4 py-3 text-slate-300",children:[s.jsx("div",{className:"font-medium text-slate-200",children:M.method}),s.jsx("div",{className:"text-xs text-slate-400",children:M.path})]}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:s.jsx("div",{className:"text-xs",children:M.traceId})}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:M.actorEmail??M.actorUserId??"System"}),s.jsx("td",{className:"px-4 py-3 text-slate-300",children:s.jsx(je,{className:"text-sm font-semibold text-indigo-300 hover:text-indigo-200",to:he(`/diagnostics/errors/${M.id}`),children:"View details"})})]},M.id))]})]})}),b&&s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-sm text-slate-300",children:[s.jsxs("span",{children:["Page ",b.page," of ",B,"  ",b.totalCount," entries"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"rounded-md border border-slate-700 px-3 py-1 text-slate-200 disabled:opacity-40",onClick:()=>T(M=>Math.max(1,M-1)),disabled:b.page<=1,children:"Previous"}),s.jsx("button",{className:"rounded-md border border-slate-700 px-3 py-1 text-slate-200 disabled:opacity-40",onClick:()=>T(M=>Math.min(B,M+1)),disabled:b.page>=B,children:"Next"})]})]})]})}function P0(){const{id:l}=es(),[i,c]=u.useState(null),[d,m]=u.useState(!0),[h,f]=u.useState(null),[N,x]=u.useState(void 0),[S,w]=u.useState(!1);return u.useEffect(()=>{if(!l)return;let v=!0;return(async()=>{m(!0);try{const A=await q(`/admin/api/diagnostics/errors/${l}`,{suppressToast:!0});v&&(c(A),f(null),x(void 0))}catch(A){if(A instanceof Ee){const U=We(A);v&&(f(U.generalError??"Unable to load error details."),x(U.diagnostics))}else v&&(f("Unable to load error details."),x(void 0))}finally{v&&m(!1)}})(),()=>{v=!1}},[l]),l?d?s.jsx("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-6 text-slate-300",children:"Loading error log..."}):i?s.jsxs("section",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Error details"}),s.jsxs("p",{className:"text-sm text-slate-300",children:[i.method," ",i.path,"  ",i.statusCode]})]}),s.jsx(je,{className:"text-sm font-semibold text-indigo-300 hover:text-indigo-200",to:he("/diagnostics/errors"),children:"Back to list"})]}),s.jsx(Ke,{message:h,diagnostics:N}),s.jsxs("div",{className:"grid gap-4 rounded-lg border border-slate-800 bg-slate-900/40 p-6 text-sm text-slate-200",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Timestamp"}),s.jsx("div",{className:"mt-1 text-slate-100",children:new Date(i.timestampUtc).toLocaleString()})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Actor"}),s.jsx("div",{className:"mt-1 text-slate-100",children:i.actorEmail??i.actorUserId??"System"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Trace ID"}),s.jsx("div",{className:"mt-1 text-slate-100",children:i.traceId})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Error ID"}),s.jsx("div",{className:"mt-1 text-slate-100",children:i.id})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Summary"}),s.jsxs("div",{className:"mt-2 rounded-md border border-slate-800 bg-slate-950/60 p-3 text-slate-100",children:[s.jsx("div",{className:"font-semibold",children:i.title}),s.jsx("div",{className:"mt-1 text-slate-300",children:i.detail})]})]}),s.jsx(_t,{traceId:i.traceId,errorId:i.id,debug:{exceptionType:i.exceptionType??void 0,stackTrace:i.stackTrace??void 0,innerExceptionSummary:i.innerException??void 0,path:i.path,method:i.method}}),i.stackTrace?s.jsx("div",{children:s.jsx("button",{type:"button",className:"rounded-md border border-slate-700 px-3 py-2 text-xs font-semibold text-slate-200 hover:bg-slate-900",onClick:async()=>{await navigator.clipboard.writeText(i.stackTrace??""),w(!0),setTimeout(()=>w(!1),2e3)},children:S?"Copied":"Copy stack trace"})}):null,i.userAgent&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"User agent"}),s.jsx("div",{className:"mt-1 text-slate-100",children:i.userAgent})]}),i.remoteIp&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Remote IP"}),s.jsx("div",{className:"mt-1 text-slate-100",children:i.remoteIp})]}),i.dataJson&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Data"}),s.jsx("pre",{className:"mt-2 max-h-64 overflow-auto rounded-md bg-slate-950/60 p-3 text-xs text-slate-200",children:i.dataJson})]})]})]}):s.jsx("div",{className:"rounded-lg border border-slate-800 bg-slate-900/40 p-6 text-slate-300",children:"Error log not found."}):null}const R0={Active:"bg-emerald-500/20 text-emerald-200",Previous:"bg-indigo-500/20 text-indigo-200",Retired:"bg-slate-700/40 text-slate-200",Revoked:"bg-rose-500/20 text-rose-200"},Ns=l=>l?new Date(l).toLocaleString():"";function T0(){const[l,i]=u.useState(null),[c,d]=u.useState(!0),[m,h]=u.useState(!1),[f,N]=u.useState(!1),[x,S]=u.useState(null),[w,v]=u.useState(null),[j,A]=u.useState(!1),U=async()=>{d(!0);const M=await q("/admin/api/security/keys/signing");i(M),d(!1)},T=async()=>{A(!0);try{const M=await q("/admin/api/security/keys/signing/jwks");v(M.jwksJson)}finally{A(!1)}};u.useEffect(()=>{U(),T()},[]);const y=l?.keys.filter(M=>M.isPublished)??[],P=l?.keys.find(M=>M.status==="Active"),b=P?.notAfterUtc?new Date(P.notAfterUtc):null,R=b&&b.getTime()-Date.now()<1e3*60*60*24*30,L=async()=>{h(!0);try{const M=await q("/admin/api/security/keys/signing/rotate",{method:"POST"});ge({tone:"success",message:`Signing key rotated. Active kid: ${M.newActiveKid}.`}),await U()}finally{h(!1),N(!1)}},O=async M=>{h(!0);try{await q(`/admin/api/security/keys/signing/${M}/retire`,{method:"POST"}),ge({tone:"success",message:"Signing key retired."}),await U()}finally{h(!1),S(null)}},B=async M=>{h(!0);try{await q(`/admin/api/security/keys/signing/${M}/revoke`,{method:"POST"}),ge({tone:"warning",message:"Signing key revoked."}),await U()}finally{h(!1),S(null)}};return s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"flex items-start justify-between gap-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Signing Keys"}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"Manage the signing key ring used for token issuance and JWKS publication."})]}),s.jsx("button",{type:"button",onClick:()=>N(!0),className:"rounded-md bg-rose-500 px-4 py-2 text-sm font-semibold text-white hover:bg-rose-400 disabled:opacity-60",disabled:c||m,children:"Rotate now"})]}),l&&!l.rotationEnabled&&s.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 p-4 text-sm text-amber-200",children:"Automatic rotation is disabled. Ensure manual rotations are scheduled."}),l&&y.length<=1&&s.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 p-4 text-sm text-amber-200",children:"Only one signing key is currently published in JWKS. Add a previous key during rotations to avoid validation gaps."}),l&&R&&s.jsx("div",{className:"rounded-lg border border-rose-500/40 bg-rose-500/10 p-4 text-sm text-rose-200",children:"The active signing key expires within 30 days. Rotate keys or update certificates."}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-5",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Current key ring"}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"Active keys sign new tokens. Previous keys remain published for validation."}),s.jsx("div",{className:"mt-4 overflow-hidden rounded-lg border border-slate-800",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-800 text-sm",children:[s.jsx("thead",{className:"bg-slate-950",children:s.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-slate-500",children:[s.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),s.jsx("th",{className:"px-4 py-3 font-semibold",children:"Key ID"}),s.jsx("th",{className:"px-4 py-3 font-semibold",children:"Created"}),s.jsx("th",{className:"px-4 py-3 font-semibold",children:"Activated"}),s.jsx("th",{className:"px-4 py-3 font-semibold",children:"Retire after"}),s.jsx("th",{className:"px-4 py-3 font-semibold",children:"Retired"}),s.jsx("th",{className:"px-4 py-3 font-semibold",children:"Revoked"}),s.jsx("th",{className:"px-4 py-3 font-semibold",children:"Algorithm"}),s.jsx("th",{className:"px-4 py-3 font-semibold",children:"Published"}),s.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-800 text-slate-200",children:[c&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-4 text-sm text-slate-400",colSpan:10,children:"Loading signing keys"})}),!c&&l?.keys.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-4 text-sm text-slate-400",colSpan:10,children:"No signing keys found."})}),l?.keys.map(M=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${R0[M.status]??"bg-slate-700/40 text-slate-200"}`,children:M.status})}),s.jsx("td",{className:"px-4 py-3 font-mono text-xs text-slate-300",children:M.kid}),s.jsx("td",{className:"px-4 py-3",children:Ns(M.createdUtc)}),s.jsx("td",{className:"px-4 py-3",children:Ns(M.activatedUtc)}),s.jsx("td",{className:"px-4 py-3",children:Ns(M.retireAfterUtc)}),s.jsx("td",{className:"px-4 py-3",children:Ns(M.retiredUtc)}),s.jsx("td",{className:"px-4 py-3",children:Ns(M.revokedUtc)}),s.jsxs("td",{className:"px-4 py-3",children:[M.algorithm,"  ",M.keyType]}),s.jsx("td",{className:"px-4 py-3",children:M.isPublished?"Yes":"No"}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{type:"button",className:"rounded-md border border-slate-700 px-2 py-1 text-xs text-slate-200 hover:border-slate-500 disabled:opacity-50",disabled:m||M.status!=="Previous",onClick:()=>S({type:"retire",key:M}),children:"Retire"}),s.jsx("button",{type:"button",className:"rounded-md border border-rose-500/60 px-2 py-1 text-xs text-rose-200 hover:border-rose-400 disabled:opacity-50",disabled:m||M.status==="Revoked"||M.status==="Retired",onClick:()=>S({type:"revoke",key:M}),children:"Revoke"})]})})]},M.kid))]})]})})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-5",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Auto-rotation status"}),s.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/80 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Enabled"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:l?l.rotationEnabled?"Yes":"No":""})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/80 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Next rotation due"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:l?.nextRotationDueUtc?Ns(l.nextRotationDueUtc):"Not scheduled"})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/80 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Last rotation"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:l?.lastRotationUtc?Ns(l.lastRotationUtc):""})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/80 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Grace period"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:l?`${l.gracePeriodDays} days`:""})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/80 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Rotation interval"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:l?`${l.rotationIntervalDays} days`:""})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/80 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Check period"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:l?`${l.checkPeriodMinutes} minutes`:""})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/80 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Next rotation check"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:l?.nextRotationCheckUtc?Ns(l.nextRotationCheckUtc):""})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/80 p-4 md:col-span-3",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"JWKS exposure"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:"Active + previous keys are published for validation."})]})]})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-5",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"JWKS preview"}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"Public keys currently exposed via the JWKS endpoint."})]}),s.jsx("button",{type:"button",onClick:T,disabled:j,className:"rounded-md border border-slate-700 px-3 py-2 text-xs font-semibold text-slate-200 hover:border-slate-500 disabled:opacity-60",children:"Refresh JWKS"})]}),s.jsx("pre",{className:"mt-4 max-h-80 overflow-auto rounded-lg border border-slate-800 bg-slate-950 p-4 text-xs text-slate-200",children:j?"Loading JWKS":w??"JWKS not available."})]}),s.jsx(Hs,{title:"Rotate signing keys?",description:"A new active key will be generated and the previous key will remain published until it ages out. Existing tokens stay valid until expiry.",confirmLabel:"Rotate",isOpen:f,confirmDisabled:m,onCancel:()=>N(!1),onConfirm:L}),s.jsx(Hs,{title:x?.type==="revoke"?"Revoke signing key?":"Retire signing key?",description:x?.type==="revoke"?"Revoking a key immediately removes it from JWKS and invalidates tokens signed with it.":"Retiring a previous key stops publishing it in JWKS.",confirmLabel:x?.type==="revoke"?"Revoke":"Retire",isOpen:!!x,confirmDisabled:m,onCancel:()=>S(null),onConfirm:()=>{if(!x?.key){S(null);return}if(x.type==="revoke"){B(x.key.kid);return}O(x.key.kid)}})]})}const I0={accessTokenMinutes:30,identityTokenMinutes:15,authorizationCodeMinutes:5,refreshTokenDays:30,refreshRotationEnabled:!0,refreshReuseDetectionEnabled:!0,refreshReuseLeewaySeconds:30,clockSkewSeconds:60};function U0(){const[l,i]=u.useState(I0),[c,d]=u.useState(null),[m,h]=u.useState(!0),[f,N]=u.useState(!1),[x,S]=u.useState(null),[w,v]=u.useState(void 0),[j,A]=u.useState({});u.useEffect(()=>{(async()=>{h(!0);try{const P=await q("/admin/api/security/token-policy");i(P.policy),d(P.guardrails)}finally{h(!1)}})()},[]);const U=async()=>{N(!0),S(null),v(void 0),A({});try{const y=await q("/admin/api/security/token-policy",{method:"PUT",body:JSON.stringify(l),suppressToast:!0});i(y.policy),d(y.guardrails),ge({tone:"success",message:"Token policy updated."})}catch(y){const P=We(y);S(P.generalError),v(P.diagnostics),A(P.fieldErrors??{}),y instanceof Ee||ge({tone:"error",message:"Failed to update token policy."})}finally{N(!1)}};if(m)return s.jsx("div",{className:"text-sm text-slate-400",children:"Loading token policy"});const T=c?`Guardrails: ${c.minAccessTokenMinutes}-${c.maxAccessTokenMinutes} min access tokens, ${c.minRefreshTokenDays}-${c.maxRefreshTokenDays} day refresh.`:void 0;return s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Token Policies"}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"Set global token lifetimes and refresh token safeguards for OpenID Connect flows."})]}),!l.refreshReuseDetectionEnabled&&s.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 p-4 text-sm text-amber-200",children:"Refresh token reuse detection is disabled. Enable it to detect replayed refresh tokens."}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-5",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Token lifetimes"}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:T??"Adjust lifetimes with care."}),s.jsxs("div",{className:"mt-4 grid gap-4",children:[s.jsx(re,{label:"Access token (minutes)",tooltip:"Recommended 560 minutes. Shorter values reduce exposure for leaked tokens.",error:j?.accessTokenMinutes?.[0],children:s.jsx("input",{type:"number",min:1,value:l.accessTokenMinutes,onChange:y=>i(P=>({...P,accessTokenMinutes:Number(y.target.value)})),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white"})}),s.jsx(re,{label:"ID token (minutes)",tooltip:"Keep short, usually aligned with access token lifetime.",error:j?.identityTokenMinutes?.[0],children:s.jsx("input",{type:"number",min:1,value:l.identityTokenMinutes,onChange:y=>i(P=>({...P,identityTokenMinutes:Number(y.target.value)})),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white"})}),s.jsx(re,{label:"Authorization code (minutes)",tooltip:"Short lifetimes reduce replay risk for authorization codes.",error:j?.authorizationCodeMinutes?.[0],children:s.jsx("input",{type:"number",min:1,value:l.authorizationCodeMinutes,onChange:y=>i(P=>({...P,authorizationCodeMinutes:Number(y.target.value)})),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white"})}),s.jsx(re,{label:"Refresh token lifetime (days)",tooltip:"Total lifetime for refresh tokens before re-authentication is required.",error:j?.refreshTokenDays?.[0],children:s.jsx("input",{type:"number",min:1,value:l.refreshTokenDays,onChange:y=>i(P=>({...P,refreshTokenDays:Number(y.target.value)})),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white"})}),s.jsx(re,{label:"Clock skew (seconds)",tooltip:"Allowed clock drift when validating tokens.",error:j?.clockSkewSeconds?.[0],children:s.jsx("input",{type:"number",min:0,value:l.clockSkewSeconds,onChange:y=>i(P=>({...P,clockSkewSeconds:Number(y.target.value)})),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white"})})]})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-5",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Refresh token protection"}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"Rotation and reuse detection reduce the impact of stolen refresh tokens."}),s.jsxs("div",{className:"mt-4 grid gap-4",children:[s.jsxs("label",{className:"flex items-center gap-3 text-sm text-slate-200",children:[s.jsx("input",{type:"checkbox",checked:l.refreshRotationEnabled,onChange:y=>i(P=>({...P,refreshRotationEnabled:y.target.checked})),className:"h-4 w-4 rounded border-slate-700 bg-slate-950 text-indigo-400"}),"Enable refresh token rotation"]}),s.jsxs("label",{className:"flex items-center gap-3 text-sm text-slate-200",children:[s.jsx("input",{type:"checkbox",checked:l.refreshReuseDetectionEnabled,onChange:y=>i(P=>({...P,refreshReuseDetectionEnabled:y.target.checked})),className:"h-4 w-4 rounded border-slate-700 bg-slate-950 text-indigo-400"}),"Enable reuse detection"]}),s.jsx(re,{label:"Reuse leeway (seconds)",tooltip:"Allows short overlap during parallel refresh calls before marking a token as reused.",error:j?.refreshReuseLeewaySeconds?.[0],children:s.jsx("input",{type:"number",min:0,value:l.refreshReuseLeewaySeconds,onChange:y=>i(P=>({...P,refreshReuseLeewaySeconds:Number(y.target.value)})),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white"})})]})]})]}),s.jsx(Ke,{message:x,diagnostics:w}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"button",onClick:U,disabled:f,className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",children:"Save policy"})})]})}const L0={enabled:!0,rotationIntervalDays:30,gracePeriodDays:14,jwksCacheMarginMinutes:60,breakGlass:!1,reason:""};function D0(){const[l,i]=u.useState(null),[c,d]=u.useState(L0),[m,h]=u.useState(!0),[f,N]=u.useState(!1),[x,S]=u.useState(null),[w,v]=u.useState(void 0),[j,A]=u.useState({});u.useEffect(()=>{(async()=>{h(!0);try{const P=await q("/admin/api/security/key-rotation-policy");i(P),d({enabled:P.policy.enabled,rotationIntervalDays:P.policy.rotationIntervalDays,gracePeriodDays:P.policy.gracePeriodDays,jwksCacheMarginMinutes:P.policy.jwksCacheMarginMinutes,breakGlass:!1,reason:""})}finally{h(!1)}})()},[]);const U=async()=>{N(!0),S(null),v(void 0),A({});try{const y=await q("/admin/api/security/key-rotation-policy",{method:"PUT",body:JSON.stringify(c),suppressToast:!0});i(y),d(P=>({...P,breakGlass:!1,reason:""})),ge({tone:"success",message:"Key rotation policy updated."})}catch(y){const P=We(y);S(P.generalError),v(P.diagnostics),A(P.fieldErrors??{}),y instanceof Ee||ge({tone:"error",message:"Failed to update key rotation policy."})}finally{N(!1)}};if(m)return s.jsx("div",{className:"text-sm text-slate-400",children:"Loading key rotation policy"});const T=l?.guardrails;return s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Rotation Policy"}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"Control automatic signing key rotation schedule and grace period."})]}),!c.enabled&&s.jsx("div",{className:"rounded-lg border border-rose-500/40 bg-rose-500/10 p-4 text-sm text-rose-200",children:"Rotation is disabled. Only use break-glass mode when necessary."}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-5",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsx(re,{label:"Rotation interval (days)",tooltip:T?`Guardrails: ${T.minRotationIntervalDays}${T.maxRotationIntervalDays} days.`:"Rotation cadence in days.",error:j?.rotationIntervalDays?.[0],children:s.jsx("input",{type:"number",min:1,value:c.rotationIntervalDays,onChange:y=>d(P=>({...P,rotationIntervalDays:Number(y.target.value)})),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white"})}),s.jsx(re,{label:"Grace period (days)",tooltip:T?`Guardrails: ${T.minGracePeriodDays}${T.maxGracePeriodDays} days.`:"How long previous keys remain published.",error:j?.gracePeriodDays?.[0],children:s.jsx("input",{type:"number",min:0,value:c.gracePeriodDays,onChange:y=>d(P=>({...P,gracePeriodDays:Number(y.target.value)})),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white"})}),s.jsx(re,{label:"JWKS cache margin (minutes)",tooltip:T?`Guardrails: ${T.minJwksCacheMarginMinutes}${T.maxJwksCacheMarginMinutes} minutes.`:"Extra time added to the safe rollover window for JWKS caches.",error:j?.jwksCacheMarginMinutes?.[0],children:s.jsx("input",{type:"number",min:0,value:c.jwksCacheMarginMinutes,onChange:y=>d(P=>({...P,jwksCacheMarginMinutes:Number(y.target.value)})),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white"})})]}),s.jsxs("label",{className:"mt-4 flex items-center gap-3 text-sm text-slate-200",children:[s.jsx("input",{type:"checkbox",checked:c.enabled,onChange:y=>d(P=>({...P,enabled:y.target.checked})),className:"h-4 w-4 rounded border-slate-700 bg-slate-950 text-indigo-400"}),"Enable automatic rotation"]}),!c.enabled&&s.jsxs("div",{className:"mt-4 grid gap-4",children:[s.jsxs("label",{className:"flex items-center gap-3 text-sm text-slate-200",children:[s.jsx("input",{type:"checkbox",checked:c.breakGlass,onChange:y=>d(P=>({...P,breakGlass:y.target.checked})),className:"h-4 w-4 rounded border-slate-700 bg-slate-950 text-rose-400"}),"Break-glass confirmation"]}),s.jsx(re,{label:"Reason",tooltip:"Provide a reason when disabling rotation in production.",error:j?.reason?.[0],children:s.jsx("input",{type:"text",value:c.reason??"",onChange:y=>d(P=>({...P,reason:y.target.value})),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white"})})]})]}),s.jsx(Ke,{message:x,diagnostics:w}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"button",onClick:U,disabled:f,className:"rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-400 disabled:opacity-60",children:"Save policy"})})]})}const A0={low:"bg-slate-700/40 text-slate-200",medium:"bg-indigo-500/20 text-indigo-200",high:"bg-rose-500/20 text-rose-200",critical:"bg-rose-500/40 text-rose-100"},Uu=l=>l?new Date(l).toLocaleString():"";function _0(){const[l,i]=u.useState([]),[c,d]=u.useState(null),[m,h]=u.useState(!0),f=async()=>{h(!0);try{const x=await q("/admin/api/security/token-incidents?page=1&pageSize=50");i(x.items)}finally{h(!1)}},N=async x=>{const S=await q(`/admin/api/security/token-incidents/${x}`);d(S)};return u.useEffect(()=>{f()},[]),s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Incidents"}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"Review security incidents such as refresh token reuse or key events."})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-5",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Recent incidents"}),s.jsx("div",{className:"mt-4 overflow-hidden rounded-lg border border-slate-800",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-800 text-sm",children:[s.jsx("thead",{className:"bg-slate-950",children:s.jsxs("tr",{className:"text-left text-xs uppercase tracking-wide text-slate-500",children:[s.jsx("th",{className:"px-4 py-3 font-semibold",children:"Timestamp"}),s.jsx("th",{className:"px-4 py-3 font-semibold",children:"Type"}),s.jsx("th",{className:"px-4 py-3 font-semibold",children:"Severity"}),s.jsx("th",{className:"px-4 py-3 font-semibold",children:"Client"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-800 text-slate-200",children:[m&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-4 text-sm text-slate-400",colSpan:4,children:"Loading incidents"})}),!m&&l.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"px-4 py-4 text-sm text-slate-400",colSpan:4,children:"No incidents recorded."})}),l.map(x=>s.jsxs("tr",{className:"cursor-pointer hover:bg-slate-900/40",onClick:()=>N(x.id),children:[s.jsx("td",{className:"px-4 py-3",children:Uu(x.timestampUtc)}),s.jsx("td",{className:"px-4 py-3",children:x.type}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${A0[x.severity]??"bg-slate-700/40 text-slate-200"}`,children:x.severity})}),s.jsx("td",{className:"px-4 py-3",children:x.clientId??""})]},x.id))]})]})})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-5",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Incident detail"}),c?s.jsxs("div",{className:"mt-4 text-sm text-slate-200",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Type"}),s.jsx("div",{children:c.type})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Severity"}),s.jsx("div",{children:c.severity})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Timestamp"}),s.jsx("div",{children:Uu(c.timestampUtc)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Client"}),s.jsx("div",{children:c.clientId??""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"User"}),s.jsx("div",{children:c.userId??""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Trace"}),s.jsx("div",{children:c.traceId??""})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Detail"}),s.jsx("pre",{className:"mt-2 max-h-64 overflow-auto rounded-md border border-slate-800 bg-slate-950 p-3 text-xs text-slate-200",children:c.detailJson??"{}"})]})]}):s.jsx("p",{className:"mt-4 text-sm text-slate-400",children:"Select an incident to view details."})]})]})]})}function O0(){const[l,i]=u.useState(""),[c,d]=u.useState(""),[m,h]=u.useState(null),[f,N]=u.useState(null),[x,S]=u.useState(void 0),[w,v]=u.useState({}),j=async y=>{N(null),S(void 0),v({});try{const P=await q(y,{method:"POST",suppressToast:!0});h(P),ge({tone:"success",message:"Revocation executed."})}catch(P){const b=We(P);N(b.generalError),S(b.diagnostics),v(b.fieldErrors??{}),P instanceof Ee||ge({tone:"error",message:"Failed to revoke grants."})}},A=async()=>{await j(`/admin/api/security/revoke/user/${l}`)},U=async()=>{await j(`/admin/api/security/revoke/client/${c}`)},T=async()=>{await j(`/admin/api/security/revoke/user/${l}/client/${c}`)};return s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Revocation"}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"Revoke tokens and authorizations by user, client, or both."})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-5",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsx(re,{label:"User ID",error:w?.userId?.[0],children:s.jsx("input",{type:"text",value:l,onChange:y=>i(y.target.value),placeholder:"GUID",className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white"})}),s.jsx(re,{label:"Client ID",error:w?.clientId?.[0],children:s.jsx("input",{type:"text",value:c,onChange:y=>d(y.target.value),placeholder:"client-id",className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white"})})]}),s.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[s.jsx("button",{type:"button",onClick:A,disabled:!l,className:"rounded-md border border-slate-700 px-3 py-2 text-sm text-slate-200 hover:border-slate-500 disabled:opacity-50",children:"Revoke user grants"}),s.jsx("button",{type:"button",onClick:U,disabled:!c,className:"rounded-md border border-slate-700 px-3 py-2 text-sm text-slate-200 hover:border-slate-500 disabled:opacity-50",children:"Revoke client grants"}),s.jsx("button",{type:"button",onClick:T,disabled:!l||!c,className:"rounded-md border border-rose-500/70 px-3 py-2 text-sm text-rose-200 hover:border-rose-400 disabled:opacity-50",children:"Revoke user + client"})]}),m&&s.jsxs("div",{className:"mt-4 rounded-md border border-slate-800 bg-slate-950/70 p-4 text-sm text-slate-200",children:["Revoked ",m.tokensRevoked," tokens and ",m.authorizationsRevoked," authorizations."]})]}),s.jsx(Ke,{message:f,diagnostics:x})]})}const Ul=l=>l?new Date(l).toLocaleString():"";function M0(){const[l,i]=u.useState(null),[c,d]=u.useState(null),[m,h]=u.useState(!0);return u.useEffect(()=>{(async()=>{h(!0);try{const N=await q("/admin/api/security/dataprotection/status");i(N);const x=await q("/admin/api/security/encryption/status");d(x)}finally{h(!1)}})()},[]),m?s.jsx("div",{className:"text-sm text-slate-400",children:"Loading DataProtection status"}):s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Data Protection"}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"Monitor ASP.NET Core DataProtection key storage and read-only mode."})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Persisted"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:l?.keysPersisted?"Yes":"No"})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Read-only"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:l?.readOnly?"Yes":"No"})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Key count"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:l?.keyCount??""})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4 md:col-span-2",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Key path"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:l?.keyPath||"Default platform storage"})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Latest activation"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:Ul(l?.latestKeyActivationUtc)})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Latest expiration"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:Ul(l?.latestKeyExpirationUtc)})]})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-5",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Encryption key status"}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"OpenIddict encryption certificate metadata (no private material shown)."}),s.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/80 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Enabled"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:c?.enabled?"Yes":"No"})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/80 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Source"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:c?.source??""})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/80 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Thumbprint"}),s.jsx("div",{className:"mt-2 break-all text-sm text-slate-200",children:c?.thumbprint??""})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/80 p-4 md:col-span-2",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Subject"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:c?.subject??""})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/80 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Not before"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:Ul(c?.notBeforeUtc)})]}),s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/80 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Not after"}),s.jsx("div",{className:"mt-2 text-sm text-slate-200",children:Ul(c?.notAfterUtc)})]})]})]})]})}const z0={id:"",enabled:!0,deactivateAfterDays:90,deleteAfterDays:365,hardDeleteAfterDays:null,hardDeleteEnabled:!1,warnBeforeLogoutMinutes:5,idleLogoutMinutes:30,updatedUtc:new Date().toISOString()};function F0(){const[l,i]=u.useState(z0),[c,d]=u.useState(null),[m,h]=u.useState(90),[f,N]=u.useState("");u.useEffect(()=>{q("/admin/api/security/user-lifecycle-policy").then(i)},[]);const x=async()=>{const v=await q("/admin/api/security/user-lifecycle-policy",{method:"PUT",body:JSON.stringify(l)});i(v),ge({tone:"success",message:"User lifecycle policy updated."})},S=async v=>{if(!f)return;await q(`/admin/api/security/users/${f}/${v}${v==="hard-delete"?"?confirm=true":""}`,{method:"POST"}),ge({tone:"success",message:`User ${v} executed.`})},w=async()=>{const v=await q(`/admin/api/security/user-lifecycle/preview?days=${m}`);d(v)};return s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"User Lifecycle"}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"Manage inactivity deactivation, anonymization, and optional hard delete."})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("label",{className:"text-sm text-slate-300",children:["Deactivate after days",s.jsx("input",{type:"number",className:"mt-1 w-full rounded border border-slate-700 bg-slate-950 px-3 py-2",value:l.deactivateAfterDays,onChange:v=>i(j=>({...j,deactivateAfterDays:Number(v.target.value)}))})]}),s.jsxs("label",{className:"text-sm text-slate-300",children:["Anonymize after days",s.jsx("input",{type:"number",className:"mt-1 w-full rounded border border-slate-700 bg-slate-950 px-3 py-2",value:l.deleteAfterDays,onChange:v=>i(j=>({...j,deleteAfterDays:Number(v.target.value)}))})]}),s.jsxs("label",{className:"text-sm text-slate-300",children:["Hard delete enabled",s.jsx("input",{type:"checkbox",className:"ml-3",checked:l.hardDeleteEnabled,onChange:v=>i(j=>({...j,hardDeleteEnabled:v.target.checked}))})]}),s.jsxs("label",{className:"text-sm text-slate-300",children:["Hard delete after days",s.jsx("input",{type:"number",className:"mt-1 w-full rounded border border-slate-700 bg-slate-950 px-3 py-2",value:l.hardDeleteAfterDays??0,onChange:v=>i(j=>({...j,hardDeleteAfterDays:Number(v.target.value)}))})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{className:"rounded bg-indigo-600 px-4 py-2 text-sm",onClick:x,children:"Save policy"}),s.jsx("input",{type:"number",className:"w-28 rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm",value:m,onChange:v=>h(Number(v.target.value))}),s.jsx("button",{className:"rounded border border-slate-700 px-4 py-2 text-sm",onClick:w,children:"Preview"})]}),c?s.jsxs("div",{className:"rounded border border-slate-800 p-4 text-sm text-slate-300",children:["Would deactivate: ",c.wouldDeactivate,"  Would anonymize: ",c.wouldAnonymize,"  Would hard delete: ",c.wouldHardDelete]}):null,s.jsxs("div",{className:"rounded border border-slate-800 p-4",children:[s.jsx("h2",{className:"mb-3 text-sm font-semibold text-white",children:"Manual user lifecycle actions"}),s.jsx("input",{className:"mb-3 w-full rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm",placeholder:"User ID (GUID)",value:f,onChange:v=>N(v.target.value)}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"rounded border border-slate-700 px-3 py-2 text-sm",onClick:()=>S("deactivate"),children:"Deactivate"}),s.jsx("button",{className:"rounded border border-slate-700 px-3 py-2 text-sm",onClick:()=>S("anonymize"),children:"Anonymize"}),s.jsx("button",{className:"rounded border border-rose-500/50 px-3 py-2 text-sm text-rose-200",onClick:()=>S("hard-delete"),children:"Hard Delete"})]})]})]})}const $0="/account",B0=l=>!!l&&l.startsWith("/")&&!l.startsWith("//");function $i({children:l}){const{status:i}=Cs(),c=xt();if(i==="loading")return s.jsx("div",{className:"py-10 text-sm text-slate-400",children:"Loading"});if(i==="authenticated"){const m=new URLSearchParams(c.search).get("returnUrl"),h=B0(m)?m:$0;return s.jsx(Bs,{to:h,replace:!0})}return s.jsx(s.Fragment,{children:l})}const V0=()=>s.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-100",children:[s.jsx(Qh,{}),s.jsx(Ku,{children:s.jsx("main",{className:"py-10",children:s.jsx(Bl,{})})})]}),W0="/",H0=()=>s.jsxs(oh,{children:[s.jsxs(le,{element:s.jsx(V0,{}),children:[s.jsx(le,{path:"/",element:s.jsx(Yh,{})}),s.jsx(le,{path:"/login",element:s.jsx($i,{children:s.jsx(tx,{})})}),s.jsx(le,{path:"/mfa",element:s.jsx(Rx,{})}),s.jsx(le,{path:"/register",element:s.jsx($i,{children:s.jsx(sx,{})})}),s.jsx(le,{path:"/forgot-password",element:s.jsx($i,{children:s.jsx(nx,{})})}),s.jsx(le,{path:"/reset-password",element:s.jsx(rx,{})}),s.jsx(le,{path:"/activate",element:s.jsx(lx,{})}),s.jsxs(le,{path:"/account",element:s.jsx(ax,{children:s.jsx(cx,{})}),children:[s.jsx(le,{index:!0,element:s.jsx(jx,{})}),s.jsx(le,{path:"profile",element:s.jsx(Bs,{to:"/account",replace:!0})}),s.jsxs(le,{path:"security",element:s.jsx(Ex,{}),children:[s.jsx(le,{path:"mfa",element:s.jsx(kx,{})}),s.jsx(le,{path:"email",element:s.jsx(Nx,{})}),s.jsx(le,{path:"password",element:s.jsx(bx,{})}),s.jsx(le,{path:"sessions",element:s.jsx(wx,{})}),s.jsx(le,{path:"activity",element:s.jsx(Cx,{})})]})]}),s.jsx(le,{path:"/account/email/confirm",element:s.jsx(Px,{})}),s.jsx(le,{path:"/error/403",element:s.jsx(Tx,{})}),s.jsx(le,{path:"/error/404",element:s.jsx(gu,{})}),s.jsx(le,{path:"/error/500",element:s.jsx(Ix,{})}),s.jsx(le,{path:"*",element:s.jsx(gu,{})})]}),s.jsxs(le,{path:Ax,element:s.jsx(Bx,{children:s.jsx($x,{})}),children:[s.jsx(le,{index:!0,element:s.jsx(Hx,{})}),s.jsx(le,{path:"oidc/clients",element:s.jsx(Kx,{})}),s.jsx(le,{path:"oidc/clients/new",element:s.jsx(e0,{})}),s.jsx(le,{path:"oidc/clients/:id",element:s.jsx(t0,{})}),s.jsx(le,{path:"oidc/scopes",element:s.jsx(s0,{})}),s.jsx(le,{path:"oidc/scopes/new",element:s.jsx(l0,{})}),s.jsx(le,{path:"oidc/scopes/:id",element:s.jsx(a0,{})}),s.jsx(le,{path:"oidc/resources",element:s.jsx(i0,{})}),s.jsx(le,{path:"oidc/resources/new",element:s.jsx(c0,{})}),s.jsx(le,{path:"oidc/resources/:id",element:s.jsx(d0,{})}),s.jsx(le,{path:"config/permissions",element:s.jsx(u0,{})}),s.jsx(le,{path:"config/permissions/new",element:s.jsx(h0,{})}),s.jsx(le,{path:"config/permissions/:id",element:s.jsx(x0,{})}),s.jsx(le,{path:"config/roles",element:s.jsx(g0,{})}),s.jsx(le,{path:"config/roles/:id",element:s.jsx(v0,{})}),s.jsx(le,{path:"config/api-resources",element:s.jsx(y0,{})}),s.jsx(le,{path:"config/api-resources/new",element:s.jsx(b0,{})}),s.jsx(le,{path:"config/api-resources/:id",element:s.jsx(N0,{})}),s.jsx(le,{path:"config/api-resources/:id/endpoints",element:s.jsx(w0,{})}),s.jsx(le,{path:"users",element:s.jsx(S0,{})}),s.jsx(le,{path:"users/:id",element:s.jsx(k0,{})}),s.jsx(le,{path:"audit",element:s.jsx(C0,{})}),s.jsx(le,{path:"diagnostics/errors",element:s.jsx(E0,{})}),s.jsx(le,{path:"diagnostics/errors/:id",element:s.jsx(P0,{})}),s.jsx(le,{path:"security/keys",element:s.jsx(T0,{})}),s.jsx(le,{path:"security/rotation",element:s.jsx(D0,{})}),s.jsx(le,{path:"security/tokens",element:s.jsx(U0,{})}),s.jsx(le,{path:"security/incidents",element:s.jsx(_0,{})}),s.jsx(le,{path:"security/revocation",element:s.jsx(O0,{})}),s.jsx(le,{path:"security/dataprotection",element:s.jsx(M0,{})}),s.jsx(le,{path:"security/user-lifecycle",element:s.jsx(F0,{})}),s.jsx(le,{path:"security/signing-keys",element:s.jsx(Bs,{to:"security/keys",replace:!0})}),s.jsx(le,{path:"security/token-policies",element:s.jsx(Bs,{to:"security/tokens",replace:!0})}),s.jsx(le,{path:"*",element:s.jsx(Bs,{to:W0,replace:!0})})]})]});xf.createRoot(document.getElementById("root")).render(s.jsx(Du.StrictMode,{children:s.jsx(Dh,{children:s.jsx(gh,{basename:Ux,children:s.jsx(H0,{})})})}));
